(()=>{var e={};e.id=6757,e.ids=[6757],e.modules={7096:e=>{"use strict";e.exports=require("bcrypt")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},427:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),n(9601),n(5215),n(5866),n(2029);var a=n(3191),r=n(8716),s=n(7922),l=n.n(s),i=n(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);n.d(t,o);let c=["",{children:["(app)",{children:["calculate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,9601)),"/Users/paulsomers/Dev/payfriends-mvp/src/app/(app)/calculate/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,5215)),"/Users/paulsomers/Dev/payfriends-mvp/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,2029)),"/Users/paulsomers/Dev/payfriends-mvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/paulsomers/Dev/payfriends-mvp/src/app/(app)/calculate/page.tsx"],u="/(app)/calculate/page",m={require:n,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/calculate/page",pathname:"/calculate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2689:(e,t,n)=>{Promise.resolve().then(n.bind(n,7069))},3533:(e,t,n)=>{Promise.resolve().then(n.bind(n,5295)),Promise.resolve().then(n.bind(n,561))},7069:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(326),r=n(7577),s=n(5047),l=n(434),i=n(2036);function o(e){if(!e)return"—";let t="string"==typeof e?new Date(e):e,n=t.getDate(),a=t.toLocaleDateString("en-GB",{month:"short"}),r=t.getFullYear();return`${n} ${a} ${r}`}function c(e,t){let n=new Date(e),a=n.getMonth()+t,r=n.getFullYear()+Math.floor(a/12),s=(a%12+12)%12,l=n.getDate();n.setFullYear(r,s,1);let i=new Date(r,s+1,0).getDate();return n.setDate(Math.min(l,i)),n}function d(e,t){let n=new Date(e);return n.setDate(n.getDate()+t),n}function u(e,t){let n=new Date(e);switch(n.setHours(0,0,0,0),t){case"weekly":return new Date(n.getTime()+6048e5);case"biweekly":return new Date(n.getTime()+12096e5);case"every_4_weeks":return new Date(n.getTime()+24192e5);case"monthly":return c(n,1);case"quarterly":return c(n,3);case"yearly":return c(n,12);default:return console.warn(`Unknown frequency "${t}", defaulting to monthly`),c(n,1)}}let m={principal:"",loanStartMode:"upon_acceptance",loanStartDate:"",repaymentType:"one_time",firstPaymentOffset:"year",firstPaymentDate:"",frequency:"monthly",installmentCount:12,interestMode:"interest",interestRate:5};function p(){var e;let t=(0,s.useRouter)(),[n,p]=(0,r.useState)(m),[h,y]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),C=e=>{p(t=>({...t,...e}))},k=e=>{let t=parseFloat(e.replace(/[.,\s]/g,""));return isNaN(t)?0:Math.round(100*t)},P=e=>{let t=k(e)/100;return t<=0?"":t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})},M=(0,r.useCallback)(()=>{let e=new Date;switch(e.setHours(0,0,0,0),n.loanStartMode){case"upon_acceptance":default:return null;case"today":return e;case"tomorrow":return d(e,1);case"week":return d(e,7);case"month":return c(e,1);case"pick_date":return n.loanStartDate?new Date(n.loanStartDate+"T00:00:00"):null}},[n.loanStartMode,n.loanStartDate]),D=(0,r.useCallback)(e=>{if(!e)return null;if("custom"===n.firstPaymentOffset&&n.firstPaymentDate)return new Date(n.firstPaymentDate+"T00:00:00");switch(n.firstPaymentOffset){case"week":return d(e,7);case"month":default:return c(e,1);case"6months":return c(e,6);case"year":return c(e,12)}},[n.firstPaymentOffset,n.firstPaymentDate]),_="no-interest"===n.interestMode?0:n.interestRate,S=(0,r.useMemo)(()=>{let e=k(n.principal),t=4,a=7;e>1e6?(t+=1,a+=1):e<2e5&&(t=Math.max(3,t-1),a=Math.max(5,a-1));let r="year"===n.firstPaymentOffset?12:"6months"===n.firstPaymentOffset?6:"month"===n.firstPaymentOffset?1:12,s="installments"===n.repaymentType?r+n.installmentCount:r;return s>24?(t+=1,a+=1):s<6&&(t=Math.max(3,t-1),a=Math.max(5,a-1)),"installments"===n.repaymentType&&n.installmentCount>=12&&(a=Math.max(5,a-1)),{min:t,max:a}},[n.principal,n.repaymentType,n.installmentCount,n.firstPaymentOffset]),R=(0,r.useMemo)(()=>{let e=k(n.principal);if(e<=0)return null;let t="one_time"===n.repaymentType?1:n.installmentCount,a=M();if(a){let r=D(a),s=function(e){let t;let{principalCents:n,aprPercent:a,repaymentType:r,installmentCount:s,frequency:l,loanStartDate:i,firstPaymentOffset:m,customFirstPaymentDate:p}=e,x="one_time"===r?1:s;if(p)t=new Date(p);else{let e=new Date(i);switch(e.setHours(0,0,0,0),m){case"week":t=d(e,7);break;case"month":default:t=c(e,1);break;case"6months":t=c(e,6);break;case"year":t=c(e,12)}}let{paymentDates:f}=function(e){let{transferDate:t,firstDueDate:n,frequency:a,count:r}=e,s=function(e,t,n){let a=new Date(e),r=new Date(t);return(a.setHours(0,0,0,0),r.setHours(0,0,0,0),r<=a)?u(a,n):r}(t,n,a),l=[],i=new Date(s);for(let e=0;e<r;e++)l.push(new Date(i)),e<r-1&&(i=u(i,a));return{paymentDates:l,normalizedFirstDueDate:s}}({transferDate:i,firstDueDate:t,frequency:"one_time"===r?"monthly":l,count:x});return function(e){let{principalCents:t,aprPercent:n,count:a,paymentDates:r,startDate:s}=e,l=t/100,i=n/100/365,c=l/a,d=0,u=[],m=new Date(s);m.setHours(0,0,0,0);for(let e=1;e<=a;e++){let t=l-c*(e-1),n=new Date(r[e-1]);n.setHours(0,0,0,0);let a=t*i*Math.round((n.getTime()-m.getTime())/864e5),s=c+a,p=t-c;d+=a,u.push({index:e,dateISO:n.toISOString(),date:n,dateLabel:o(n),principalCents:Math.round(100*c),interestCents:Math.round(100*a),paymentCents:Math.round(100*s),remainingCents:p>.01?Math.round(100*p):0}),m=n}let p=Math.round(100*d),x=u.length>0?u[0].date:null,f=u.length>0?u[u.length-1].date:null,h=0;return x&&f&&(h=Math.max(0,12*(f.getFullYear()-s.getFullYear())+(f.getMonth()-s.getMonth()))),{rows:u,totalPrincipalCents:t,totalInterestCents:p,totalToRepayCents:t+p,loanDurationMonths:h,firstPaymentDate:x,lastPaymentDate:f}}({principalCents:n,aprPercent:a,count:x,paymentDates:f,startDate:i})}({principalCents:e,aprPercent:_,repaymentType:n.repaymentType,installmentCount:t,frequency:n.frequency,loanStartDate:a,firstPaymentOffset:n.firstPaymentOffset,customFirstPaymentDate:r||void 0});return{rows:s.rows.map(e=>({index:e.index,dateLabel:e.dateLabel,principalCents:e.principalCents,interestCents:e.interestCents,paymentCents:e.paymentCents,remainingCents:e.remainingCents})),totalPrincipalCents:s.totalPrincipalCents,totalInterestCents:s.totalInterestCents,totalToRepayCents:s.totalToRepayCents,loanDurationMonths:s.loanDurationMonths}}let r="custom"===n.firstPaymentOffset?"year":n.firstPaymentOffset,s=function(e){let t;let{principalCents:n,aprPercent:a,count:r,frequency:s,firstPaymentOffset:l}=e,i=n/100,o=a/100/365,c=i/r,d=function(e){switch(e){case"weekly":return 7;case"biweekly":return 14;case"every_4_weeks":return 28;case"monthly":default:return 30;case"quarterly":return 91;case"yearly":return 365}}(s);switch(l){case"week":t=7;break;case"month":default:t=30;break;case"6months":t=182;break;case"year":t=365}let u=[],m=i,p=0;for(let e=1;e<=r;e++){let n;let a=m*o*(1===e?t:d),r=c+a;if((m-=c)<.01&&(m=0),p+=a,1===e)switch(l){case"week":n="1 week after loan start";break;case"month":default:n="1 month after loan start";break;case"6months":n="6 months after loan start";break;case"year":n="1 year after loan start"}else{let t=e-1;if("monthly"===s){let e=("month"===l?1:"6months"===l?6:12)+t;n=`${e} months after loan start`}else if("weekly"===s){let e=("week"===l?1:4)+t;n=`${e} weeks after loan start`}else if("yearly"===s){let e=1+t;n=1===e?"1 year after loan start":`${e} years after loan start`}else n=`Payment ${e}`}u.push({index:e,dateLabel:n,principalCents:Math.round(100*c),interestCents:Math.round(100*a),paymentCents:Math.round(100*r),remainingCents:Math.round(100*m)})}return{rows:u,totalPrincipalCents:n,totalInterestCents:Math.round(100*p),totalToRepayCents:n+Math.round(100*p)}}({principalCents:e,aprPercent:_,count:t,frequency:n.frequency,firstPaymentOffset:r});return{rows:s.rows.map(e=>({index:e.index,dateLabel:e.dateLabel,principalCents:e.principalCents,interestCents:e.interestCents,paymentCents:e.paymentCents,remainingCents:e.remainingCents})),totalPrincipalCents:s.totalPrincipalCents,totalInterestCents:s.totalInterestCents,totalToRepayCents:s.totalToRepayCents}},[n.principal,n.repaymentType,n.installmentCount,n.frequency,n.firstPaymentOffset,_,M,D]),T=(0,r.useMemo)(()=>{let e=M();return e?o(e):"When agreement is accepted"},[M]),O=(0,r.useMemo)(()=>R&&0!==R.rows.length?R.loanDurationMonths&&R.loanDurationMonths>0?function(e){if(0===e)return"0 months";let t=Math.floor(e/12),n=e%12,a=[];return t>0&&a.push(`${t} year${1===t?"":"s"}`),n>0&&a.push(`${n} month${1===n?"":"s"}`),a.join(" ")}(R.loanDurationMonths):R.rows[R.rows.length-1].dateLabel:null,[R]),F=async()=>{let e=k(n.principal);if(e<=0){w("Please enter a valid loan amount");return}v(!0),w("");try{t.push(`/dashboard?amount=${e}&interest=${_}&type=${n.repaymentType}`)}catch{w("Failed to create agreement. Please try again."),v(!1)}},E=k(n.principal)>0,L="upon_acceptance"===n.loanStartMode;return(0,a.jsxs)("div",{children:[a.jsx("div",{className:"flex items-center justify-between gap-4 mb-6",children:(0,a.jsxs)("div",{children:[a.jsx(l.default,{href:"/dashboard",className:"text-sm text-pf-accent mb-2 block",children:"← Back to Dashboard"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"Loan Calculator"}),a.jsx("p",{className:"text-sm text-pf-muted mt-1",children:"Calculate repayment schedules and interest for loans between friends"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[400px_1fr] gap-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Configuration"}),a.jsx("button",{onClick:()=>{p(m),y(!1),g(!1)},className:"text-sm text-pf-accent hover:underline",children:"Reset"})]}),(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Loan amount (EUR)"}),a.jsx("input",{type:"text",value:n.principal,onChange:e=>C({principal:e.target.value}),onBlur:e=>{let t=P(e.target.value);t&&C({principal:t})},placeholder:"e.g. 6,000",className:`input ${n.principal?"":"border-pf-accent"}`})]}),(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Loan start date"}),(0,a.jsxs)("select",{value:n.loanStartMode,onChange:e=>C({loanStartMode:e.target.value}),className:"input",children:[a.jsx("option",{value:"upon_acceptance",children:"When agreement is accepted"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"tomorrow",children:"Tomorrow"}),a.jsx("option",{value:"week",children:"In 1 week"}),a.jsx("option",{value:"month",children:"In 1 month"}),a.jsx("option",{value:"pick_date",children:"Pick a date..."})]}),a.jsx("p",{className:"text-xs text-pf-muted mt-1 italic",children:"Date used for interest calculations"})]}),"pick_date"===n.loanStartMode&&(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Pick a date"}),a.jsx("input",{type:"date",value:n.loanStartDate,onChange:e=>C({loanStartDate:e.target.value}),className:"input"})]}),(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Repayment type"}),(0,a.jsxs)("select",{value:n.repaymentType,onChange:e=>C({repaymentType:e.target.value}),className:"input",children:[a.jsx("option",{value:"one_time",children:"One-time payment"}),a.jsx("option",{value:"installments",children:"Installments"})]})]}),(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"one_time"===n.repaymentType?"Full repayment due":"First payment due"}),(0,a.jsxs)("select",{value:n.firstPaymentOffset,onChange:e=>C({firstPaymentOffset:e.target.value}),className:"input",children:[a.jsx("option",{value:"week",children:"In 1 week"}),a.jsx("option",{value:"month",children:"In 1 month"}),a.jsx("option",{value:"6months",children:"In 6 months"}),a.jsx("option",{value:"year",children:"In 1 year"}),a.jsx("option",{value:"custom",children:"Pick a date..."})]}),a.jsx("p",{className:"text-xs text-pf-muted mt-1 italic",children:"one_time"===n.repaymentType?"When full repayment is due":"When first payment is due"})]}),"custom"===n.firstPaymentOffset&&(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Pick a date"}),a.jsx("input",{type:"date",value:n.firstPaymentDate,onChange:e=>C({firstPaymentDate:e.target.value}),className:"input"})]}),"installments"===n.repaymentType&&(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Payment frequency"}),(0,a.jsxs)("select",{value:n.frequency,onChange:e=>C({frequency:e.target.value}),className:"input",children:[(0,a.jsxs)("optgroup",{label:"Week-based",children:[a.jsx("option",{value:"weekly",children:"Every week"}),a.jsx("option",{value:"biweekly",children:"Every 2 weeks"}),a.jsx("option",{value:"every_4_weeks",children:"Every 4 weeks"})]}),(0,a.jsxs)("optgroup",{label:"Month-based",children:[a.jsx("option",{value:"monthly",children:"Every month"}),a.jsx("option",{value:"quarterly",children:"Every 3 months"})]}),a.jsx("optgroup",{label:"Year-based",children:a.jsx("option",{value:"yearly",children:"Every year"})})]})]}),"installments"===n.repaymentType&&(0,a.jsxs)("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-2",children:"Number of installments"}),a.jsx("input",{type:"number",value:n.installmentCount,onChange:e=>C({installmentCount:parseInt(e.target.value)||1}),min:"2",max:"120",className:"input"})]}),E&&(0,a.jsxs)("div",{className:"mb-5 text-sm",children:[(0,a.jsxs)("p",{children:["Loan start: ",T]}),O&&(0,a.jsxs)("p",{className:"text-pf-accent mt-1",children:["Loan duration: ",O]})]}),(0,a.jsxs)("div",{className:"pt-5 mt-5 border-t border-pf-card-border",children:[a.jsx("label",{className:"block text-sm text-pf-muted mb-3",children:"Interest"}),(0,a.jsxs)("div",{className:"inline-flex bg-pf-dark rounded-lg p-1 gap-1 mb-4",children:[a.jsx("button",{onClick:()=>C({interestMode:"interest"}),className:`px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${"interest"===n.interestMode?"bg-pf-accent text-black":"text-pf-text"}`,children:"Interest"}),a.jsx("button",{onClick:()=>C({interestMode:"no-interest"}),className:`px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${"no-interest"===n.interestMode?"bg-pf-accent text-black":"text-pf-text"}`,children:"No interest"})]}),"interest"===n.interestMode&&(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",value:n.interestRate,onChange:e=>C({interestRate:parseFloat(e.target.value)||0}),min:"0",max:"100",step:"0.1",className:"input w-20 text-center"}),a.jsx("span",{className:"text-sm font-medium",children:"% per year"})]}),(0,a.jsxs)("button",{onClick:()=>y(!h),className:"px-4 py-2 rounded-full text-xs font-semibold bg-pf-accent/15 text-pf-accent flex items-center gap-1.5",children:[(0,a.jsxs)("span",{children:["Fair range (",S.min,"–",S.max,"%)"]}),(0,a.jsxs)("svg",{className:"w-3.5 h-3.5 opacity-80",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{cx:"8",cy:"8",r:"6.5",strokeWidth:"1.5"}),a.jsx("path",{d:"M8 7.5v4M8 5v0.5",strokeWidth:"2",strokeLinecap:"round"})]})]})]}),h&&"interest"===n.interestMode&&(0,a.jsxs)("div",{className:"mt-3 p-4 bg-pf-accent/10 border border-pf-accent/20 rounded-lg text-sm",children:[a.jsx("p",{className:"font-semibold mb-2",children:"Why this rate?"}),(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-pf-muted",children:[a.jsx("li",{children:"Larger loan amounts increase risk"}),a.jsx("li",{children:"Longer durations increase uncertainty"}),a.jsx("li",{children:"More installments reduce repayment risk"})]}),a.jsx("p",{className:"mt-3 text-pf-muted text-xs",children:"Together, these factors suggest a fair interest range. Your chosen rate should stay inside this range for balanced, respectful lending between friends."})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Repayment Schedule"}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase ${L?"bg-blue-500/20 text-blue-400":"bg-pf-accent/20 text-pf-accent"}`,children:L?"Preview":"Actual"})]}),E?R?a.jsx(a.Fragment,{children:a.jsx("div",{className:"overflow-x-auto border border-pf-card-border rounded-lg",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"bg-pf-card/50 border-b border-pf-card-border",children:[a.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-pf-muted uppercase",children:"#"}),a.jsx("th",{className:"px-3 py-2.5 text-left text-xs font-semibold text-pf-muted uppercase",children:"Due date"}),a.jsx("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-pf-muted uppercase",children:"Principal"}),a.jsx("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-pf-muted uppercase",children:"Interest"}),a.jsx("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-pf-muted uppercase",children:"Total"}),a.jsx("th",{className:"px-3 py-2.5 text-right text-xs font-semibold text-pf-muted uppercase",children:"Balance"})]})}),a.jsx("tbody",{children:R.rows.map((e,t)=>(0,a.jsxs)("tr",{className:`border-b border-pf-card-border/50 ${t%2==0?"":"bg-pf-dark/30"}`,children:[a.jsx("td",{className:"px-3 py-2.5",children:e.index}),a.jsx("td",{className:"px-3 py-2.5 text-pf-muted",children:e.dateLabel}),a.jsx("td",{className:"px-3 py-2.5 text-right tabular-nums",children:(0,i.Sn)(e.principalCents)}),a.jsx("td",{className:"px-3 py-2.5 text-right tabular-nums",children:(0,i.Sn)(e.interestCents)}),a.jsx("td",{className:"px-3 py-2.5 text-right tabular-nums font-semibold",children:(0,i.Sn)(e.paymentCents)}),a.jsx("td",{className:"px-3 py-2.5 text-right tabular-nums",children:(0,i.Sn)(e.remainingCents)})]},e.index))}),a.jsx("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t-2 border-pf-accent/50 text-pf-accent font-semibold",children:[a.jsx("td",{colSpan:2,className:"px-3 py-3 uppercase text-xs",children:"Loan totals"}),a.jsx("td",{className:"px-3 py-3 text-right tabular-nums",children:(0,i.Sn)(R.totalPrincipalCents)}),a.jsx("td",{className:"px-3 py-3 text-right tabular-nums",children:(0,i.Sn)(R.totalInterestCents)}),a.jsx("td",{className:"px-3 py-3 text-right tabular-nums",children:(0,i.Sn)(R.totalToRepayCents)}),a.jsx("td",{})]})})]})})}):null:a.jsx("div",{className:"text-center py-10 text-pf-muted",children:"Enter loan amount and details to calculate..."})]}),E&&R&&(0,a.jsxs)("div",{className:"card p-6 bg-pf-accent/10 border-pf-accent/30",children:[a.jsx("h2",{className:"text-lg font-semibold text-pf-accent mb-4",children:"Loan Summary"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[a.jsx(x,{label:"Loan amount",value:(0,i.Sn)(k(n.principal))}),a.jsx(x,{label:"Repayment type",value:"one_time"===n.repaymentType?"One-time payment":`${n.installmentCount} installments`}),"installments"===n.repaymentType&&a.jsx(x,{label:"Frequency",value:{weekly:"Weekly",biweekly:"Every 2 weeks",every_4_weeks:"Every 4 weeks",monthly:"Monthly",quarterly:"Every 3 months",yearly:"Yearly"}[e=n.frequency]||e}),O&&a.jsx(x,{label:"Loan duration",value:O}),a.jsx(x,{label:"Annual interest rate",value:0===_?"No interest (0%)":`${_}% per year`}),a.jsx("div",{className:"border-t border-pf-card-border my-3"}),a.jsx(x,{label:"Total interest",value:(0,i.Sn)(R.totalInterestCents),icon:!0}),a.jsx(x,{label:"Total to repay",value:(0,i.Sn)(R.totalToRepayCents),highlight:!0,icon:!0})]}),(0,a.jsxs)("div",{className:"mt-5 pt-4 border-t border-pf-card-border/50 text-xs text-pf-muted",children:[(0,a.jsxs)("p",{children:["Amounts marked with"," ",a.jsx("span",{className:"inline-flex items-center text-pf-accent",children:a.jsx(f,{})})," ","are calculated using Fairness Between Friends rules."," ",a.jsx("button",{onClick:()=>g(!b),className:"text-pf-accent hover:underline",children:"How it works"})]}),b&&a.jsx("div",{className:"mt-3 p-3 bg-black/20 rounded-lg text-xs",children:"Fairness Between Friends adjusts interest dynamically based on the outstanding balance and time elapsed. Paying earlier reduces total interest, while paying later increases it. Both sides always see the current, fair value of the loan."})]})]}),E&&(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("p",{className:"text-sm text-pf-muted mb-4",children:"Ready to create a loan agreement? You'll be able to add borrower details next."}),N&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 text-sm text-red-400 mb-4",children:N}),a.jsx("button",{onClick:F,disabled:j,className:"btn-primary w-full",children:j?"Creating...":"Create Agreement"})]})]})]})]})}function x({label:e,value:t,highlight:n=!1,icon:r=!1}){return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-pf-muted",children:e}),(0,a.jsxs)("span",{className:`flex items-center gap-1 ${n?"font-bold text-pf-accent":"font-medium"}`,children:[t,r&&a.jsx(f,{})]})]})}function f(){return(0,a.jsxs)("svg",{className:"w-4 h-4 text-pf-accent",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),a.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),a.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}},2036:(e,t,n)=>{"use strict";n.d(t,{Sn:()=>s,p6:()=>l,tV:()=>r});let a="nl-NL";function r(e,t=a){return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round((e??0)/100))}function s(e,t=a){return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format((e??0)/100)}function l(e,t=a){let n="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(n)}},8585:(e,t,n)=>{"use strict";var a=n(1085);n.o(a,"redirect")&&n.d(t,{redirect:function(){return a.redirect}})},1085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return a.RedirectType},notFound:function(){return r.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect}});let a=n(3953),r=n(6399);class s extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new s}delete(){throw new s}set(){throw new s}sort(){throw new s}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{isNotFoundError:function(){return r},notFound:function(){return a}});let n="NEXT_NOT_FOUND";function a(){let e=Error(n);throw e.digest=n,e}function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return n}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,n)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{RedirectType:function(){return a},getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return x},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return d},redirect:function(){return c}});let r=n(4580),s=n(2934),l=n(8586),i="NEXT_REDIRECT";function o(e,t,n){void 0===n&&(n=l.RedirectStatusCode.TemporaryRedirect);let a=Error(i);a.digest=i+";"+t+";"+e+";"+n+";";let s=r.requestAsyncStorage.getStore();return s&&(a.mutableCookies=s.mutableCookies),a}function c(e,t){void 0===t&&(t="replace");let n=s.actionAsyncStorage.getStore();throw o(e,t,(null==n?void 0:n.isAction)?l.RedirectStatusCode.SeeOther:l.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let n=s.actionAsyncStorage.getStore();throw o(e,t,(null==n?void 0:n.isAction)?l.RedirectStatusCode.SeeOther:l.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,n,a,r]=e.digest.split(";",4),s=Number(r);return t===i&&("replace"===n||"push"===n)&&"string"==typeof a&&!isNaN(s)&&s in l.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function p(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function x(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(a||(a={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9601:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});let a=(0,n(8570).createProxy)(String.raw`/Users/paulsomers/Dev/payfriends-mvp/src/app/(app)/calculate/page.tsx#default`)},5215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var a=n(9510),r=n(8585),s=n(5456),l=n(3188),i=n(1953),o=n(2027);async function c({children:e}){let t=await (0,s.ts)();t||(0,r.redirect)("/login");let n=(await (0,o.VA)(t.id,{unreadOnly:!0})).length;return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsxs)("div",{className:"container-pf flex-1",children:[a.jsx(l.h,{user:t,unreadCount:n}),a.jsx("main",{children:e})]}),a.jsx(i.$,{})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[9276,9702,4471,434,7377,2481,2027,8610],()=>n(427));module.exports=a})();