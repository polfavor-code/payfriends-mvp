"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/grouptabs/route";
exports.ids = ["app/api/grouptabs/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgrouptabs%2Froute&page=%2Fapi%2Fgrouptabs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgrouptabs%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgrouptabs%2Froute&page=%2Fapi%2Fgrouptabs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgrouptabs%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_paulsomers_Dev_payfriends_mvp_src_app_api_grouptabs_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/grouptabs/route.ts */ \"(rsc)/./src/app/api/grouptabs/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/grouptabs/route\",\n        pathname: \"/api/grouptabs\",\n        filename: \"route\",\n        bundlePath: \"app/api/grouptabs/route\"\n    },\n    resolvedPagePath: \"/Users/paulsomers/Dev/payfriends-mvp/src/app/api/grouptabs/route.ts\",\n    nextConfigOutput,\n    userland: _Users_paulsomers_Dev_payfriends_mvp_src_app_api_grouptabs_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/grouptabs/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZncm91cHRhYnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdyb3VwdGFicyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdyb3VwdGFicyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBhdWxzb21lcnMlMkZEZXYlMkZwYXlmcmllbmRzLW12cCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwYXVsc29tZXJzJTJGRGV2JTJGcGF5ZnJpZW5kcy1tdnAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21CO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvP2ZhZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3BhdWxzb21lcnMvRGV2L3BheWZyaWVuZHMtbXZwL3NyYy9hcHAvYXBpL2dyb3VwdGFicy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ3JvdXB0YWJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ3JvdXB0YWJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ncm91cHRhYnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcGF1bHNvbWVycy9EZXYvcGF5ZnJpZW5kcy1tdnAvc3JjL2FwcC9hcGkvZ3JvdXB0YWJzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9ncm91cHRhYnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgrouptabs%2Froute&page=%2Fapi%2Fgrouptabs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgrouptabs%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/grouptabs/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/grouptabs/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_supabase_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase/db */ \"(rsc)/./src/lib/supabase/db.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n/**\n * GET /api/grouptabs - List all group tabs for current user\n * POST /api/grouptabs - Create a new group tab\n */ \n\n\n\nasync function GET() {\n    try {\n        const authUser = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n        if (!authUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Not authenticated\"\n            }, {\n                status: 401\n            });\n        }\n        const tabs = await (0,_lib_supabase_db__WEBPACK_IMPORTED_MODULE_2__.getGroupTabsByUserId)(authUser.id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            tabs\n        });\n    } catch (error) {\n        console.error(\"[API] List group tabs error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An error occurred\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const authUser = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n        if (!authUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Not authenticated\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { name, description, tabType = \"one_bill\", template, totalAmountCents, splitMode = \"equal\", expectedPayRate = 100, seatCount, peopleCount = 2, proofRequired = \"optional\", // Gift-specific fields\n        giftMode, recipientName, aboutText, aboutLink, amountTarget, contributorCount, isOpenPot, // Payment methods\n        paymentMethods } = body;\n        // Validate required fields\n        if (!name) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Name is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Generate tokens\n        const magicToken = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.generateToken)(16);\n        const ownerToken = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.generateToken)(16);\n        // Generate invite code (12 chars, URL-safe)\n        const inviteCode = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.generateToken)(12);\n        const manageCode = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.generateToken)(12);\n        const tab = await (0,_lib_supabase_db__WEBPACK_IMPORTED_MODULE_2__.createGroupTab)({\n            creator_user_id: authUser.id,\n            name,\n            description: description || null,\n            tab_type: tabType,\n            template: template || null,\n            status: \"open\",\n            total_amount_cents: totalAmountCents || null,\n            split_mode: splitMode,\n            expected_pay_rate: expectedPayRate,\n            seat_count: seatCount || null,\n            people_count: peopleCount,\n            receipt_file_path: null,\n            paid_up_cents: 0,\n            host_overpaid_cents: 0,\n            total_raised_cents: 0,\n            proof_required: proofRequired,\n            magic_token: magicToken,\n            owner_token: ownerToken,\n            invite_code: inviteCode,\n            manage_code: manageCode,\n            event_date: null,\n            // Gift-specific fields\n            gift_mode: giftMode || null,\n            group_gift_mode: \"gift\",\n            recipient_name: recipientName || null,\n            about_text: aboutText || null,\n            about_image_path: null,\n            about_link: aboutLink || null,\n            is_raising_money_only: false,\n            amount_target: amountTarget || null,\n            contributor_count: contributorCount || null,\n            raising_for_text: null,\n            raising_for_image_path: null,\n            raising_for_link: null,\n            is_open_pot: isOpenPot || false,\n            organizer_contribution: null,\n            closed_at: null,\n            // Payment methods as JSON string\n            payment_methods_json: paymentMethods ? JSON.stringify(paymentMethods) : null\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            tab\n        });\n    } catch (error) {\n        console.error(\"[API] Create group tab error:\", error);\n        let errorMessage = \"Unknown error\";\n        let errorDetails = \"\";\n        if (error instanceof Error) {\n            errorMessage = error.message;\n            errorDetails = error.stack || \"\";\n        } else if (typeof error === \"object\" && error !== null) {\n            errorMessage = JSON.stringify(error);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An error occurred\",\n            details: errorMessage,\n            stack: errorDetails\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9ncm91cHRhYnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRXVEO0FBQ1o7QUFDNkI7QUFDN0I7QUFFckMsZUFBZUs7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLFdBQVcsTUFBTUwseURBQWNBO1FBRXJDLElBQUksQ0FBQ0ssVUFBVTtZQUNiLE9BQU9OLHFEQUFZQSxDQUFDTyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQW9CLEdBQzdCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxPQUFPLE1BQU1SLHNFQUFvQkEsQ0FBQ0ksU0FBU0ssRUFBRTtRQUVuRCxPQUFPWCxxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQ3ZCSyxTQUFTO1lBQ1RGO1FBQ0Y7SUFDRixFQUFFLE9BQU9GLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBT1IscURBQVlBLENBQUNPLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUFvQixHQUM3QjtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWVLLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNVCxXQUFXLE1BQU1MLHlEQUFjQTtRQUVyQyxJQUFJLENBQUNLLFVBQVU7WUFDYixPQUFPTixxREFBWUEsQ0FBQ08sSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFvQixHQUM3QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTU8sT0FBTyxNQUFNRCxRQUFRUixJQUFJO1FBQy9CLE1BQU0sRUFDSlUsSUFBSSxFQUNKQyxXQUFXLEVBQ1hDLFVBQVUsVUFBVSxFQUNwQkMsUUFBUSxFQUNSQyxnQkFBZ0IsRUFDaEJDLFlBQVksT0FBTyxFQUNuQkMsa0JBQWtCLEdBQUcsRUFDckJDLFNBQVMsRUFDVEMsY0FBYyxDQUFDLEVBQ2ZDLGdCQUFnQixVQUFVLEVBQzFCLHVCQUF1QjtRQUN2QkMsUUFBUSxFQUNSQyxhQUFhLEVBQ2JDLFNBQVMsRUFDVEMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLGdCQUFnQixFQUNoQkMsU0FBUyxFQUNULGtCQUFrQjtRQUNsQkMsY0FBYyxFQUNmLEdBQUdsQjtRQUVKLDJCQUEyQjtRQUMzQixJQUFJLENBQUNDLE1BQU07WUFDVCxPQUFPakIscURBQVlBLENBQUNPLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBbUIsR0FDNUI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGtCQUFrQjtRQUNsQixNQUFNMEIsYUFBYS9CLHlEQUFhQSxDQUFDO1FBQ2pDLE1BQU1nQyxhQUFhaEMseURBQWFBLENBQUM7UUFDakMsNENBQTRDO1FBQzVDLE1BQU1pQyxhQUFhakMseURBQWFBLENBQUM7UUFDakMsTUFBTWtDLGFBQWFsQyx5REFBYUEsQ0FBQztRQUVqQyxNQUFNbUMsTUFBTSxNQUFNcEMsZ0VBQWNBLENBQUM7WUFDL0JxQyxpQkFBaUJsQyxTQUFTSyxFQUFFO1lBQzVCTTtZQUNBQyxhQUFhQSxlQUFlO1lBQzVCdUIsVUFBVXRCO1lBQ1ZDLFVBQVVBLFlBQVk7WUFDdEJYLFFBQVE7WUFDUmlDLG9CQUFvQnJCLG9CQUFvQjtZQUN4Q3NCLFlBQVlyQjtZQUNac0IsbUJBQW1CckI7WUFDbkJzQixZQUFZckIsYUFBYTtZQUN6QnNCLGNBQWNyQjtZQUNkc0IsbUJBQW1CO1lBQ25CQyxlQUFlO1lBQ2ZDLHFCQUFxQjtZQUNyQkMsb0JBQW9CO1lBQ3BCQyxnQkFBZ0J6QjtZQUNoQjBCLGFBQWFqQjtZQUNia0IsYUFBYWpCO1lBQ2JrQixhQUFhakI7WUFDYmtCLGFBQWFqQjtZQUNia0IsWUFBWTtZQUNaLHVCQUF1QjtZQUN2QkMsV0FBVzlCLFlBQVk7WUFDdkIrQixpQkFBaUI7WUFDakJDLGdCQUFnQi9CLGlCQUFpQjtZQUNqQ2dDLFlBQVkvQixhQUFhO1lBQ3pCZ0Msa0JBQWtCO1lBQ2xCQyxZQUFZaEMsYUFBYTtZQUN6QmlDLHVCQUF1QjtZQUN2QkMsZUFBZWpDLGdCQUFnQjtZQUMvQmtDLG1CQUFtQmpDLG9CQUFvQjtZQUN2Q2tDLGtCQUFrQjtZQUNsQkMsd0JBQXdCO1lBQ3hCQyxrQkFBa0I7WUFDbEJDLGFBQWFwQyxhQUFhO1lBQzFCcUMsd0JBQXdCO1lBQ3hCQyxXQUFXO1lBQ1gsaUNBQWlDO1lBQ2pDQyxzQkFBc0J0QyxpQkFBaUJ1QyxLQUFLQyxTQUFTLENBQUN4QyxrQkFBa0I7UUFDMUU7UUFFQSxPQUFPbEMscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QkssU0FBUztZQUNUMkI7UUFDRjtJQUNGLEVBQUUsT0FBTy9CLE9BQWdCO1FBQ3ZCSyxRQUFRTCxLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxJQUFJbUUsZUFBZTtRQUNuQixJQUFJQyxlQUFlO1FBQ25CLElBQUlwRSxpQkFBaUJxRSxPQUFPO1lBQzFCRixlQUFlbkUsTUFBTXNFLE9BQU87WUFDNUJGLGVBQWVwRSxNQUFNdUUsS0FBSyxJQUFJO1FBQ2hDLE9BQU8sSUFBSSxPQUFPdkUsVUFBVSxZQUFZQSxVQUFVLE1BQU07WUFDdERtRSxlQUFlRixLQUFLQyxTQUFTLENBQUNsRTtRQUNoQztRQUNBLE9BQU9SLHFEQUFZQSxDQUFDTyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87WUFBcUJ3RSxTQUFTTDtZQUFjSSxPQUFPSDtRQUFhLEdBQ3pFO1lBQUVuRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheWZyaWVuZHMtbXZwLy4vc3JjL2FwcC9hcGkvZ3JvdXB0YWJzL3JvdXRlLnRzPzM0ZTkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHRVQgL2FwaS9ncm91cHRhYnMgLSBMaXN0IGFsbCBncm91cCB0YWJzIGZvciBjdXJyZW50IHVzZXJcbiAqIFBPU1QgL2FwaS9ncm91cHRhYnMgLSBDcmVhdGUgYSBuZXcgZ3JvdXAgdGFiXG4gKi9cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5pbXBvcnQgeyBnZXRHcm91cFRhYnNCeVVzZXJJZCwgY3JlYXRlR3JvdXBUYWIgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9kYic7XG5pbXBvcnQgeyBnZW5lcmF0ZVRva2VuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhVc2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcblxuICAgIGlmICghYXV0aFVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdGFicyA9IGF3YWl0IGdldEdyb3VwVGFic0J5VXNlcklkKGF1dGhVc2VyLmlkKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdGFicyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQVBJXSBMaXN0IGdyb3VwIHRhYnMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoVXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG5cbiAgICBpZiAoIWF1dGhVc2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdOb3QgYXV0aGVudGljYXRlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICB0YWJUeXBlID0gJ29uZV9iaWxsJyxcbiAgICAgIHRlbXBsYXRlLFxuICAgICAgdG90YWxBbW91bnRDZW50cyxcbiAgICAgIHNwbGl0TW9kZSA9ICdlcXVhbCcsXG4gICAgICBleHBlY3RlZFBheVJhdGUgPSAxMDAsXG4gICAgICBzZWF0Q291bnQsXG4gICAgICBwZW9wbGVDb3VudCA9IDIsXG4gICAgICBwcm9vZlJlcXVpcmVkID0gJ29wdGlvbmFsJyxcbiAgICAgIC8vIEdpZnQtc3BlY2lmaWMgZmllbGRzXG4gICAgICBnaWZ0TW9kZSxcbiAgICAgIHJlY2lwaWVudE5hbWUsXG4gICAgICBhYm91dFRleHQsXG4gICAgICBhYm91dExpbmssXG4gICAgICBhbW91bnRUYXJnZXQsXG4gICAgICBjb250cmlidXRvckNvdW50LFxuICAgICAgaXNPcGVuUG90LFxuICAgICAgLy8gUGF5bWVudCBtZXRob2RzXG4gICAgICBwYXltZW50TWV0aG9kcyxcbiAgICB9ID0gYm9keTtcblxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghbmFtZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTmFtZSBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIHRva2Vuc1xuICAgIGNvbnN0IG1hZ2ljVG9rZW4gPSBnZW5lcmF0ZVRva2VuKDE2KTtcbiAgICBjb25zdCBvd25lclRva2VuID0gZ2VuZXJhdGVUb2tlbigxNik7XG4gICAgLy8gR2VuZXJhdGUgaW52aXRlIGNvZGUgKDEyIGNoYXJzLCBVUkwtc2FmZSlcbiAgICBjb25zdCBpbnZpdGVDb2RlID0gZ2VuZXJhdGVUb2tlbigxMik7XG4gICAgY29uc3QgbWFuYWdlQ29kZSA9IGdlbmVyYXRlVG9rZW4oMTIpO1xuXG4gICAgY29uc3QgdGFiID0gYXdhaXQgY3JlYXRlR3JvdXBUYWIoe1xuICAgICAgY3JlYXRvcl91c2VyX2lkOiBhdXRoVXNlci5pZCxcbiAgICAgIG5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgbnVsbCxcbiAgICAgIHRhYl90eXBlOiB0YWJUeXBlLFxuICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlIHx8IG51bGwsXG4gICAgICBzdGF0dXM6ICdvcGVuJyxcbiAgICAgIHRvdGFsX2Ftb3VudF9jZW50czogdG90YWxBbW91bnRDZW50cyB8fCBudWxsLFxuICAgICAgc3BsaXRfbW9kZTogc3BsaXRNb2RlLFxuICAgICAgZXhwZWN0ZWRfcGF5X3JhdGU6IGV4cGVjdGVkUGF5UmF0ZSxcbiAgICAgIHNlYXRfY291bnQ6IHNlYXRDb3VudCB8fCBudWxsLFxuICAgICAgcGVvcGxlX2NvdW50OiBwZW9wbGVDb3VudCxcbiAgICAgIHJlY2VpcHRfZmlsZV9wYXRoOiBudWxsLFxuICAgICAgcGFpZF91cF9jZW50czogMCxcbiAgICAgIGhvc3Rfb3ZlcnBhaWRfY2VudHM6IDAsXG4gICAgICB0b3RhbF9yYWlzZWRfY2VudHM6IDAsXG4gICAgICBwcm9vZl9yZXF1aXJlZDogcHJvb2ZSZXF1aXJlZCxcbiAgICAgIG1hZ2ljX3Rva2VuOiBtYWdpY1Rva2VuLFxuICAgICAgb3duZXJfdG9rZW46IG93bmVyVG9rZW4sXG4gICAgICBpbnZpdGVfY29kZTogaW52aXRlQ29kZSxcbiAgICAgIG1hbmFnZV9jb2RlOiBtYW5hZ2VDb2RlLFxuICAgICAgZXZlbnRfZGF0ZTogbnVsbCxcbiAgICAgIC8vIEdpZnQtc3BlY2lmaWMgZmllbGRzXG4gICAgICBnaWZ0X21vZGU6IGdpZnRNb2RlIHx8IG51bGwsXG4gICAgICBncm91cF9naWZ0X21vZGU6ICdnaWZ0JyxcbiAgICAgIHJlY2lwaWVudF9uYW1lOiByZWNpcGllbnROYW1lIHx8IG51bGwsXG4gICAgICBhYm91dF90ZXh0OiBhYm91dFRleHQgfHwgbnVsbCxcbiAgICAgIGFib3V0X2ltYWdlX3BhdGg6IG51bGwsXG4gICAgICBhYm91dF9saW5rOiBhYm91dExpbmsgfHwgbnVsbCxcbiAgICAgIGlzX3JhaXNpbmdfbW9uZXlfb25seTogZmFsc2UsXG4gICAgICBhbW91bnRfdGFyZ2V0OiBhbW91bnRUYXJnZXQgfHwgbnVsbCxcbiAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiBjb250cmlidXRvckNvdW50IHx8IG51bGwsXG4gICAgICByYWlzaW5nX2Zvcl90ZXh0OiBudWxsLFxuICAgICAgcmFpc2luZ19mb3JfaW1hZ2VfcGF0aDogbnVsbCxcbiAgICAgIHJhaXNpbmdfZm9yX2xpbms6IG51bGwsXG4gICAgICBpc19vcGVuX3BvdDogaXNPcGVuUG90IHx8IGZhbHNlLFxuICAgICAgb3JnYW5pemVyX2NvbnRyaWJ1dGlvbjogbnVsbCxcbiAgICAgIGNsb3NlZF9hdDogbnVsbCxcbiAgICAgIC8vIFBheW1lbnQgbWV0aG9kcyBhcyBKU09OIHN0cmluZ1xuICAgICAgcGF5bWVudF9tZXRob2RzX2pzb246IHBheW1lbnRNZXRob2RzID8gSlNPTi5zdHJpbmdpZnkocGF5bWVudE1ldGhvZHMpIDogbnVsbCxcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdGFiLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEldIENyZWF0ZSBncm91cCB0YWIgZXJyb3I6JywgZXJyb3IpO1xuICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnVW5rbm93biBlcnJvcic7XG4gICAgbGV0IGVycm9yRGV0YWlscyA9ICcnO1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgZXJyb3JEZXRhaWxzID0gZXJyb3Iuc3RhY2sgfHwgJyc7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCcsIGRldGFpbHM6IGVycm9yTWVzc2FnZSwgc3RhY2s6IGVycm9yRGV0YWlscyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldEN1cnJlbnRVc2VyIiwiZ2V0R3JvdXBUYWJzQnlVc2VySWQiLCJjcmVhdGVHcm91cFRhYiIsImdlbmVyYXRlVG9rZW4iLCJHRVQiLCJhdXRoVXNlciIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInRhYnMiLCJpZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwibmFtZSIsImRlc2NyaXB0aW9uIiwidGFiVHlwZSIsInRlbXBsYXRlIiwidG90YWxBbW91bnRDZW50cyIsInNwbGl0TW9kZSIsImV4cGVjdGVkUGF5UmF0ZSIsInNlYXRDb3VudCIsInBlb3BsZUNvdW50IiwicHJvb2ZSZXF1aXJlZCIsImdpZnRNb2RlIiwicmVjaXBpZW50TmFtZSIsImFib3V0VGV4dCIsImFib3V0TGluayIsImFtb3VudFRhcmdldCIsImNvbnRyaWJ1dG9yQ291bnQiLCJpc09wZW5Qb3QiLCJwYXltZW50TWV0aG9kcyIsIm1hZ2ljVG9rZW4iLCJvd25lclRva2VuIiwiaW52aXRlQ29kZSIsIm1hbmFnZUNvZGUiLCJ0YWIiLCJjcmVhdG9yX3VzZXJfaWQiLCJ0YWJfdHlwZSIsInRvdGFsX2Ftb3VudF9jZW50cyIsInNwbGl0X21vZGUiLCJleHBlY3RlZF9wYXlfcmF0ZSIsInNlYXRfY291bnQiLCJwZW9wbGVfY291bnQiLCJyZWNlaXB0X2ZpbGVfcGF0aCIsInBhaWRfdXBfY2VudHMiLCJob3N0X292ZXJwYWlkX2NlbnRzIiwidG90YWxfcmFpc2VkX2NlbnRzIiwicHJvb2ZfcmVxdWlyZWQiLCJtYWdpY190b2tlbiIsIm93bmVyX3Rva2VuIiwiaW52aXRlX2NvZGUiLCJtYW5hZ2VfY29kZSIsImV2ZW50X2RhdGUiLCJnaWZ0X21vZGUiLCJncm91cF9naWZ0X21vZGUiLCJyZWNpcGllbnRfbmFtZSIsImFib3V0X3RleHQiLCJhYm91dF9pbWFnZV9wYXRoIiwiYWJvdXRfbGluayIsImlzX3JhaXNpbmdfbW9uZXlfb25seSIsImFtb3VudF90YXJnZXQiLCJjb250cmlidXRvcl9jb3VudCIsInJhaXNpbmdfZm9yX3RleHQiLCJyYWlzaW5nX2Zvcl9pbWFnZV9wYXRoIiwicmFpc2luZ19mb3JfbGluayIsImlzX29wZW5fcG90Iiwib3JnYW5pemVyX2NvbnRyaWJ1dGlvbiIsImNsb3NlZF9hdCIsInBheW1lbnRfbWV0aG9kc19qc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yTWVzc2FnZSIsImVycm9yRGV0YWlscyIsIkVycm9yIiwibWVzc2FnZSIsInN0YWNrIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/grouptabs/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSessionCookie: () => (/* binding */ clearSessionCookie),\n/* harmony export */   createUserSession: () => (/* binding */ createUserSession),\n/* harmony export */   generatePublicId: () => (/* binding */ generatePublicId),\n/* harmony export */   generateSessionId: () => (/* binding */ generateSessionId),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   logoutUser: () => (/* binding */ logoutUser),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   signupUser: () => (/* binding */ signupUser),\n/* harmony export */   validateSession: () => (/* binding */ validateSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _supabase_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./supabase/db */ \"(rsc)/./src/lib/supabase/db.ts\");\n/**\n * Authentication utilities\n * Handles session-based authentication for PayFriends\n */ \n\n\n\nconst SESSION_COOKIE_NAME = \"pf_session\";\nconst SESSION_EXPIRY_DAYS = 30;\nconst SALT_ROUNDS = 10;\n/**\n * Get the current authenticated user from the session cookie\n */ async function getCurrentUser() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const sessionId = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n        if (!sessionId) {\n            return null;\n        }\n        const session = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getSessionById)(sessionId);\n        if (!session) {\n            return null;\n        }\n        // Check if session is expired\n        if (new Date(session.expires_at) < new Date()) {\n            await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.deleteSession)(sessionId);\n            return null;\n        }\n        const user = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getUserById)(session.user_id);\n        if (!user) {\n            return null;\n        }\n        return {\n            id: user.id,\n            email: user.email,\n            fullName: user.full_name,\n            publicId: user.public_id,\n            isAdmin: user.is_admin,\n            profilePicturePath: user.profile_picture_path\n        };\n    } catch (error) {\n        console.error(\"[Auth] getCurrentUser error:\", error);\n        return null;\n    }\n}\n/**\n * Validate session without getting the full user\n */ async function validateSession() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const sessionId = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n    if (!sessionId) {\n        return false;\n    }\n    const session = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getSessionById)(sessionId);\n    if (!session || new Date(session.expires_at) < new Date()) {\n        return false;\n    }\n    return true;\n}\n/**\n * Hash a password\n */ async function hashPassword(password) {\n    return bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hash(password, SALT_ROUNDS);\n}\n/**\n * Verify a password against a hash\n */ async function verifyPassword(password, hash) {\n    return bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compare(password, hash);\n}\n/**\n * Generate a secure session ID\n */ function generateSessionId() {\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(32).toString(\"hex\");\n}\n/**\n * Generate a public ID for a user\n */ function generatePublicId() {\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(8).toString(\"hex\");\n}\n/**\n * Create a new session for a user\n */ async function createUserSession(userId) {\n    const sessionId = generateSessionId();\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + SESSION_EXPIRY_DAYS);\n    await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.createSession)({\n        id: sessionId,\n        userId,\n        expiresAt: expiresAt.toISOString()\n    });\n    return sessionId;\n}\n/**\n * Set the session cookie\n */ async function setSessionCookie(sessionId) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + SESSION_EXPIRY_DAYS);\n    cookieStore.set(SESSION_COOKIE_NAME, sessionId, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        expires: expiresAt,\n        path: \"/\"\n    });\n}\n/**\n * Clear the session cookie\n */ async function clearSessionCookie() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    cookieStore.delete(SESSION_COOKIE_NAME);\n}\n/**\n * Login a user with email and password\n */ async function loginUser(email, password) {\n    try {\n        const user = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getUserByEmail)(email);\n        if (!user) {\n            return {\n                success: false,\n                error: \"Invalid email or password\"\n            };\n        }\n        const passwordValid = await verifyPassword(password, user.password_hash);\n        if (!passwordValid) {\n            return {\n                success: false,\n                error: \"Invalid email or password\"\n            };\n        }\n        const sessionId = await createUserSession(user.id);\n        await setSessionCookie(sessionId);\n        return {\n            success: true,\n            user: {\n                id: user.id,\n                email: user.email,\n                fullName: user.full_name,\n                publicId: user.public_id,\n                isAdmin: user.is_admin,\n                profilePicturePath: user.profile_picture_path\n            }\n        };\n    } catch (error) {\n        console.error(\"[Auth] loginUser error:\", error);\n        return {\n            success: false,\n            error: \"An error occurred during login\"\n        };\n    }\n}\n/**\n * Sign up a new user\n */ async function signupUser(email, password, fullName) {\n    try {\n        // Check if user already exists\n        const existingUser = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getUserByEmail)(email);\n        if (existingUser) {\n            return {\n                success: false,\n                error: \"An account with this email already exists\"\n            };\n        }\n        // Validate password\n        if (password.length < 8) {\n            return {\n                success: false,\n                error: \"Password must be at least 8 characters\"\n            };\n        }\n        // Hash password and create user\n        const passwordHash = await hashPassword(password);\n        const publicId = generatePublicId();\n        const user = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.createUser)({\n            email,\n            passwordHash,\n            fullName,\n            publicId\n        });\n        // Create session and set cookie\n        const sessionId = await createUserSession(user.id);\n        await setSessionCookie(sessionId);\n        return {\n            success: true,\n            user: {\n                id: user.id,\n                email: user.email,\n                fullName: user.full_name,\n                publicId: user.public_id,\n                isAdmin: user.is_admin,\n                profilePicturePath: user.profile_picture_path\n            }\n        };\n    } catch (error) {\n        console.error(\"[Auth] signupUser error:\", error);\n        return {\n            success: false,\n            error: \"An error occurred during signup\"\n        };\n    }\n}\n/**\n * Logout the current user\n */ async function logoutUser() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const sessionId = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n        if (sessionId) {\n            await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.deleteSession)(sessionId);\n        }\n        await clearSessionCookie();\n    } catch (error) {\n        console.error(\"[Auth] logoutUser error:\", error);\n    }\n}\n/**\n * Require authentication - throws if not authenticated\n */ async function requireAuth() {\n    const user = await getCurrentUser();\n    if (!user) {\n        throw new Error(\"Unauthorized\");\n    }\n    return user;\n}\n/**\n * Require admin - throws if not admin\n */ async function requireAdmin() {\n    const user = await getCurrentUser();\n    if (!user) {\n        throw new Error(\"Unauthorized\");\n    }\n    if (!user.isAdmin) {\n        throw new Error(\"Forbidden\");\n    }\n    return user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q00sZUFBZXFDO0lBQ3BCLE1BQU1qRCxPQUFPLE1BQU1SO0lBRW5CLElBQUksQ0FBQ1EsTUFBTTtRQUNULE1BQU0sSUFBSWtELE1BQU07SUFDbEI7SUFFQSxPQUFPbEQ7QUFDVDtBQUVBOztDQUVDLEdBQ00sZUFBZW1EO0lBQ3BCLE1BQU1uRCxPQUFPLE1BQU1SO0lBRW5CLElBQUksQ0FBQ1EsTUFBTTtRQUNULE1BQU0sSUFBSWtELE1BQU07SUFDbEI7SUFFQSxJQUFJLENBQUNsRCxLQUFLUSxPQUFPLEVBQUU7UUFDakIsTUFBTSxJQUFJMEMsTUFBTTtJQUNsQjtJQUVBLE9BQU9sRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhlbnRpY2F0aW9uIHV0aWxpdGllc1xuICogSGFuZGxlcyBzZXNzaW9uLWJhc2VkIGF1dGhlbnRpY2F0aW9uIGZvciBQYXlGcmllbmRzXG4gKi9cblxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBnZXRVc2VyQnlJZCwgZ2V0VXNlckJ5RW1haWwsIGdldFNlc3Npb25CeUlkLCBjcmVhdGVTZXNzaW9uLCBkZWxldGVTZXNzaW9uLCBjcmVhdGVVc2VyLCB0eXBlIFVzZXIgfSBmcm9tICcuL3N1cGFiYXNlL2RiJztcblxuY29uc3QgU0VTU0lPTl9DT09LSUVfTkFNRSA9ICdwZl9zZXNzaW9uJztcbmNvbnN0IFNFU1NJT05fRVhQSVJZX0RBWVMgPSAzMDtcbmNvbnN0IFNBTFRfUk9VTkRTID0gMTA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFVzZXIge1xuICBpZDogbnVtYmVyO1xuICBlbWFpbDogc3RyaW5nO1xuICBmdWxsTmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHVibGljSWQ6IHN0cmluZyB8IG51bGw7XG4gIGlzQWRtaW46IGJvb2xlYW47XG4gIHByb2ZpbGVQaWN0dXJlUGF0aDogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRlZCB1c2VyIGZyb20gdGhlIHNlc3Npb24gY29va2llXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IGNvb2tpZVN0b3JlLmdldChTRVNTSU9OX0NPT0tJRV9OQU1FKT8udmFsdWU7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBzZXNzaW9uIGlzIGV4cGlyZWRcbiAgICBpZiAobmV3IERhdGUoc2Vzc2lvbi5leHBpcmVzX2F0KSA8IG5ldyBEYXRlKCkpIHtcbiAgICAgIGF3YWl0IGRlbGV0ZVNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5SWQoc2Vzc2lvbi51c2VyX2lkKTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGZ1bGxOYW1lOiB1c2VyLmZ1bGxfbmFtZSxcbiAgICAgIHB1YmxpY0lkOiB1c2VyLnB1YmxpY19pZCxcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNfYWRtaW4sXG4gICAgICBwcm9maWxlUGljdHVyZVBhdGg6IHVzZXIucHJvZmlsZV9waWN0dXJlX3BhdGgsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gZ2V0Q3VycmVudFVzZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGUgc2Vzc2lvbiB3aXRob3V0IGdldHRpbmcgdGhlIGZ1bGwgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcbiAgY29uc3Qgc2Vzc2lvbklkID0gY29va2llU3RvcmUuZ2V0KFNFU1NJT05fQ09PS0lFX05BTUUpPy52YWx1ZTtcbiAgXG4gIGlmICghc2Vzc2lvbklkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKTtcbiAgXG4gIGlmICghc2Vzc2lvbiB8fCBuZXcgRGF0ZShzZXNzaW9uLmV4cGlyZXNfYXQpIDwgbmV3IERhdGUoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogSGFzaCBhIHBhc3N3b3JkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgU0FMVF9ST1VORFMpO1xufVxuXG4vKipcbiAqIFZlcmlmeSBhIHBhc3N3b3JkIGFnYWluc3QgYSBoYXNoXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNlY3VyZSBzZXNzaW9uIElEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4Jyk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBwdWJsaWMgSUQgZm9yIGEgdXNlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQdWJsaWNJZCgpOiBzdHJpbmcge1xuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDgpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc2Vzc2lvbiBmb3IgYSB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyU2Vzc2lvbih1c2VySWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNlc3Npb25JZCA9IGdlbmVyYXRlU2Vzc2lvbklkKCk7XG4gIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKCk7XG4gIGV4cGlyZXNBdC5zZXREYXRlKGV4cGlyZXNBdC5nZXREYXRlKCkgKyBTRVNTSU9OX0VYUElSWV9EQVlTKTtcbiAgXG4gIGF3YWl0IGNyZWF0ZVNlc3Npb24oe1xuICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgdXNlcklkLFxuICAgIGV4cGlyZXNBdDogZXhwaXJlc0F0LnRvSVNPU3RyaW5nKCksXG4gIH0pO1xuICBcbiAgcmV0dXJuIHNlc3Npb25JZDtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIHNlc3Npb24gY29va2llXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZSgpO1xuICBleHBpcmVzQXQuc2V0RGF0ZShleHBpcmVzQXQuZ2V0RGF0ZSgpICsgU0VTU0lPTl9FWFBJUllfREFZUyk7XG4gIFxuICBjb29raWVTdG9yZS5zZXQoU0VTU0lPTl9DT09LSUVfTkFNRSwgc2Vzc2lvbklkLCB7XG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBleHBpcmVzOiBleHBpcmVzQXQsXG4gICAgcGF0aDogJy8nLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhciB0aGUgc2Vzc2lvbiBjb29raWVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2Vzc2lvbkNvb2tpZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gIGNvb2tpZVN0b3JlLmRlbGV0ZShTRVNTSU9OX0NPT0tJRV9OQU1FKTtcbn1cblxuLyoqXG4gKiBMb2dpbiBhIHVzZXIgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luVXNlcihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHVzZXI/OiBBdXRoVXNlcjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwYXNzd29yZFZhbGlkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmRfaGFzaCk7XG4gICAgXG4gICAgaWYgKCFwYXNzd29yZFZhbGlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjcmVhdGVVc2VyU2Vzc2lvbih1c2VyLmlkKTtcbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLFxuICAgICAgICBwdWJsaWNJZDogdXNlci5wdWJsaWNfaWQsXG4gICAgICAgIGlzQWRtaW46IHVzZXIuaXNfYWRtaW4sXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlUGF0aDogdXNlci5wcm9maWxlX3BpY3R1cmVfcGF0aCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gbG9naW5Vc2VyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgbG9naW4nIH07XG4gIH1cbn1cblxuLyoqXG4gKiBTaWduIHVwIGEgbmV3IHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ251cFVzZXIoXG4gIGVtYWlsOiBzdHJpbmcsXG4gIHBhc3N3b3JkOiBzdHJpbmcsXG4gIGZ1bGxOYW1lPzogc3RyaW5nXG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgdXNlcj86IEF1dGhVc2VyOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsKTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBbiBhY2NvdW50IHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0cycgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcGFzc3dvcmRcbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEhhc2ggcGFzc3dvcmQgYW5kIGNyZWF0ZSB1c2VyXG4gICAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKTtcbiAgICBjb25zdCBwdWJsaWNJZCA9IGdlbmVyYXRlUHVibGljSWQoKTtcbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3JlYXRlVXNlcih7XG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkSGFzaCxcbiAgICAgIGZ1bGxOYW1lLFxuICAgICAgcHVibGljSWQsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHNlc3Npb24gYW5kIHNldCBjb29raWVcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjcmVhdGVVc2VyU2Vzc2lvbih1c2VyLmlkKTtcbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLFxuICAgICAgICBwdWJsaWNJZDogdXNlci5wdWJsaWNfaWQsXG4gICAgICAgIGlzQWRtaW46IHVzZXIuaXNfYWRtaW4sXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlUGF0aDogdXNlci5wcm9maWxlX3BpY3R1cmVfcGF0aCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gc2lnbnVwVXNlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHNpZ251cCcgfTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ291dCB0aGUgY3VycmVudCB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dvdXRVc2VyKCk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IGNvb2tpZVN0b3JlLmdldChTRVNTSU9OX0NPT0tJRV9OQU1FKT8udmFsdWU7XG4gICAgXG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgYXdhaXQgZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQpO1xuICAgIH1cbiAgICBcbiAgICBhd2FpdCBjbGVhclNlc3Npb25Db29raWUoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gbG9nb3V0VXNlciBlcnJvcjonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIC0gdGhyb3dzIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQXV0aCgpOiBQcm9taXNlPEF1dGhVc2VyPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHVzZXI7XG59XG5cbi8qKlxuICogUmVxdWlyZSBhZG1pbiAtIHRocm93cyBpZiBub3QgYWRtaW5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBZG1pbigpOiBQcm9taXNlPEF1dGhVc2VyPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgfVxuICBcbiAgaWYgKCF1c2VyLmlzQWRtaW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvcmJpZGRlbicpO1xuICB9XG4gIFxuICByZXR1cm4gdXNlcjtcbn1cbiJdLCJuYW1lcyI6WyJjb29raWVzIiwiYmNyeXB0IiwiY3J5cHRvIiwiZ2V0VXNlckJ5SWQiLCJnZXRVc2VyQnlFbWFpbCIsImdldFNlc3Npb25CeUlkIiwiY3JlYXRlU2Vzc2lvbiIsImRlbGV0ZVNlc3Npb24iLCJjcmVhdGVVc2VyIiwiU0VTU0lPTl9DT09LSUVfTkFNRSIsIlNFU1NJT05fRVhQSVJZX0RBWVMiLCJTQUxUX1JPVU5EUyIsImdldEN1cnJlbnRVc2VyIiwiY29va2llU3RvcmUiLCJzZXNzaW9uSWQiLCJnZXQiLCJ2YWx1ZSIsInNlc3Npb24iLCJEYXRlIiwiZXhwaXJlc19hdCIsInVzZXIiLCJ1c2VyX2lkIiwiaWQiLCJlbWFpbCIsImZ1bGxOYW1lIiwiZnVsbF9uYW1lIiwicHVibGljSWQiLCJwdWJsaWNfaWQiLCJpc0FkbWluIiwiaXNfYWRtaW4iLCJwcm9maWxlUGljdHVyZVBhdGgiLCJwcm9maWxlX3BpY3R1cmVfcGF0aCIsImVycm9yIiwiY29uc29sZSIsInZhbGlkYXRlU2Vzc2lvbiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlU2Vzc2lvbklkIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImdlbmVyYXRlUHVibGljSWQiLCJjcmVhdGVVc2VyU2Vzc2lvbiIsInVzZXJJZCIsImV4cGlyZXNBdCIsInNldERhdGUiLCJnZXREYXRlIiwidG9JU09TdHJpbmciLCJzZXRTZXNzaW9uQ29va2llIiwic2V0IiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJwcm9jZXNzIiwic2FtZVNpdGUiLCJleHBpcmVzIiwicGF0aCIsImNsZWFyU2Vzc2lvbkNvb2tpZSIsImRlbGV0ZSIsImxvZ2luVXNlciIsInN1Y2Nlc3MiLCJwYXNzd29yZFZhbGlkIiwicGFzc3dvcmRfaGFzaCIsInNpZ251cFVzZXIiLCJleGlzdGluZ1VzZXIiLCJsZW5ndGgiLCJwYXNzd29yZEhhc2giLCJsb2dvdXRVc2VyIiwicmVxdWlyZUF1dGgiLCJFcnJvciIsInJlcXVpcmVBZG1pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/client.ts":
/*!************************************!*\
  !*** ./src/lib/supabase/client.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBrowserClient: () => (/* binding */ createBrowserClient),\n/* harmony export */   createServerClient: () => (/* binding */ createServerClient),\n/* harmony export */   getSupabaseAdmin: () => (/* binding */ getSupabaseAdmin),\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   isAdminConfigured: () => (/* binding */ isAdminConfigured),\n/* harmony export */   isSupabaseConfigured: () => (/* binding */ isSupabaseConfigured)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/**\n * Supabase Client - Server-side\n * \n * This module provides Supabase client instances for server-side use.\n * Use the appropriate client based on your needs:\n * - createServerClient: Uses service role key, bypasses RLS (for API routes)\n * - createBrowserClient: Uses anon key, respects RLS (for client-side)\n */ \n\n\n// Environment variables\nconst supabaseUrl = \"https://mugsmupamjdtawpaawbh.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11Z3NtdXBhbWpkdGF3cGFhd2JoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0OTkzODMsImV4cCI6MjA4NDA3NTM4M30.4nKEmb84DbrjnR-Uml9MLWbyGZpTFSEIvqPbEYeV-P8\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n/**\n * Check if Supabase is properly configured\n */ function isSupabaseConfigured() {\n    return !!(supabaseUrl && supabaseAnonKey);\n}\n/**\n * Check if admin client is available\n */ function isAdminConfigured() {\n    return !!(supabaseUrl && supabaseServiceKey);\n}\n/**\n * Admin Supabase client - bypasses RLS\n * Use this ONLY for admin operations that need to see/modify all data\n * NEVER expose this client to the browser\n */ let adminClient = null;\nfunction getSupabaseAdmin() {\n    if (!adminClient && supabaseUrl && supabaseServiceKey) {\n        adminClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n    }\n    if (!adminClient) {\n        throw new Error(\"Supabase admin client not configured. Check environment variables.\");\n    }\n    return adminClient;\n}\n/**\n * Create a Supabase client for server components\n * This uses cookies for session management\n */ async function createServerClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error(\"Supabase configuration missing\");\n    }\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl, supabaseAnonKey, {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // Ignore errors in server components\n                }\n            }\n        }\n    });\n}\n/**\n * Create a Supabase client for browser/client components\n */ function createBrowserClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error(\"Supabase configuration missing\");\n    }\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createBrowserClient)(supabaseUrl, supabaseAnonKey);\n}\n/**\n * Standard Supabase client - respects RLS (for server-side without cookies)\n */ function getSupabaseClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        return null;\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseAnonKey, {\n        auth: {\n            autoRefreshToken: true,\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlL2NsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7OztDQU9DLEdBRW9FO0FBQ3NEO0FBQ3BGO0FBRXZDLHdCQUF3QjtBQUN4QixNQUFNTSxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFDakUsTUFBTUsscUJBQXFCTCxRQUFRQyxHQUFHLENBQUNLLHlCQUF5QjtBQUVoRTs7Q0FFQyxHQUNNLFNBQVNDO0lBQ2QsT0FBTyxDQUFDLENBQUVSLENBQUFBLGVBQWVJLGVBQWM7QUFDekM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNLO0lBQ2QsT0FBTyxDQUFDLENBQUVULENBQUFBLGVBQWVNLGtCQUFpQjtBQUM1QztBQUVBOzs7O0NBSUMsR0FDRCxJQUFJSSxjQUFxQztBQUVsQyxTQUFTQztJQUNkLElBQUksQ0FBQ0QsZUFBZVYsZUFBZU0sb0JBQW9CO1FBQ3JESSxjQUFjaEIsbUVBQVlBLENBQUNNLGFBQWFNLG9CQUFvQjtZQUMxRE0sTUFBTTtnQkFDSkMsa0JBQWtCO2dCQUNsQkMsZ0JBQWdCO1lBQ2xCO1FBQ0Y7SUFDRjtJQUVBLElBQUksQ0FBQ0osYUFBYTtRQUNoQixNQUFNLElBQUlLLE1BQU07SUFDbEI7SUFFQSxPQUFPTDtBQUNUO0FBRUE7OztDQUdDLEdBQ00sZUFBZWY7SUFDcEIsSUFBSSxDQUFDSyxlQUFlLENBQUNJLGlCQUFpQjtRQUNwQyxNQUFNLElBQUlXLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxjQUFjLE1BQU1qQixxREFBT0E7SUFFakMsT0FBT0gsaUVBQXFCQSxDQUFDSSxhQUFhSSxpQkFBaUI7UUFDekRMLFNBQVM7WUFDUGtCO2dCQUNFLE9BQU9ELFlBQVlDLE1BQU07WUFDM0I7WUFDQUMsUUFBT0MsWUFBa0Y7Z0JBQ3ZGLElBQUk7b0JBQ0ZBLGFBQWFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUUsR0FDNUNQLFlBQVlRLEdBQUcsQ0FBQ0gsTUFBTUMsT0FBT0M7Z0JBRWpDLEVBQUUsT0FBTTtnQkFDTixxQ0FBcUM7Z0JBQ3ZDO1lBQ0Y7UUFDRjtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVMxQjtJQUNkLElBQUksQ0FBQ0csZUFBZSxDQUFDSSxpQkFBaUI7UUFDcEMsTUFBTSxJQUFJVyxNQUFNO0lBQ2xCO0lBRUEsT0FBT2pCLGtFQUFzQkEsQ0FBQ0UsYUFBYUk7QUFDN0M7QUFFQTs7Q0FFQyxHQUNNLFNBQVNxQjtJQUNkLElBQUksQ0FBQ3pCLGVBQWUsQ0FBQ0ksaUJBQWlCO1FBQ3BDLE9BQU87SUFDVDtJQUVBLE9BQU9WLG1FQUFZQSxDQUFDTSxhQUFhSSxpQkFBaUI7UUFDaERRLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvLi9zcmMvbGliL3N1cGFiYXNlL2NsaWVudC50cz8wZjk3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgQ2xpZW50IC0gU2VydmVyLXNpZGVcbiAqIFxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgU3VwYWJhc2UgY2xpZW50IGluc3RhbmNlcyBmb3Igc2VydmVyLXNpZGUgdXNlLlxuICogVXNlIHRoZSBhcHByb3ByaWF0ZSBjbGllbnQgYmFzZWQgb24geW91ciBuZWVkczpcbiAqIC0gY3JlYXRlU2VydmVyQ2xpZW50OiBVc2VzIHNlcnZpY2Ugcm9sZSBrZXksIGJ5cGFzc2VzIFJMUyAoZm9yIEFQSSByb3V0ZXMpXG4gKiAtIGNyZWF0ZUJyb3dzZXJDbGllbnQ6IFVzZXMgYW5vbiBrZXksIHJlc3BlY3RzIFJMUyAoZm9yIGNsaWVudC1zaWRlKVxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCwgU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IGFzIGNyZWF0ZVNTUlNlcnZlckNsaWVudCwgY3JlYXRlQnJvd3NlckNsaWVudCBhcyBjcmVhdGVTU1JCcm93c2VyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3Nzcic7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcblxuLy8gRW52aXJvbm1lbnQgdmFyaWFibGVzXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcblxuLyoqXG4gKiBDaGVjayBpZiBTdXBhYmFzZSBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N1cGFiYXNlQ29uZmlndXJlZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhKHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlQW5vbktleSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYWRtaW4gY2xpZW50IGlzIGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbkNvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIShzdXBhYmFzZVVybCAmJiBzdXBhYmFzZVNlcnZpY2VLZXkpO1xufVxuXG4vKipcbiAqIEFkbWluIFN1cGFiYXNlIGNsaWVudCAtIGJ5cGFzc2VzIFJMU1xuICogVXNlIHRoaXMgT05MWSBmb3IgYWRtaW4gb3BlcmF0aW9ucyB0aGF0IG5lZWQgdG8gc2VlL21vZGlmeSBhbGwgZGF0YVxuICogTkVWRVIgZXhwb3NlIHRoaXMgY2xpZW50IHRvIHRoZSBicm93c2VyXG4gKi9cbmxldCBhZG1pbkNsaWVudDogU3VwYWJhc2VDbGllbnQgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQWRtaW4oKTogU3VwYWJhc2VDbGllbnQge1xuICBpZiAoIWFkbWluQ2xpZW50ICYmIHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlU2VydmljZUtleSkge1xuICAgIGFkbWluQ2xpZW50ID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmICghYWRtaW5DbGllbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGFkbWluIGNsaWVudCBub3QgY29uZmlndXJlZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xuICB9XG4gIFxuICByZXR1cm4gYWRtaW5DbGllbnQ7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgU3VwYWJhc2UgY2xpZW50IGZvciBzZXJ2ZXIgY29tcG9uZW50c1xuICogVGhpcyB1c2VzIGNvb2tpZXMgZm9yIHNlc3Npb24gbWFuYWdlbWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2VydmVyQ2xpZW50KCkge1xuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGNvbmZpZ3VyYXRpb24gbWlzc2luZycpO1xuICB9XG5cbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG5cbiAgcmV0dXJuIGNyZWF0ZVNTUlNlcnZlckNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gICAgY29va2llczoge1xuICAgICAgZ2V0QWxsKCkge1xuICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0QWxsKCk7XG4gICAgICB9LFxuICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldDogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB9W10pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PlxuICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvcnMgaW4gc2VydmVyIGNvbXBvbmVudHNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgZm9yIGJyb3dzZXIvY2xpZW50IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJDbGllbnQoKSB7XG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgY29uZmlndXJhdGlvbiBtaXNzaW5nJyk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlU1NSQnJvd3NlckNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcbn1cblxuLyoqXG4gKiBTdGFuZGFyZCBTdXBhYmFzZSBjbGllbnQgLSByZXNwZWN0cyBSTFMgKGZvciBzZXJ2ZXItc2lkZSB3aXRob3V0IGNvb2tpZXMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBhYmFzZUNsaWVudCgpOiBTdXBhYmFzZUNsaWVudCB8IG51bGwge1xuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gICAgYXV0aDoge1xuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICB9LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjcmVhdGVTU1JTZXJ2ZXJDbGllbnQiLCJjcmVhdGVCcm93c2VyQ2xpZW50IiwiY3JlYXRlU1NSQnJvd3NlckNsaWVudCIsImNvb2tpZXMiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJpc1N1cGFiYXNlQ29uZmlndXJlZCIsImlzQWRtaW5Db25maWd1cmVkIiwiYWRtaW5DbGllbnQiLCJnZXRTdXBhYmFzZUFkbWluIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsIkVycm9yIiwiY29va2llU3RvcmUiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCIsImdldFN1cGFiYXNlQ2xpZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/client.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/db.ts":
/*!********************************!*\
  !*** ./src/lib/supabase/db.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acceptInvite: () => (/* binding */ acceptInvite),\n/* harmony export */   createAgreement: () => (/* binding */ createAgreement),\n/* harmony export */   createGroupTab: () => (/* binding */ createGroupTab),\n/* harmony export */   createInvite: () => (/* binding */ createInvite),\n/* harmony export */   createMessage: () => (/* binding */ createMessage),\n/* harmony export */   createParticipant: () => (/* binding */ createParticipant),\n/* harmony export */   createPayment: () => (/* binding */ createPayment),\n/* harmony export */   createPaymentReport: () => (/* binding */ createPaymentReport),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteExpiredSessions: () => (/* binding */ deleteExpiredSessions),\n/* harmony export */   deleteSession: () => (/* binding */ deleteSession),\n/* harmony export */   getAgreementById: () => (/* binding */ getAgreementById),\n/* harmony export */   getAgreementsByUserId: () => (/* binding */ getAgreementsByUserId),\n/* harmony export */   getGroupTabById: () => (/* binding */ getGroupTabById),\n/* harmony export */   getGroupTabByMagicToken: () => (/* binding */ getGroupTabByMagicToken),\n/* harmony export */   getGroupTabByOwnerToken: () => (/* binding */ getGroupTabByOwnerToken),\n/* harmony export */   getGroupTabsByUserId: () => (/* binding */ getGroupTabsByUserId),\n/* harmony export */   getInviteByToken: () => (/* binding */ getInviteByToken),\n/* harmony export */   getMessagesByUserId: () => (/* binding */ getMessagesByUserId),\n/* harmony export */   getParticipantByGuestToken: () => (/* binding */ getParticipantByGuestToken),\n/* harmony export */   getParticipantById: () => (/* binding */ getParticipantById),\n/* harmony export */   getParticipantsByTabId: () => (/* binding */ getParticipantsByTabId),\n/* harmony export */   getPaymentReportsByTabId: () => (/* binding */ getPaymentReportsByTabId),\n/* harmony export */   getPaymentsByAgreementId: () => (/* binding */ getPaymentsByAgreementId),\n/* harmony export */   getRemoteConfig: () => (/* binding */ getRemoteConfig),\n/* harmony export */   getRemoteConfigByKey: () => (/* binding */ getRemoteConfigByKey),\n/* harmony export */   getSessionById: () => (/* binding */ getSessionById),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserByPublicId: () => (/* binding */ getUserByPublicId),\n/* harmony export */   isSupabaseConfigured: () => (/* reexport safe */ _client__WEBPACK_IMPORTED_MODULE_0__.isSupabaseConfigured),\n/* harmony export */   markAllMessagesAsRead: () => (/* binding */ markAllMessagesAsRead),\n/* harmony export */   markMessageAsRead: () => (/* binding */ markMessageAsRead),\n/* harmony export */   updateAgreement: () => (/* binding */ updateAgreement),\n/* harmony export */   updateGroupTab: () => (/* binding */ updateGroupTab),\n/* harmony export */   updateParticipant: () => (/* binding */ updateParticipant),\n/* harmony export */   updatePaymentReport: () => (/* binding */ updatePaymentReport),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(rsc)/./src/lib/supabase/client.ts\");\n/**\n * Database Abstraction Layer for Supabase\n * \n * This module provides database access functions using Supabase Postgres.\n * All functions use the admin client to bypass RLS for server-side operations.\n */ \n// Re-export configuration check\n\n// =============================================================================\n// USER QUERIES\n// =============================================================================\nasync function getUserById(userId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", userId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getUserById error:\", error);\n    }\n    return data;\n}\nasync function getUserByEmail(email) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"email\", email.toLowerCase()).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getUserByEmail error:\", error);\n    }\n    return data;\n}\nasync function getUserByPublicId(publicId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"public_id\", publicId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getUserByPublicId error:\", error);\n    }\n    return data;\n}\nasync function createUser(user) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").insert({\n        email: user.email.toLowerCase(),\n        password_hash: user.passwordHash,\n        full_name: user.fullName || null,\n        public_id: user.publicId || null,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createUser error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateUser(userId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").update({\n        ...updates,\n        updated_at: new Date().toISOString()\n    }).eq(\"id\", userId).select().single();\n    if (error) {\n        console.error(\"[DB] updateUser error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// SESSION QUERIES\n// =============================================================================\nasync function getSessionById(sessionId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"sessions\").select(\"*\").eq(\"id\", sessionId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getSessionById error:\", error);\n    }\n    return data;\n}\nasync function createSession(session) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"sessions\").insert({\n        id: session.id,\n        user_id: session.userId,\n        created_at: new Date().toISOString(),\n        expires_at: session.expiresAt\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createSession error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function deleteSession(sessionId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"sessions\").delete().eq(\"id\", sessionId);\n    if (error) {\n        console.error(\"[DB] deleteSession error:\", error);\n    }\n}\nasync function deleteExpiredSessions() {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"sessions\").delete().lt(\"expires_at\", new Date().toISOString());\n    if (error) {\n        console.error(\"[DB] deleteExpiredSessions error:\", error);\n    }\n}\n// =============================================================================\n// AGREEMENT QUERIES\n// =============================================================================\nasync function getAgreementById(agreementId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreements\").select(`\n      *,\n      lender:users!agreements_lender_user_id_fkey(id, full_name, email),\n      borrower:users!agreements_borrower_user_id_fkey(id, full_name, email)\n    `).eq(\"id\", agreementId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getAgreementById error:\", error);\n    }\n    return data;\n}\nasync function getAgreementsByUserId(userId, options = {}) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    let query = supabase.from(\"agreements\").select(`\n      *,\n      lender:users!agreements_lender_user_id_fkey(id, full_name, email),\n      borrower:users!agreements_borrower_user_id_fkey(id, full_name, email)\n    `).or(`lender_user_id.eq.${userId},borrower_user_id.eq.${userId}`);\n    if (options.status) {\n        query = query.eq(\"status\", options.status);\n    }\n    query = query.order(\"created_at\", {\n        ascending: false\n    });\n    if (options.limit) {\n        query = query.limit(options.limit);\n    }\n    const { data, error } = await query;\n    if (error) {\n        console.error(\"[DB] getAgreementsByUserId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createAgreement(agreement) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreements\").insert({\n        ...agreement,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createAgreement error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateAgreement(agreementId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreements\").update({\n        ...updates,\n        updated_at: new Date().toISOString()\n    }).eq(\"id\", agreementId).select().single();\n    if (error) {\n        console.error(\"[DB] updateAgreement error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// AGREEMENT INVITE QUERIES\n// =============================================================================\nasync function getInviteByToken(token) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreement_invites\").select(\"*, agreement:agreements(*)\").eq(\"token\", token).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getInviteByToken error:\", error);\n    }\n    return data;\n}\nasync function createInvite(invite) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreement_invites\").insert({\n        agreement_id: invite.agreementId,\n        email: invite.email.toLowerCase(),\n        token: invite.token,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createInvite error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function acceptInvite(token) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreement_invites\").update({\n        accepted_at: new Date().toISOString()\n    }).eq(\"token\", token).select().single();\n    if (error) {\n        console.error(\"[DB] acceptInvite error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// PAYMENT QUERIES\n// =============================================================================\nasync function getPaymentsByAgreementId(agreementId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"payments\").select(\"*, recorded_by:users!payments_recorded_by_user_id_fkey(id, full_name, email)\").eq(\"agreement_id\", agreementId).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) {\n        console.error(\"[DB] getPaymentsByAgreementId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createPayment(payment) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"payments\").insert({\n        ...payment,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createPayment error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// GROUP TAB QUERIES\n// =============================================================================\nasync function getGroupTabById(tabId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").select(\"*, creator:users!group_tabs_creator_user_id_fkey(id, full_name, email)\").eq(\"id\", tabId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getGroupTabById error:\", error);\n    }\n    return data;\n}\nasync function getGroupTabByMagicToken(magicToken) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").select(\"*, creator:users!group_tabs_creator_user_id_fkey(id, full_name, email)\").eq(\"magic_token\", magicToken).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getGroupTabByMagicToken error:\", error);\n    }\n    return data;\n}\nasync function getGroupTabByOwnerToken(ownerToken) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").select(\"*, creator:users!group_tabs_creator_user_id_fkey(id, full_name, email)\").eq(\"owner_token\", ownerToken).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getGroupTabByOwnerToken error:\", error);\n    }\n    return data;\n}\nasync function getGroupTabsByUserId(userId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    // Get tabs where user is creator\n    const { data: createdTabs, error: createdError } = await supabase.from(\"group_tabs\").select(\"*\").eq(\"creator_user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    // Get tabs where user is participant\n    const { data: participantData, error: participantError } = await supabase.from(\"group_tab_participants\").select(\"group_tab_id\").eq(\"user_id\", userId);\n    if (createdError || participantError) {\n        console.error(\"[DB] getGroupTabsByUserId error:\", createdError || participantError);\n        return [];\n    }\n    const participantTabIds = (participantData || []).map((p)=>p.group_tab_id);\n    if (participantTabIds.length > 0) {\n        const { data: participatedTabs } = await supabase.from(\"group_tabs\").select(\"*\").in(\"id\", participantTabIds).not(\"creator_user_id\", \"eq\", userId);\n        return [\n            ...createdTabs || [],\n            ...participatedTabs || []\n        ];\n    }\n    return createdTabs || [];\n}\nasync function createGroupTab(tab) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").insert({\n        ...tab,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createGroupTab error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateGroupTab(tabId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").update({\n        ...updates,\n        updated_at: new Date().toISOString()\n    }).eq(\"id\", tabId).select().single();\n    if (error) {\n        console.error(\"[DB] updateGroupTab error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// GROUP TAB PARTICIPANT QUERIES\n// =============================================================================\nasync function getParticipantsByTabId(tabId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").select(\"*, user:users(id, full_name, email)\").eq(\"group_tab_id\", tabId).order(\"joined_at\", {\n        ascending: true\n    });\n    if (error) {\n        console.error(\"[DB] getParticipantsByTabId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function getParticipantById(participantId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").select(\"*, user:users(id, full_name, email)\").eq(\"id\", participantId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getParticipantById error:\", error);\n    }\n    return data;\n}\nasync function getParticipantByGuestToken(guestToken) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").select(\"*, group_tab:group_tabs(*)\").eq(\"guest_session_token\", guestToken).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getParticipantByGuestToken error:\", error);\n    }\n    return data;\n}\nasync function createParticipant(participant) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").insert({\n        ...participant,\n        joined_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createParticipant error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateParticipant(participantId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").update(updates).eq(\"id\", participantId).select().single();\n    if (error) {\n        console.error(\"[DB] updateParticipant error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// GROUP TAB PAYMENT REPORTS\n// =============================================================================\nasync function getPaymentReportsByTabId(tabId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_payment_reports\").select(\"*, participant:group_tab_participants(id, guest_name, user:users(id, full_name))\").eq(\"group_tab_id\", tabId).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) {\n        console.error(\"[DB] getPaymentReportsByTabId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createPaymentReport(report) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_payment_reports\").insert({\n        ...report,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createPaymentReport error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updatePaymentReport(reportId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_payment_reports\").update(updates).eq(\"id\", reportId).select().single();\n    if (error) {\n        console.error(\"[DB] updatePaymentReport error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// MESSAGES\n// =============================================================================\nasync function getMessagesByUserId(userId, options = {}) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    let query = supabase.from(\"messages\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    if (options.unreadOnly) {\n        query = query.is(\"read_at\", null);\n    }\n    if (options.limit) {\n        query = query.limit(options.limit);\n    }\n    const { data, error } = await query;\n    if (error) {\n        console.error(\"[DB] getMessagesByUserId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createMessage(message) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"messages\").insert({\n        ...message,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createMessage error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function markMessageAsRead(messageId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"messages\").update({\n        read_at: new Date().toISOString()\n    }).eq(\"id\", messageId);\n    if (error) {\n        console.error(\"[DB] markMessageAsRead error:\", error);\n    }\n}\nasync function markAllMessagesAsRead(userId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"messages\").update({\n        read_at: new Date().toISOString()\n    }).eq(\"user_id\", userId).is(\"read_at\", null);\n    if (error) {\n        console.error(\"[DB] markAllMessagesAsRead error:\", error);\n    }\n}\n// =============================================================================\n// REMOTE CONFIG\n// =============================================================================\nasync function getRemoteConfig() {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"remote_config\").select(\"*\").order(\"key\");\n    if (error) {\n        console.error(\"[DB] getRemoteConfig error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function getRemoteConfigByKey(key) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"remote_config\").select(\"*\").eq(\"key\", key).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getRemoteConfigByKey error:\", error);\n    }\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxRQUFRTixLQUFLLENBQUMscUNBQXFDQTtJQUNyRDtBQUNGO0FBRUEsZ0ZBQWdGO0FBQ2hGLGdCQUFnQjtBQUNoQixnRkFBZ0Y7QUFFekUsZUFBZTJHO0lBQ3BCLE1BQU03RyxXQUFXSix5REFBZ0JBO0lBQ2pDLE1BQU0sRUFBRUssSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNRixTQUMzQkcsSUFBSSxDQUFDLGlCQUNMQyxNQUFNLENBQUMsS0FDUDRDLEtBQUssQ0FBQztJQUVULElBQUk5QyxPQUFPO1FBQ1RNLFFBQVFOLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU8sRUFBRTtJQUNYO0lBQ0EsT0FBT0QsUUFBUSxFQUFFO0FBQ25CO0FBRU8sZUFBZTZHLHFCQUFxQkMsR0FBVztJQUNwRCxNQUFNL0csV0FBV0oseURBQWdCQTtJQUNqQyxNQUFNLEVBQUVLLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUYsU0FDM0JHLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxPQUFPMEcsS0FDVnpHLE1BQU07SUFFVCxJQUFJSixTQUFTQSxNQUFNSyxJQUFJLEtBQUssWUFBWTtRQUN0Q0MsUUFBUU4sS0FBSyxDQUFDLG9DQUFvQ0E7SUFDcEQ7SUFDQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvLi9zcmMvbGliL3N1cGFiYXNlL2RiLnRzP2MyNDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXRhYmFzZSBBYnN0cmFjdGlvbiBMYXllciBmb3IgU3VwYWJhc2VcbiAqIFxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgZGF0YWJhc2UgYWNjZXNzIGZ1bmN0aW9ucyB1c2luZyBTdXBhYmFzZSBQb3N0Z3Jlcy5cbiAqIEFsbCBmdW5jdGlvbnMgdXNlIHRoZSBhZG1pbiBjbGllbnQgdG8gYnlwYXNzIFJMUyBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucy5cbiAqL1xuXG5pbXBvcnQgeyBnZXRTdXBhYmFzZUFkbWluLCBpc1N1cGFiYXNlQ29uZmlndXJlZCB9IGZyb20gJy4vY2xpZW50JztcblxuLy8gUmUtZXhwb3J0IGNvbmZpZ3VyYXRpb24gY2hlY2tcbmV4cG9ydCB7IGlzU3VwYWJhc2VDb25maWd1cmVkIH07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUWVBFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmRfaGFzaDogc3RyaW5nO1xuICBmdWxsX25hbWU6IHN0cmluZyB8IG51bGw7XG4gIHB1YmxpY19pZDogc3RyaW5nIHwgbnVsbDtcbiAgcGhvbmVfbnVtYmVyOiBzdHJpbmcgfCBudWxsO1xuICBwcm9maWxlX3BpY3R1cmVfcGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgdGltZXpvbmU6IHN0cmluZyB8IG51bGw7XG4gIGlzX2FkbWluOiBib29sZWFuO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl9pZDogbnVtYmVyO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIGV4cGlyZXNfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZ3JlZW1lbnQge1xuICBpZDogbnVtYmVyO1xuICBsZW5kZXJfdXNlcl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgbGVuZGVyX25hbWU6IHN0cmluZztcbiAgYm9ycm93ZXJfdXNlcl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgYm9ycm93ZXJfZW1haWw6IHN0cmluZztcbiAgZnJpZW5kX2ZpcnN0X25hbWU6IHN0cmluZyB8IG51bGw7XG4gIGRpcmVjdGlvbjogJ2xlbmQnIHwgJ2JvcnJvdyc7XG4gIHJlcGF5bWVudF90eXBlOiAnb25lX3RpbWUnIHwgJ2luc3RhbGxtZW50cyc7XG4gIGFtb3VudF9jZW50czogbnVtYmVyO1xuICBpbnRlcmVzdF9yYXRlOiBudW1iZXIgfCBudWxsO1xuICBpbnN0YWxsbWVudF9jb3VudDogbnVtYmVyIHwgbnVsbDtcbiAgcGF5bWVudF9mcmVxdWVuY3k6IHN0cmluZyB8IG51bGw7XG4gIGR1ZV9kYXRlOiBzdHJpbmc7XG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ2FjdGl2ZScgfCAnc2V0dGxlZCcgfCAnY2FuY2VsbGVkJztcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG4gIGhhc19yZXBheW1lbnRfaXNzdWU6IGJvb2xlYW47XG4gIGNhbGNfdmVyc2lvbjogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIGxlbmRlcj86IFBpY2s8VXNlciwgJ2lkJyB8ICdmdWxsX25hbWUnIHwgJ2VtYWlsJz47XG4gIGJvcnJvd2VyPzogUGljazxVc2VyLCAnaWQnIHwgJ2Z1bGxfbmFtZScgfCAnZW1haWwnPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZ3JlZW1lbnRJbnZpdGUge1xuICBpZDogbnVtYmVyO1xuICBhZ3JlZW1lbnRfaWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgdG9rZW46IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBhY2NlcHRlZF9hdDogc3RyaW5nIHwgbnVsbDtcbiAgYWdyZWVtZW50PzogQWdyZWVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnQge1xuICBpZDogbnVtYmVyO1xuICBhZ3JlZW1lbnRfaWQ6IG51bWJlcjtcbiAgcmVjb3JkZWRfYnlfdXNlcl9pZDogbnVtYmVyO1xuICBhbW91bnRfY2VudHM6IG51bWJlcjtcbiAgbWV0aG9kOiBzdHJpbmcgfCBudWxsO1xuICBub3RlOiBzdHJpbmcgfCBudWxsO1xuICBzdGF0dXM6IHN0cmluZztcbiAgcHJvb2ZfZmlsZV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHJlY29yZGVkX2J5PzogUGljazxVc2VyLCAnaWQnIHwgJ2Z1bGxfbmFtZScgfCAnZW1haWwnPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcm91cFRhYiB7XG4gIGlkOiBudW1iZXI7XG4gIGNyZWF0b3JfdXNlcl9pZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuICB0YWJfdHlwZTogJ29uZV9iaWxsJyB8ICdtdWx0aV9iaWxsJztcbiAgdGVtcGxhdGU6IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1czogJ29wZW4nIHwgJ2Nsb3NlZCcgfCAnc2V0dGxlZCc7XG4gIHRvdGFsX2Ftb3VudF9jZW50czogbnVtYmVyIHwgbnVsbDtcbiAgc3BsaXRfbW9kZTogc3RyaW5nO1xuICBleHBlY3RlZF9wYXlfcmF0ZTogbnVtYmVyO1xuICBzZWF0X2NvdW50OiBudW1iZXIgfCBudWxsO1xuICBwZW9wbGVfY291bnQ6IG51bWJlcjtcbiAgcmVjZWlwdF9maWxlX3BhdGg6IHN0cmluZyB8IG51bGw7XG4gIHBhaWRfdXBfY2VudHM6IG51bWJlcjtcbiAgaG9zdF9vdmVycGFpZF9jZW50czogbnVtYmVyO1xuICB0b3RhbF9yYWlzZWRfY2VudHM6IG51bWJlcjtcbiAgcHJvb2ZfcmVxdWlyZWQ6IHN0cmluZztcbiAgbWFnaWNfdG9rZW46IHN0cmluZztcbiAgb3duZXJfdG9rZW46IHN0cmluZyB8IG51bGw7XG4gIGludml0ZV9jb2RlOiBzdHJpbmcgfCBudWxsO1xuICBtYW5hZ2VfY29kZTogc3RyaW5nIHwgbnVsbDtcbiAgZXZlbnRfZGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgLy8gR2lmdC1zcGVjaWZpYyBmaWVsZHNcbiAgZ2lmdF9tb2RlOiBzdHJpbmcgfCBudWxsO1xuICBncm91cF9naWZ0X21vZGU6IHN0cmluZyB8IG51bGw7XG4gIHJlY2lwaWVudF9uYW1lOiBzdHJpbmcgfCBudWxsO1xuICBhYm91dF90ZXh0OiBzdHJpbmcgfCBudWxsO1xuICBhYm91dF9pbWFnZV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICBhYm91dF9saW5rOiBzdHJpbmcgfCBudWxsO1xuICBpc19yYWlzaW5nX21vbmV5X29ubHk6IGJvb2xlYW47XG4gIGFtb3VudF90YXJnZXQ6IG51bWJlciB8IG51bGw7XG4gIGNvbnRyaWJ1dG9yX2NvdW50OiBudW1iZXIgfCBudWxsO1xuICByYWlzaW5nX2Zvcl90ZXh0OiBzdHJpbmcgfCBudWxsO1xuICByYWlzaW5nX2Zvcl9pbWFnZV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICByYWlzaW5nX2Zvcl9saW5rOiBzdHJpbmcgfCBudWxsO1xuICBpc19vcGVuX3BvdDogYm9vbGVhbjtcbiAgcGF5bWVudF9tZXRob2RzX2pzb246IHN0cmluZyB8IG51bGw7XG4gIG9yZ2FuaXplcl9jb250cmlidXRpb246IG51bWJlciB8IG51bGw7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xuICBjbG9zZWRfYXQ6IHN0cmluZyB8IG51bGw7XG4gIGxhc3RfcGF5bWVudF9hdD86IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0b3I/OiBQaWNrPFVzZXIsICdpZCcgfCAnZnVsbF9uYW1lJyB8ICdlbWFpbCc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwVGFiUGFydGljaXBhbnQge1xuICBpZDogbnVtYmVyO1xuICBncm91cF90YWJfaWQ6IG51bWJlcjtcbiAgdXNlcl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgZ3Vlc3RfbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgZ3Vlc3Rfc2Vzc2lvbl90b2tlbjogc3RyaW5nIHwgbnVsbDtcbiAgcm9sZTogc3RyaW5nO1xuICBpc19tZW1iZXI6IGJvb2xlYW47XG4gIGhpZGVfbmFtZTogYm9vbGVhbjtcbiAgc2VhdHNfY2xhaW1lZDogbnVtYmVyO1xuICB0aWVyX25hbWU6IHN0cmluZyB8IG51bGw7XG4gIHRpZXJfbXVsdGlwbGllcjogbnVtYmVyO1xuICB0aWVyX2lkOiBudW1iZXIgfCBudWxsO1xuICBwcmljZV9ncm91cF9pZDogbnVtYmVyIHwgbnVsbDtcbiAgY3VzdG9tX2Ftb3VudF9jZW50czogbnVtYmVyIHwgbnVsbDtcbiAgZmFpcl9zaGFyZV9jZW50czogbnVtYmVyIHwgbnVsbDtcbiAgcmVtYWluaW5nX2NlbnRzOiBudW1iZXIgfCBudWxsO1xuICB0b3RhbF9wYWlkX2NlbnRzOiBudW1iZXI7XG4gIGpvaW5lZF9hdDogc3RyaW5nO1xuICB1c2VyPzogUGljazxVc2VyLCAnaWQnIHwgJ2Z1bGxfbmFtZScgfCAnZW1haWwnPjtcbiAgZ3JvdXBfdGFiPzogR3JvdXBUYWI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXBUYWJQYXltZW50UmVwb3J0IHtcbiAgaWQ6IG51bWJlcjtcbiAgZ3JvdXBfdGFiX2lkOiBudW1iZXI7XG4gIHBhcnRpY2lwYW50X2lkOiBudW1iZXI7XG4gIGFtb3VudF9jZW50czogbnVtYmVyO1xuICBtZXRob2Q6IHN0cmluZyB8IG51bGw7XG4gIHByb29mX2ZpbGVfcGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgcmV2aWV3ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG4gIHBhcnRpY2lwYW50PzogR3JvdXBUYWJQYXJ0aWNpcGFudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IG51bWJlcjtcbiAgdXNlcl9pZDogbnVtYmVyO1xuICBhZ3JlZW1lbnRfaWQ6IG51bWJlciB8IG51bGw7XG4gIHRhYl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgc3ViamVjdDogc3RyaW5nO1xuICBib2R5OiBzdHJpbmc7XG4gIGV2ZW50X3R5cGU6IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgcmVhZF9hdDogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZW1vdGVDb25maWcge1xuICBrZXk6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgdHlwZTogJ2Jvb2xlYW4nIHwgJ3N0cmluZycgfCAnanNvbicgfCAnbnVtYmVyJztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVNFUiBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5SWQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCd1c2VycycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0VXNlckJ5SWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ2VtYWlsJywgZW1haWwudG9Mb3dlckNhc2UoKSlcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0VXNlckJ5RW1haWwgZXJyb3I6JywgZXJyb3IpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5UHVibGljSWQocHVibGljSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ3B1YmxpY19pZCcsIHB1YmxpY0lkKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRVc2VyQnlQdWJsaWNJZCBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXI6IHtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmRIYXNoOiBzdHJpbmc7XG4gIGZ1bGxOYW1lPzogc3RyaW5nO1xuICBwdWJsaWNJZD86IHN0cmluZztcbn0pOiBQcm9taXNlPFVzZXI+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuaW5zZXJ0KHtcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICBwYXNzd29yZF9oYXNoOiB1c2VyLnBhc3N3b3JkSGFzaCxcbiAgICAgIGZ1bGxfbmFtZTogdXNlci5mdWxsTmFtZSB8fCBudWxsLFxuICAgICAgcHVibGljX2lkOiB1c2VyLnB1YmxpY0lkIHx8IG51bGwsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZVVzZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlcih1c2VySWQ6IG51bWJlciwgdXBkYXRlczogUGFydGlhbDxPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZF9hdCc+Pik6IFByb21pc2U8VXNlcj4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgndXNlcnMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgLi4udXBkYXRlcyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5lcSgnaWQnLCB1c2VySWQpXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSB1cGRhdGVVc2VyIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNFU1NJT04gUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25CeUlkKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uIHwgbnVsbD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldFNlc3Npb25CeUlkIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24oc2Vzc2lvbjoge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IG51bWJlcjtcbiAgZXhwaXJlc0F0OiBzdHJpbmc7XG59KTogUHJvbWlzZTxTZXNzaW9uPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdzZXNzaW9ucycpXG4gICAgLmluc2VydCh7XG4gICAgICBpZDogc2Vzc2lvbi5pZCxcbiAgICAgIHVzZXJfaWQ6IHNlc3Npb24udXNlcklkLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZXhwaXJlc19hdDogc2Vzc2lvbi5leHBpcmVzQXQsXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZVNlc3Npb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBkZWxldGVTZXNzaW9uIGVycm9yOicsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRXhwaXJlZFNlc3Npb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5sdCgnZXhwaXJlc19hdCcsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGRlbGV0ZUV4cGlyZWRTZXNzaW9ucyBlcnJvcjonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFHUkVFTUVOVCBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWdyZWVtZW50QnlJZChhZ3JlZW1lbnRJZDogbnVtYmVyKTogUHJvbWlzZTxBZ3JlZW1lbnQgfCBudWxsPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdhZ3JlZW1lbnRzJylcbiAgICAuc2VsZWN0KGBcbiAgICAgICosXG4gICAgICBsZW5kZXI6dXNlcnMhYWdyZWVtZW50c19sZW5kZXJfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKSxcbiAgICAgIGJvcnJvd2VyOnVzZXJzIWFncmVlbWVudHNfYm9ycm93ZXJfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKVxuICAgIGApXG4gICAgLmVxKCdpZCcsIGFncmVlbWVudElkKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRBZ3JlZW1lbnRCeUlkIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFncmVlbWVudHNCeVVzZXJJZChcbiAgdXNlcklkOiBudW1iZXIsXG4gIG9wdGlvbnM6IHsgc3RhdHVzPzogc3RyaW5nOyBsaW1pdD86IG51bWJlciB9ID0ge31cbik6IFByb21pc2U8QWdyZWVtZW50W10+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FncmVlbWVudHMnKVxuICAgIC5zZWxlY3QoYFxuICAgICAgKixcbiAgICAgIGxlbmRlcjp1c2VycyFhZ3JlZW1lbnRzX2xlbmRlcl91c2VyX2lkX2ZrZXkoaWQsIGZ1bGxfbmFtZSwgZW1haWwpLFxuICAgICAgYm9ycm93ZXI6dXNlcnMhYWdyZWVtZW50c19ib3Jyb3dlcl91c2VyX2lkX2ZrZXkoaWQsIGZ1bGxfbmFtZSwgZW1haWwpXG4gICAgYClcbiAgICAub3IoYGxlbmRlcl91c2VyX2lkLmVxLiR7dXNlcklkfSxib3Jyb3dlcl91c2VyX2lkLmVxLiR7dXNlcklkfWApO1xuICBcbiAgaWYgKG9wdGlvbnMuc3RhdHVzKSB7XG4gICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgb3B0aW9ucy5zdGF0dXMpO1xuICB9XG4gIFxuICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICBcbiAgaWYgKG9wdGlvbnMubGltaXQpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KG9wdGlvbnMubGltaXQpO1xuICB9XG4gIFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0QWdyZWVtZW50c0J5VXNlcklkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIGRhdGEgfHwgW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBZ3JlZW1lbnQoYWdyZWVtZW50OiBPbWl0PEFncmVlbWVudCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0JyB8ICdsZW5kZXInIHwgJ2JvcnJvd2VyJz4pOiBQcm9taXNlPEFncmVlbWVudD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWdyZWVtZW50cycpXG4gICAgLmluc2VydCh7XG4gICAgICAuLi5hZ3JlZW1lbnQsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZUFncmVlbWVudCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBZ3JlZW1lbnQoXG4gIGFncmVlbWVudElkOiBudW1iZXIsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8T21pdDxBZ3JlZW1lbnQsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAnbGVuZGVyJyB8ICdib3Jyb3dlcic+PlxuKTogUHJvbWlzZTxBZ3JlZW1lbnQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FncmVlbWVudHMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgLi4udXBkYXRlcyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5lcSgnaWQnLCBhZ3JlZW1lbnRJZClcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIHVwZGF0ZUFncmVlbWVudCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBR1JFRU1FTlQgSU5WSVRFIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZpdGVCeVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEFncmVlbWVudEludml0ZSB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FncmVlbWVudF9pbnZpdGVzJylcbiAgICAuc2VsZWN0KCcqLCBhZ3JlZW1lbnQ6YWdyZWVtZW50cygqKScpXG4gICAgLmVxKCd0b2tlbicsIHRva2VuKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRJbnZpdGVCeVRva2VuIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUludml0ZShpbnZpdGU6IHtcbiAgYWdyZWVtZW50SWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgdG9rZW46IHN0cmluZztcbn0pOiBQcm9taXNlPEFncmVlbWVudEludml0ZT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWdyZWVtZW50X2ludml0ZXMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgYWdyZWVtZW50X2lkOiBpbnZpdGUuYWdyZWVtZW50SWQsXG4gICAgICBlbWFpbDogaW52aXRlLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICB0b2tlbjogaW52aXRlLnRva2VuLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBjcmVhdGVJbnZpdGUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWNjZXB0SW52aXRlKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEFncmVlbWVudEludml0ZT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWdyZWVtZW50X2ludml0ZXMnKVxuICAgIC51cGRhdGUoeyBhY2NlcHRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgLmVxKCd0b2tlbicsIHRva2VuKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gYWNjZXB0SW52aXRlIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBBWU1FTlQgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRzQnlBZ3JlZW1lbnRJZChhZ3JlZW1lbnRJZDogbnVtYmVyKTogUHJvbWlzZTxQYXltZW50W10+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3BheW1lbnRzJylcbiAgICAuc2VsZWN0KCcqLCByZWNvcmRlZF9ieTp1c2VycyFwYXltZW50c19yZWNvcmRlZF9ieV91c2VyX2lkX2ZrZXkoaWQsIGZ1bGxfbmFtZSwgZW1haWwpJylcbiAgICAuZXEoJ2FncmVlbWVudF9pZCcsIGFncmVlbWVudElkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0UGF5bWVudHNCeUFncmVlbWVudElkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIGRhdGEgfHwgW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQYXltZW50KHBheW1lbnQ6IE9taXQ8UGF5bWVudCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICdyZWNvcmRlZF9ieSc+KTogUHJvbWlzZTxQYXltZW50PiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwYXltZW50cycpXG4gICAgLmluc2VydCh7XG4gICAgICAuLi5wYXltZW50LFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBjcmVhdGVQYXltZW50IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdST1VQIFRBQiBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBUYWJCeUlkKHRhYklkOiBudW1iZXIpOiBQcm9taXNlPEdyb3VwVGFiIHwgbnVsbD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLnNlbGVjdCgnKiwgY3JlYXRvcjp1c2VycyFncm91cF90YWJzX2NyZWF0b3JfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKScpXG4gICAgLmVxKCdpZCcsIHRhYklkKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRHcm91cFRhYkJ5SWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBUYWJCeU1hZ2ljVG9rZW4obWFnaWNUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxHcm91cFRhYiB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYnMnKVxuICAgIC5zZWxlY3QoJyosIGNyZWF0b3I6dXNlcnMhZ3JvdXBfdGFic19jcmVhdG9yX3VzZXJfaWRfZmtleShpZCwgZnVsbF9uYW1lLCBlbWFpbCknKVxuICAgIC5lcSgnbWFnaWNfdG9rZW4nLCBtYWdpY1Rva2VuKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRHcm91cFRhYkJ5TWFnaWNUb2tlbiBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHcm91cFRhYkJ5T3duZXJUb2tlbihvd25lclRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEdyb3VwVGFiIHwgbnVsbD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLnNlbGVjdCgnKiwgY3JlYXRvcjp1c2VycyFncm91cF90YWJzX2NyZWF0b3JfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKScpXG4gICAgLmVxKCdvd25lcl90b2tlbicsIG93bmVyVG9rZW4pXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldEdyb3VwVGFiQnlPd25lclRva2VuIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEdyb3VwVGFic0J5VXNlcklkKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxHcm91cFRhYltdPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBcbiAgLy8gR2V0IHRhYnMgd2hlcmUgdXNlciBpcyBjcmVhdG9yXG4gIGNvbnN0IHsgZGF0YTogY3JlYXRlZFRhYnMsIGVycm9yOiBjcmVhdGVkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYnMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnY3JlYXRvcl91c2VyX2lkJywgdXNlcklkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgXG4gIC8vIEdldCB0YWJzIHdoZXJlIHVzZXIgaXMgcGFydGljaXBhbnRcbiAgY29uc3QgeyBkYXRhOiBwYXJ0aWNpcGFudERhdGEsIGVycm9yOiBwYXJ0aWNpcGFudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdncm91cF90YWJfcGFydGljaXBhbnRzJylcbiAgICAuc2VsZWN0KCdncm91cF90YWJfaWQnKVxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG4gIFxuICBpZiAoY3JlYXRlZEVycm9yIHx8IHBhcnRpY2lwYW50RXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldEdyb3VwVGFic0J5VXNlcklkIGVycm9yOicsIGNyZWF0ZWRFcnJvciB8fCBwYXJ0aWNpcGFudEVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIGNvbnN0IHBhcnRpY2lwYW50VGFiSWRzID0gKHBhcnRpY2lwYW50RGF0YSB8fCBbXSkubWFwKHAgPT4gcC5ncm91cF90YWJfaWQpO1xuICBcbiAgaWYgKHBhcnRpY2lwYW50VGFiSWRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB7IGRhdGE6IHBhcnRpY2lwYXRlZFRhYnMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5pbignaWQnLCBwYXJ0aWNpcGFudFRhYklkcylcbiAgICAgIC5ub3QoJ2NyZWF0b3JfdXNlcl9pZCcsICdlcScsIHVzZXJJZCk7XG4gICAgXG4gICAgcmV0dXJuIFsuLi4oY3JlYXRlZFRhYnMgfHwgW10pLCAuLi4ocGFydGljaXBhdGVkVGFicyB8fCBbXSldO1xuICB9XG4gIFxuICByZXR1cm4gY3JlYXRlZFRhYnMgfHwgW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVHcm91cFRhYih0YWI6IE9taXQ8R3JvdXBUYWIsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCcgfCAnY3JlYXRvcic+KTogUHJvbWlzZTxHcm91cFRhYj4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLmluc2VydCh7XG4gICAgICAuLi50YWIsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZUdyb3VwVGFiIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUdyb3VwVGFiKFxuICB0YWJJZDogbnVtYmVyLFxuICB1cGRhdGVzOiBQYXJ0aWFsPE9taXQ8R3JvdXBUYWIsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAnY3JlYXRvcic+PlxuKTogUHJvbWlzZTxHcm91cFRhYj4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLnVwZGF0ZSh7XG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLmVxKCdpZCcsIHRhYklkKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gdXBkYXRlR3JvdXBUYWIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR1JPVVAgVEFCIFBBUlRJQ0lQQU5UIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXJ0aWNpcGFudHNCeVRhYklkKHRhYklkOiBudW1iZXIpOiBQcm9taXNlPEdyb3VwVGFiUGFydGljaXBhbnRbXT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFiX3BhcnRpY2lwYW50cycpXG4gICAgLnNlbGVjdCgnKiwgdXNlcjp1c2VycyhpZCwgZnVsbF9uYW1lLCBlbWFpbCknKVxuICAgIC5lcSgnZ3JvdXBfdGFiX2lkJywgdGFiSWQpXG4gICAgLm9yZGVyKCdqb2luZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0UGFydGljaXBhbnRzQnlUYWJJZCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFydGljaXBhbnRCeUlkKHBhcnRpY2lwYW50SWQ6IG51bWJlcik6IFByb21pc2U8R3JvdXBUYWJQYXJ0aWNpcGFudCB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXJ0aWNpcGFudHMnKVxuICAgIC5zZWxlY3QoJyosIHVzZXI6dXNlcnMoaWQsIGZ1bGxfbmFtZSwgZW1haWwpJylcbiAgICAuZXEoJ2lkJywgcGFydGljaXBhbnRJZClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0UGFydGljaXBhbnRCeUlkIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhcnRpY2lwYW50QnlHdWVzdFRva2VuKGd1ZXN0VG9rZW46IHN0cmluZyk6IFByb21pc2U8R3JvdXBUYWJQYXJ0aWNpcGFudCB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXJ0aWNpcGFudHMnKVxuICAgIC5zZWxlY3QoJyosIGdyb3VwX3RhYjpncm91cF90YWJzKCopJylcbiAgICAuZXEoJ2d1ZXN0X3Nlc3Npb25fdG9rZW4nLCBndWVzdFRva2VuKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRQYXJ0aWNpcGFudEJ5R3Vlc3RUb2tlbiBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudDogT21pdDxHcm91cFRhYlBhcnRpY2lwYW50LCAnaWQnIHwgJ2pvaW5lZF9hdCcgfCAndXNlcicgfCAnZ3JvdXBfdGFiJz4pOiBQcm9taXNlPEdyb3VwVGFiUGFydGljaXBhbnQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXJ0aWNpcGFudHMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICBqb2luZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gY3JlYXRlUGFydGljaXBhbnQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGFydGljaXBhbnQoXG4gIHBhcnRpY2lwYW50SWQ6IG51bWJlcixcbiAgdXBkYXRlczogUGFydGlhbDxPbWl0PEdyb3VwVGFiUGFydGljaXBhbnQsICdpZCcgfCAnam9pbmVkX2F0JyB8ICd1c2VyJyB8ICdncm91cF90YWInPj5cbik6IFByb21pc2U8R3JvdXBUYWJQYXJ0aWNpcGFudD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFiX3BhcnRpY2lwYW50cycpXG4gICAgLnVwZGF0ZSh1cGRhdGVzKVxuICAgIC5lcSgnaWQnLCBwYXJ0aWNpcGFudElkKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gdXBkYXRlUGFydGljaXBhbnQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR1JPVVAgVEFCIFBBWU1FTlQgUkVQT1JUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRSZXBvcnRzQnlUYWJJZCh0YWJJZDogbnVtYmVyKTogUHJvbWlzZTxHcm91cFRhYlBheW1lbnRSZXBvcnRbXT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFiX3BheW1lbnRfcmVwb3J0cycpXG4gICAgLnNlbGVjdCgnKiwgcGFydGljaXBhbnQ6Z3JvdXBfdGFiX3BhcnRpY2lwYW50cyhpZCwgZ3Vlc3RfbmFtZSwgdXNlcjp1c2VycyhpZCwgZnVsbF9uYW1lKSknKVxuICAgIC5lcSgnZ3JvdXBfdGFiX2lkJywgdGFiSWQpXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRQYXltZW50UmVwb3J0c0J5VGFiSWQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBheW1lbnRSZXBvcnQocmVwb3J0OiBPbWl0PEdyb3VwVGFiUGF5bWVudFJlcG9ydCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICdwYXJ0aWNpcGFudCc+KTogUHJvbWlzZTxHcm91cFRhYlBheW1lbnRSZXBvcnQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXltZW50X3JlcG9ydHMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgLi4ucmVwb3J0LFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBjcmVhdGVQYXltZW50UmVwb3J0IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBheW1lbnRSZXBvcnQoXG4gIHJlcG9ydElkOiBudW1iZXIsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8T21pdDxHcm91cFRhYlBheW1lbnRSZXBvcnQsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAncGFydGljaXBhbnQnPj5cbik6IFByb21pc2U8R3JvdXBUYWJQYXltZW50UmVwb3J0PiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdncm91cF90YWJfcGF5bWVudF9yZXBvcnRzJylcbiAgICAudXBkYXRlKHVwZGF0ZXMpXG4gICAgLmVxKCdpZCcsIHJlcG9ydElkKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gdXBkYXRlUGF5bWVudFJlcG9ydCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNRVNTQUdFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1lc3NhZ2VzQnlVc2VySWQoXG4gIHVzZXJJZDogbnVtYmVyLFxuICBvcHRpb25zOiB7IHVucmVhZE9ubHk/OiBib29sZWFuOyBsaW1pdD86IG51bWJlciB9ID0ge31cbik6IFByb21pc2U8TWVzc2FnZVtdPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxuICAgIC5mcm9tKCdtZXNzYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgXG4gIGlmIChvcHRpb25zLnVucmVhZE9ubHkpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5LmlzKCdyZWFkX2F0JywgbnVsbCk7XG4gIH1cbiAgXG4gIGlmIChvcHRpb25zLmxpbWl0KSB7XG4gICAgcXVlcnkgPSBxdWVyeS5saW1pdChvcHRpb25zLmxpbWl0KTtcbiAgfVxuICBcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldE1lc3NhZ2VzQnlVc2VySWQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZTogT21pdDxNZXNzYWdlLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPik6IFByb21pc2U8TWVzc2FnZT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgLi4ubWVzc2FnZSxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gY3JlYXRlTWVzc2FnZSBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrTWVzc2FnZUFzUmVhZChtZXNzYWdlSWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxuICAgIC51cGRhdGUoeyByZWFkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSlcbiAgICAuZXEoJ2lkJywgbWVzc2FnZUlkKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gbWFya01lc3NhZ2VBc1JlYWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrQWxsTWVzc2FnZXNBc1JlYWQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21lc3NhZ2VzJylcbiAgICAudXBkYXRlKHsgcmVhZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgIC5pcygncmVhZF9hdCcsIG51bGwpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBtYXJrQWxsTWVzc2FnZXNBc1JlYWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBSRU1PVEUgQ09ORklHXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtb3RlQ29uZmlnKCk6IFByb21pc2U8UmVtb3RlQ29uZmlnW10+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3JlbW90ZV9jb25maWcnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5vcmRlcigna2V5Jyk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldFJlbW90ZUNvbmZpZyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtb3RlQ29uZmlnQnlLZXkoa2V5OiBzdHJpbmcpOiBQcm9taXNlPFJlbW90ZUNvbmZpZyB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3JlbW90ZV9jb25maWcnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgna2V5Jywga2V5KVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRSZW1vdGVDb25maWdCeUtleSBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG4iXSwibmFtZXMiOlsiZ2V0U3VwYWJhc2VBZG1pbiIsImlzU3VwYWJhc2VDb25maWd1cmVkIiwiZ2V0VXNlckJ5SWQiLCJ1c2VySWQiLCJzdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImNvZGUiLCJjb25zb2xlIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwiZ2V0VXNlckJ5UHVibGljSWQiLCJwdWJsaWNJZCIsImNyZWF0ZVVzZXIiLCJ1c2VyIiwiaW5zZXJ0IiwicGFzc3dvcmRfaGFzaCIsInBhc3N3b3JkSGFzaCIsImZ1bGxfbmFtZSIsImZ1bGxOYW1lIiwicHVibGljX2lkIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJ1cGRhdGVVc2VyIiwidXBkYXRlcyIsInVwZGF0ZSIsImdldFNlc3Npb25CeUlkIiwic2Vzc2lvbklkIiwiY3JlYXRlU2Vzc2lvbiIsInNlc3Npb24iLCJpZCIsInVzZXJfaWQiLCJleHBpcmVzX2F0IiwiZXhwaXJlc0F0IiwiZGVsZXRlU2Vzc2lvbiIsImRlbGV0ZSIsImRlbGV0ZUV4cGlyZWRTZXNzaW9ucyIsImx0IiwiZ2V0QWdyZWVtZW50QnlJZCIsImFncmVlbWVudElkIiwiZ2V0QWdyZWVtZW50c0J5VXNlcklkIiwib3B0aW9ucyIsInF1ZXJ5Iiwib3IiLCJzdGF0dXMiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwiY3JlYXRlQWdyZWVtZW50IiwiYWdyZWVtZW50IiwidXBkYXRlQWdyZWVtZW50IiwiZ2V0SW52aXRlQnlUb2tlbiIsInRva2VuIiwiY3JlYXRlSW52aXRlIiwiaW52aXRlIiwiYWdyZWVtZW50X2lkIiwiYWNjZXB0SW52aXRlIiwiYWNjZXB0ZWRfYXQiLCJnZXRQYXltZW50c0J5QWdyZWVtZW50SWQiLCJjcmVhdGVQYXltZW50IiwicGF5bWVudCIsImdldEdyb3VwVGFiQnlJZCIsInRhYklkIiwiZ2V0R3JvdXBUYWJCeU1hZ2ljVG9rZW4iLCJtYWdpY1Rva2VuIiwiZ2V0R3JvdXBUYWJCeU93bmVyVG9rZW4iLCJvd25lclRva2VuIiwiZ2V0R3JvdXBUYWJzQnlVc2VySWQiLCJjcmVhdGVkVGFicyIsImNyZWF0ZWRFcnJvciIsInBhcnRpY2lwYW50RGF0YSIsInBhcnRpY2lwYW50RXJyb3IiLCJwYXJ0aWNpcGFudFRhYklkcyIsIm1hcCIsInAiLCJncm91cF90YWJfaWQiLCJsZW5ndGgiLCJwYXJ0aWNpcGF0ZWRUYWJzIiwiaW4iLCJub3QiLCJjcmVhdGVHcm91cFRhYiIsInRhYiIsInVwZGF0ZUdyb3VwVGFiIiwiZ2V0UGFydGljaXBhbnRzQnlUYWJJZCIsImdldFBhcnRpY2lwYW50QnlJZCIsInBhcnRpY2lwYW50SWQiLCJnZXRQYXJ0aWNpcGFudEJ5R3Vlc3RUb2tlbiIsImd1ZXN0VG9rZW4iLCJjcmVhdGVQYXJ0aWNpcGFudCIsInBhcnRpY2lwYW50Iiwiam9pbmVkX2F0IiwidXBkYXRlUGFydGljaXBhbnQiLCJnZXRQYXltZW50UmVwb3J0c0J5VGFiSWQiLCJjcmVhdGVQYXltZW50UmVwb3J0IiwicmVwb3J0IiwidXBkYXRlUGF5bWVudFJlcG9ydCIsInJlcG9ydElkIiwiZ2V0TWVzc2FnZXNCeVVzZXJJZCIsInVucmVhZE9ubHkiLCJpcyIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwibWFya01lc3NhZ2VBc1JlYWQiLCJtZXNzYWdlSWQiLCJyZWFkX2F0IiwibWFya0FsbE1lc3NhZ2VzQXNSZWFkIiwiZ2V0UmVtb3RlQ29uZmlnIiwiZ2V0UmVtb3RlQ29uZmlnQnlLZXkiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   centsToEuros: () => (/* binding */ centsToEuros),\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   escapeHtml: () => (/* binding */ escapeHtml),\n/* harmony export */   eurosToCents: () => (/* binding */ eurosToCents),\n/* harmony export */   formatPhoneNumber: () => (/* binding */ formatPhoneNumber),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getInitials: () => (/* binding */ getInitials),\n/* harmony export */   getSessionExpiryDate: () => (/* binding */ getSessionExpiryDate),\n/* harmony export */   getStatusColor: () => (/* binding */ getStatusColor),\n/* harmony export */   getStatusLabel: () => (/* binding */ getStatusLabel),\n/* harmony export */   isFutureDate: () => (/* binding */ isFutureDate),\n/* harmony export */   isPastDate: () => (/* binding */ isPastDate),\n/* harmony export */   isValidEmail: () => (/* binding */ isValidEmail),\n/* harmony export */   sleep: () => (/* binding */ sleep),\n/* harmony export */   truncate: () => (/* binding */ truncate)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n/**\n * Utility functions for the PayFriends app\n */ \n\n/**\n * Merge Tailwind CSS classes with clsx\n */ function cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\n/**\n * Generate a random token for invites, sessions, etc.\n * @param length - Length of the token (default: 32)\n */ function generateToken(length = 32) {\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let result = \"\";\n    const randomValues = new Uint8Array(length);\n    crypto.getRandomValues(randomValues);\n    for(let i = 0; i < length; i++){\n        result += chars[randomValues[i] % chars.length];\n    }\n    return result;\n}\n/**\n * Sleep for a specified duration\n * @param ms - Duration in milliseconds\n */ function sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\n/**\n * Escape HTML to prevent XSS\n * @param str - String to escape\n */ function escapeHtml(str) {\n    return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n}\n/**\n * Validate email format\n * @param email - Email to validate\n */ function isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n/**\n * Truncate a string to a maximum length\n * @param str - String to truncate\n * @param maxLength - Maximum length\n */ function truncate(str, maxLength) {\n    if (str.length <= maxLength) return str;\n    return str.slice(0, maxLength - 3) + \"...\";\n}\n/**\n * Convert cents to euros\n * @param cents - Amount in cents\n */ function centsToEuros(cents) {\n    return cents / 100;\n}\n/**\n * Convert euros to cents\n * @param euros - Amount in euros\n */ function eurosToCents(euros) {\n    return Math.round(euros * 100);\n}\n/**\n * Get initials from a name\n * @param name - Full name\n */ function getInitials(name) {\n    if (!name) return \"?\";\n    return name.split(\" \").map((part)=>part[0]).join(\"\").toUpperCase().slice(0, 2);\n}\n/**\n * Format a phone number for display\n * @param phone - Phone number\n */ function formatPhoneNumber(phone) {\n    if (!phone) return \"\";\n    // Basic formatting - you can use libphonenumber-js for more sophisticated formatting\n    return phone.replace(/(\\d{2})(\\d{4})(\\d{4})/, \"$1 $2 $3\");\n}\n/**\n * Calculate session expiry date\n * @param days - Number of days until expiry (default: 30)\n */ function getSessionExpiryDate(days = 30) {\n    const date = new Date();\n    date.setDate(date.getDate() + days);\n    return date;\n}\n/**\n * Check if a date is in the past\n * @param date - Date to check\n */ function isPastDate(date) {\n    const d = typeof date === \"string\" ? new Date(date) : date;\n    return d < new Date();\n}\n/**\n * Check if a date is in the future\n * @param date - Date to check\n */ function isFutureDate(date) {\n    const d = typeof date === \"string\" ? new Date(date) : date;\n    return d > new Date();\n}\n/**\n * Get status color class based on agreement status\n * @param status - Agreement status\n */ function getStatusColor(status) {\n    switch(status){\n        case \"active\":\n            return \"badge-active\";\n        case \"pending\":\n            return \"badge-pending\";\n        case \"settled\":\n            return \"badge-settled\";\n        case \"cancelled\":\n            return \"badge-cancelled\";\n        default:\n            return \"badge-pending\";\n    }\n}\n/**\n * Get human-readable status label\n * @param status - Agreement status\n */ function getStatusLabel(status) {\n    switch(status){\n        case \"active\":\n            return \"Active\";\n        case \"pending\":\n            return \"Pending\";\n        case \"settled\":\n            return \"Settled\";\n        case \"cancelled\":\n            return \"Cancelled\";\n        default:\n            return status.charAt(0).toUpperCase() + status.slice(1);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNUO1lBQ0UsT0FBTztJQUNYO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQyxlQUFlRCxNQUFjO0lBQzNDLE9BQVFBO1FBQ04sS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVDtZQUNFLE9BQU9BLE9BQU9FLE1BQU0sQ0FBQyxHQUFHZixXQUFXLEtBQUthLE9BQU8xQixLQUFLLENBQUM7SUFDekQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheWZyaWVuZHMtbXZwLy4vc3JjL2xpYi91dGlscy50cz83YzFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIHRoZSBQYXlGcmllbmRzIGFwcFxuICovXG5cbmltcG9ydCB7IGNsc3gsIHR5cGUgQ2xhc3NWYWx1ZSB9IGZyb20gJ2Nsc3gnO1xuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gJ3RhaWx3aW5kLW1lcmdlJztcblxuLyoqXG4gKiBNZXJnZSBUYWlsd2luZCBDU1MgY2xhc3NlcyB3aXRoIGNsc3hcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNuKC4uLmlucHV0czogQ2xhc3NWYWx1ZVtdKSB7XG4gIHJldHVybiB0d01lcmdlKGNsc3goaW5wdXRzKSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSByYW5kb20gdG9rZW4gZm9yIGludml0ZXMsIHNlc3Npb25zLCBldGMuXG4gKiBAcGFyYW0gbGVuZ3RoIC0gTGVuZ3RoIG9mIHRoZSB0b2tlbiAoZGVmYXVsdDogMzIpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKGxlbmd0aCA9IDMyKTogc3RyaW5nIHtcbiAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGNvbnN0IHJhbmRvbVZhbHVlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMocmFuZG9tVmFsdWVzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFyc1tyYW5kb21WYWx1ZXNbaV0gJSBjaGFycy5sZW5ndGhdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU2xlZXAgZm9yIGEgc3BlY2lmaWVkIGR1cmF0aW9uXG4gKiBAcGFyYW0gbXMgLSBEdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG4vKipcbiAqIEVzY2FwZSBIVE1MIHRvIHByZXZlbnQgWFNTXG4gKiBAcGFyYW0gc3RyIC0gU3RyaW5nIHRvIGVzY2FwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlSHRtbChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTdHJpbmcoc3RyKVxuICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgLnJlcGxhY2UoLycvZywgJyYjMDM5OycpO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGVtYWlsIGZvcm1hdFxuICogQHBhcmFtIGVtYWlsIC0gRW1haWwgdG8gdmFsaWRhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRFbWFpbChlbWFpbDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLztcbiAgcmV0dXJuIGVtYWlsUmVnZXgudGVzdChlbWFpbCk7XG59XG5cbi8qKlxuICogVHJ1bmNhdGUgYSBzdHJpbmcgdG8gYSBtYXhpbXVtIGxlbmd0aFxuICogQHBhcmFtIHN0ciAtIFN0cmluZyB0byB0cnVuY2F0ZVxuICogQHBhcmFtIG1heExlbmd0aCAtIE1heGltdW0gbGVuZ3RoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnVuY2F0ZShzdHI6IHN0cmluZywgbWF4TGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoc3RyLmxlbmd0aCA8PSBtYXhMZW5ndGgpIHJldHVybiBzdHI7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgbWF4TGVuZ3RoIC0gMykgKyAnLi4uJztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGNlbnRzIHRvIGV1cm9zXG4gKiBAcGFyYW0gY2VudHMgLSBBbW91bnQgaW4gY2VudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNlbnRzVG9FdXJvcyhjZW50czogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIGNlbnRzIC8gMTAwO1xufVxuXG4vKipcbiAqIENvbnZlcnQgZXVyb3MgdG8gY2VudHNcbiAqIEBwYXJhbSBldXJvcyAtIEFtb3VudCBpbiBldXJvc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZXVyb3NUb0NlbnRzKGV1cm9zOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5yb3VuZChldXJvcyAqIDEwMCk7XG59XG5cbi8qKlxuICogR2V0IGluaXRpYWxzIGZyb20gYSBuYW1lXG4gKiBAcGFyYW0gbmFtZSAtIEZ1bGwgbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5pdGlhbHMobmFtZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gIGlmICghbmFtZSkgcmV0dXJuICc/JztcbiAgcmV0dXJuIG5hbWVcbiAgICAuc3BsaXQoJyAnKVxuICAgIC5tYXAocGFydCA9PiBwYXJ0WzBdKVxuICAgIC5qb2luKCcnKVxuICAgIC50b1VwcGVyQ2FzZSgpXG4gICAgLnNsaWNlKDAsIDIpO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIHBob25lIG51bWJlciBmb3IgZGlzcGxheVxuICogQHBhcmFtIHBob25lIC0gUGhvbmUgbnVtYmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQaG9uZU51bWJlcihwaG9uZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gIGlmICghcGhvbmUpIHJldHVybiAnJztcbiAgLy8gQmFzaWMgZm9ybWF0dGluZyAtIHlvdSBjYW4gdXNlIGxpYnBob25lbnVtYmVyLWpzIGZvciBtb3JlIHNvcGhpc3RpY2F0ZWQgZm9ybWF0dGluZ1xuICByZXR1cm4gcGhvbmUucmVwbGFjZSgvKFxcZHsyfSkoXFxkezR9KShcXGR7NH0pLywgJyQxICQyICQzJyk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHNlc3Npb24gZXhwaXJ5IGRhdGVcbiAqIEBwYXJhbSBkYXlzIC0gTnVtYmVyIG9mIGRheXMgdW50aWwgZXhwaXJ5IChkZWZhdWx0OiAzMClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlc3Npb25FeHBpcnlEYXRlKGRheXMgPSAzMCk6IERhdGUge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgZGF5cyk7XG4gIHJldHVybiBkYXRlO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZGF0ZSBpcyBpbiB0aGUgcGFzdFxuICogQHBhcmFtIGRhdGUgLSBEYXRlIHRvIGNoZWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Bhc3REYXRlKGRhdGU6IHN0cmluZyB8IERhdGUpOiBib29sZWFuIHtcbiAgY29uc3QgZCA9IHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJyA/IG5ldyBEYXRlKGRhdGUpIDogZGF0ZTtcbiAgcmV0dXJuIGQgPCBuZXcgRGF0ZSgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZGF0ZSBpcyBpbiB0aGUgZnV0dXJlXG4gKiBAcGFyYW0gZGF0ZSAtIERhdGUgdG8gY2hlY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnV0dXJlRGF0ZShkYXRlOiBzdHJpbmcgfCBEYXRlKTogYm9vbGVhbiB7XG4gIGNvbnN0IGQgPSB0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycgPyBuZXcgRGF0ZShkYXRlKSA6IGRhdGU7XG4gIHJldHVybiBkID4gbmV3IERhdGUoKTtcbn1cblxuLyoqXG4gKiBHZXQgc3RhdHVzIGNvbG9yIGNsYXNzIGJhc2VkIG9uIGFncmVlbWVudCBzdGF0dXNcbiAqIEBwYXJhbSBzdGF0dXMgLSBBZ3JlZW1lbnQgc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGF0dXNDb2xvcihzdGF0dXM6IHN0cmluZyk6IHN0cmluZyB7XG4gIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgY2FzZSAnYWN0aXZlJzpcbiAgICAgIHJldHVybiAnYmFkZ2UtYWN0aXZlJztcbiAgICBjYXNlICdwZW5kaW5nJzpcbiAgICAgIHJldHVybiAnYmFkZ2UtcGVuZGluZyc7XG4gICAgY2FzZSAnc2V0dGxlZCc6XG4gICAgICByZXR1cm4gJ2JhZGdlLXNldHRsZWQnO1xuICAgIGNhc2UgJ2NhbmNlbGxlZCc6XG4gICAgICByZXR1cm4gJ2JhZGdlLWNhbmNlbGxlZCc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnYmFkZ2UtcGVuZGluZyc7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgaHVtYW4tcmVhZGFibGUgc3RhdHVzIGxhYmVsXG4gKiBAcGFyYW0gc3RhdHVzIC0gQWdyZWVtZW50IHN0YXR1c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhdHVzTGFiZWwoc3RhdHVzOiBzdHJpbmcpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHN0YXR1cykge1xuICAgIGNhc2UgJ2FjdGl2ZSc6XG4gICAgICByZXR1cm4gJ0FjdGl2ZSc7XG4gICAgY2FzZSAncGVuZGluZyc6XG4gICAgICByZXR1cm4gJ1BlbmRpbmcnO1xuICAgIGNhc2UgJ3NldHRsZWQnOlxuICAgICAgcmV0dXJuICdTZXR0bGVkJztcbiAgICBjYXNlICdjYW5jZWxsZWQnOlxuICAgICAgcmV0dXJuICdDYW5jZWxsZWQnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdHVzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RhdHVzLnNsaWNlKDEpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY2xzeCIsInR3TWVyZ2UiLCJjbiIsImlucHV0cyIsImdlbmVyYXRlVG9rZW4iLCJsZW5ndGgiLCJjaGFycyIsInJlc3VsdCIsInJhbmRvbVZhbHVlcyIsIlVpbnQ4QXJyYXkiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJpIiwic2xlZXAiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImVzY2FwZUh0bWwiLCJzdHIiLCJTdHJpbmciLCJyZXBsYWNlIiwiaXNWYWxpZEVtYWlsIiwiZW1haWwiLCJlbWFpbFJlZ2V4IiwidGVzdCIsInRydW5jYXRlIiwibWF4TGVuZ3RoIiwic2xpY2UiLCJjZW50c1RvRXVyb3MiLCJjZW50cyIsImV1cm9zVG9DZW50cyIsImV1cm9zIiwiTWF0aCIsInJvdW5kIiwiZ2V0SW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJtYXAiLCJwYXJ0Iiwiam9pbiIsInRvVXBwZXJDYXNlIiwiZm9ybWF0UGhvbmVOdW1iZXIiLCJwaG9uZSIsImdldFNlc3Npb25FeHBpcnlEYXRlIiwiZGF5cyIsImRhdGUiLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJpc1Bhc3REYXRlIiwiZCIsImlzRnV0dXJlRGF0ZSIsImdldFN0YXR1c0NvbG9yIiwic3RhdHVzIiwiZ2V0U3RhdHVzTGFiZWwiLCJjaGFyQXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/cookie","vendor-chunks/tailwind-merge","vendor-chunks/clsx"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgrouptabs%2Froute&page=%2Fapi%2Fgrouptabs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgrouptabs%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();