"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/route";
exports.ids = ["app/api/user/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Froute&page=%2Fapi%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Froute&page=%2Fapi%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_paulsomers_Dev_payfriends_mvp_src_app_api_user_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/user/route.ts */ \"(rsc)/./src/app/api/user/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/route\",\n        pathname: \"/api/user\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/route\"\n    },\n    resolvedPagePath: \"/Users/paulsomers/Dev/payfriends-mvp/src/app/api/user/route.ts\",\n    nextConfigOutput,\n    userland: _Users_paulsomers_Dev_payfriends_mvp_src_app_api_user_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ1c2VyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXNlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBhdWxzb21lcnMlMkZEZXYlMkZwYXlmcmllbmRzLW12cCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwYXVsc29tZXJzJTJGRGV2JTJGcGF5ZnJpZW5kcy1tdnAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXlmcmllbmRzLW12cC8/YjQwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcGF1bHNvbWVycy9EZXYvcGF5ZnJpZW5kcy1tdnAvc3JjL2FwcC9hcGkvdXNlci9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VzZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcGF1bHNvbWVycy9EZXYvcGF5ZnJpZW5kcy1tdnAvc3JjL2FwcC9hcGkvdXNlci9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXNlci9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Froute&page=%2Fapi%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/user/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/user/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/**\n * GET /api/user\n * Get current authenticated user\n */ \n\nasync function GET() {\n    try {\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Not authenticated\"\n            }, {\n                status: 401\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            user\n        });\n    } catch (error) {\n        console.error(\"[API] Get user error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An error occurred\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91c2VyL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Q0FHQyxHQUUwQztBQUNDO0FBRXJDLGVBQWVFO0lBQ3BCLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1GLHlEQUFjQTtRQUVqQyxJQUFJLENBQUNFLE1BQU07WUFDVCxPQUFPSCxxREFBWUEsQ0FBQ0ksSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFvQixHQUM3QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT04scURBQVlBLENBQUNJLElBQUksQ0FBQztZQUN2QkcsU0FBUztZQUNUSjtRQUNGO0lBQ0YsRUFBRSxPQUFPRSxPQUFPO1FBQ2RHLFFBQVFILEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9MLHFEQUFZQSxDQUFDSSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBb0IsR0FDN0I7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXlmcmllbmRzLW12cC8uL3NyYy9hcHAvYXBpL3VzZXIvcm91dGUudHM/ODJlNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdFVCAvYXBpL3VzZXJcbiAqIEdldCBjdXJyZW50IGF1dGhlbnRpY2F0ZWQgdXNlclxuICovXG5cbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEldIEdldCB1c2VyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0Q3VycmVudFVzZXIiLCJHRVQiLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic3VjY2VzcyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/user/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSessionCookie: () => (/* binding */ clearSessionCookie),\n/* harmony export */   createUserSession: () => (/* binding */ createUserSession),\n/* harmony export */   generatePublicId: () => (/* binding */ generatePublicId),\n/* harmony export */   generateSessionId: () => (/* binding */ generateSessionId),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   logoutUser: () => (/* binding */ logoutUser),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   signupUser: () => (/* binding */ signupUser),\n/* harmony export */   validateSession: () => (/* binding */ validateSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _supabase_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./supabase/db */ \"(rsc)/./src/lib/supabase/db.ts\");\n/**\n * Authentication utilities\n * Handles session-based authentication for PayFriends\n */ \n\n\n\nconst SESSION_COOKIE_NAME = \"pf_session\";\nconst SESSION_EXPIRY_DAYS = 30;\nconst SALT_ROUNDS = 10;\n/**\n * Get the current authenticated user from the session cookie\n */ async function getCurrentUser() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const sessionId = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n        if (!sessionId) {\n            return null;\n        }\n        const session = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getSessionById)(sessionId);\n        if (!session) {\n            return null;\n        }\n        // Check if session is expired\n        if (new Date(session.expires_at) < new Date()) {\n            await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.deleteSession)(sessionId);\n            return null;\n        }\n        const user = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getUserById)(session.user_id);\n        if (!user) {\n            return null;\n        }\n        return {\n            id: user.id,\n            email: user.email,\n            fullName: user.full_name,\n            publicId: user.public_id,\n            isAdmin: user.is_admin,\n            profilePicturePath: user.profile_picture_path\n        };\n    } catch (error) {\n        console.error(\"[Auth] getCurrentUser error:\", error);\n        return null;\n    }\n}\n/**\n * Validate session without getting the full user\n */ async function validateSession() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const sessionId = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n    if (!sessionId) {\n        return false;\n    }\n    const session = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getSessionById)(sessionId);\n    if (!session || new Date(session.expires_at) < new Date()) {\n        return false;\n    }\n    return true;\n}\n/**\n * Hash a password\n */ async function hashPassword(password) {\n    return bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hash(password, SALT_ROUNDS);\n}\n/**\n * Verify a password against a hash\n */ async function verifyPassword(password, hash) {\n    return bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compare(password, hash);\n}\n/**\n * Generate a secure session ID\n */ function generateSessionId() {\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(32).toString(\"hex\");\n}\n/**\n * Generate a public ID for a user\n */ function generatePublicId() {\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(8).toString(\"hex\");\n}\n/**\n * Create a new session for a user\n */ async function createUserSession(userId) {\n    const sessionId = generateSessionId();\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + SESSION_EXPIRY_DAYS);\n    await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.createSession)({\n        id: sessionId,\n        userId,\n        expiresAt: expiresAt.toISOString()\n    });\n    return sessionId;\n}\n/**\n * Set the session cookie\n */ async function setSessionCookie(sessionId) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + SESSION_EXPIRY_DAYS);\n    cookieStore.set(SESSION_COOKIE_NAME, sessionId, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        expires: expiresAt,\n        path: \"/\"\n    });\n}\n/**\n * Clear the session cookie\n */ async function clearSessionCookie() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    cookieStore.delete(SESSION_COOKIE_NAME);\n}\n/**\n * Login a user with email and password\n */ async function loginUser(email, password) {\n    try {\n        const user = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getUserByEmail)(email);\n        if (!user) {\n            return {\n                success: false,\n                error: \"Invalid email or password\"\n            };\n        }\n        const passwordValid = await verifyPassword(password, user.password_hash);\n        if (!passwordValid) {\n            return {\n                success: false,\n                error: \"Invalid email or password\"\n            };\n        }\n        const sessionId = await createUserSession(user.id);\n        await setSessionCookie(sessionId);\n        return {\n            success: true,\n            user: {\n                id: user.id,\n                email: user.email,\n                fullName: user.full_name,\n                publicId: user.public_id,\n                isAdmin: user.is_admin,\n                profilePicturePath: user.profile_picture_path\n            }\n        };\n    } catch (error) {\n        console.error(\"[Auth] loginUser error:\", error);\n        return {\n            success: false,\n            error: \"An error occurred during login\"\n        };\n    }\n}\n/**\n * Sign up a new user\n */ async function signupUser(email, password, fullName) {\n    try {\n        // Check if user already exists\n        const existingUser = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.getUserByEmail)(email);\n        if (existingUser) {\n            return {\n                success: false,\n                error: \"An account with this email already exists\"\n            };\n        }\n        // Validate password\n        if (password.length < 8) {\n            return {\n                success: false,\n                error: \"Password must be at least 8 characters\"\n            };\n        }\n        // Hash password and create user\n        const passwordHash = await hashPassword(password);\n        const publicId = generatePublicId();\n        const user = await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.createUser)({\n            email,\n            passwordHash,\n            fullName,\n            publicId\n        });\n        // Create session and set cookie\n        const sessionId = await createUserSession(user.id);\n        await setSessionCookie(sessionId);\n        return {\n            success: true,\n            user: {\n                id: user.id,\n                email: user.email,\n                fullName: user.full_name,\n                publicId: user.public_id,\n                isAdmin: user.is_admin,\n                profilePicturePath: user.profile_picture_path\n            }\n        };\n    } catch (error) {\n        console.error(\"[Auth] signupUser error:\", error);\n        return {\n            success: false,\n            error: \"An error occurred during signup\"\n        };\n    }\n}\n/**\n * Logout the current user\n */ async function logoutUser() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const sessionId = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n        if (sessionId) {\n            await (0,_supabase_db__WEBPACK_IMPORTED_MODULE_3__.deleteSession)(sessionId);\n        }\n        await clearSessionCookie();\n    } catch (error) {\n        console.error(\"[Auth] logoutUser error:\", error);\n    }\n}\n/**\n * Require authentication - throws if not authenticated\n */ async function requireAuth() {\n    const user = await getCurrentUser();\n    if (!user) {\n        throw new Error(\"Unauthorized\");\n    }\n    return user;\n}\n/**\n * Require admin - throws if not admin\n */ async function requireAdmin() {\n    const user = await getCurrentUser();\n    if (!user) {\n        throw new Error(\"Unauthorized\");\n    }\n    if (!user.isAdmin) {\n        throw new Error(\"Forbidden\");\n    }\n    return user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q00sZUFBZXFDO0lBQ3BCLE1BQU1qRCxPQUFPLE1BQU1SO0lBRW5CLElBQUksQ0FBQ1EsTUFBTTtRQUNULE1BQU0sSUFBSWtELE1BQU07SUFDbEI7SUFFQSxPQUFPbEQ7QUFDVDtBQUVBOztDQUVDLEdBQ00sZUFBZW1EO0lBQ3BCLE1BQU1uRCxPQUFPLE1BQU1SO0lBRW5CLElBQUksQ0FBQ1EsTUFBTTtRQUNULE1BQU0sSUFBSWtELE1BQU07SUFDbEI7SUFFQSxJQUFJLENBQUNsRCxLQUFLUSxPQUFPLEVBQUU7UUFDakIsTUFBTSxJQUFJMEMsTUFBTTtJQUNsQjtJQUVBLE9BQU9sRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhlbnRpY2F0aW9uIHV0aWxpdGllc1xuICogSGFuZGxlcyBzZXNzaW9uLWJhc2VkIGF1dGhlbnRpY2F0aW9uIGZvciBQYXlGcmllbmRzXG4gKi9cblxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBnZXRVc2VyQnlJZCwgZ2V0VXNlckJ5RW1haWwsIGdldFNlc3Npb25CeUlkLCBjcmVhdGVTZXNzaW9uLCBkZWxldGVTZXNzaW9uLCBjcmVhdGVVc2VyLCB0eXBlIFVzZXIgfSBmcm9tICcuL3N1cGFiYXNlL2RiJztcblxuY29uc3QgU0VTU0lPTl9DT09LSUVfTkFNRSA9ICdwZl9zZXNzaW9uJztcbmNvbnN0IFNFU1NJT05fRVhQSVJZX0RBWVMgPSAzMDtcbmNvbnN0IFNBTFRfUk9VTkRTID0gMTA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFVzZXIge1xuICBpZDogbnVtYmVyO1xuICBlbWFpbDogc3RyaW5nO1xuICBmdWxsTmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHVibGljSWQ6IHN0cmluZyB8IG51bGw7XG4gIGlzQWRtaW46IGJvb2xlYW47XG4gIHByb2ZpbGVQaWN0dXJlUGF0aDogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRlZCB1c2VyIGZyb20gdGhlIHNlc3Npb24gY29va2llXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IGNvb2tpZVN0b3JlLmdldChTRVNTSU9OX0NPT0tJRV9OQU1FKT8udmFsdWU7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBzZXNzaW9uIGlzIGV4cGlyZWRcbiAgICBpZiAobmV3IERhdGUoc2Vzc2lvbi5leHBpcmVzX2F0KSA8IG5ldyBEYXRlKCkpIHtcbiAgICAgIGF3YWl0IGRlbGV0ZVNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5SWQoc2Vzc2lvbi51c2VyX2lkKTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGZ1bGxOYW1lOiB1c2VyLmZ1bGxfbmFtZSxcbiAgICAgIHB1YmxpY0lkOiB1c2VyLnB1YmxpY19pZCxcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNfYWRtaW4sXG4gICAgICBwcm9maWxlUGljdHVyZVBhdGg6IHVzZXIucHJvZmlsZV9waWN0dXJlX3BhdGgsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gZ2V0Q3VycmVudFVzZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGUgc2Vzc2lvbiB3aXRob3V0IGdldHRpbmcgdGhlIGZ1bGwgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcbiAgY29uc3Qgc2Vzc2lvbklkID0gY29va2llU3RvcmUuZ2V0KFNFU1NJT05fQ09PS0lFX05BTUUpPy52YWx1ZTtcbiAgXG4gIGlmICghc2Vzc2lvbklkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKTtcbiAgXG4gIGlmICghc2Vzc2lvbiB8fCBuZXcgRGF0ZShzZXNzaW9uLmV4cGlyZXNfYXQpIDwgbmV3IERhdGUoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogSGFzaCBhIHBhc3N3b3JkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgU0FMVF9ST1VORFMpO1xufVxuXG4vKipcbiAqIFZlcmlmeSBhIHBhc3N3b3JkIGFnYWluc3QgYSBoYXNoXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNlY3VyZSBzZXNzaW9uIElEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4Jyk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBwdWJsaWMgSUQgZm9yIGEgdXNlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQdWJsaWNJZCgpOiBzdHJpbmcge1xuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDgpLnRvU3RyaW5nKCdoZXgnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc2Vzc2lvbiBmb3IgYSB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyU2Vzc2lvbih1c2VySWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNlc3Npb25JZCA9IGdlbmVyYXRlU2Vzc2lvbklkKCk7XG4gIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKCk7XG4gIGV4cGlyZXNBdC5zZXREYXRlKGV4cGlyZXNBdC5nZXREYXRlKCkgKyBTRVNTSU9OX0VYUElSWV9EQVlTKTtcbiAgXG4gIGF3YWl0IGNyZWF0ZVNlc3Npb24oe1xuICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgdXNlcklkLFxuICAgIGV4cGlyZXNBdDogZXhwaXJlc0F0LnRvSVNPU3RyaW5nKCksXG4gIH0pO1xuICBcbiAgcmV0dXJuIHNlc3Npb25JZDtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIHNlc3Npb24gY29va2llXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZSgpO1xuICBleHBpcmVzQXQuc2V0RGF0ZShleHBpcmVzQXQuZ2V0RGF0ZSgpICsgU0VTU0lPTl9FWFBJUllfREFZUyk7XG4gIFxuICBjb29raWVTdG9yZS5zZXQoU0VTU0lPTl9DT09LSUVfTkFNRSwgc2Vzc2lvbklkLCB7XG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBleHBpcmVzOiBleHBpcmVzQXQsXG4gICAgcGF0aDogJy8nLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhciB0aGUgc2Vzc2lvbiBjb29raWVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2Vzc2lvbkNvb2tpZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gIGNvb2tpZVN0b3JlLmRlbGV0ZShTRVNTSU9OX0NPT0tJRV9OQU1FKTtcbn1cblxuLyoqXG4gKiBMb2dpbiBhIHVzZXIgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luVXNlcihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHVzZXI/OiBBdXRoVXNlcjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwYXNzd29yZFZhbGlkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmRfaGFzaCk7XG4gICAgXG4gICAgaWYgKCFwYXNzd29yZFZhbGlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjcmVhdGVVc2VyU2Vzc2lvbih1c2VyLmlkKTtcbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLFxuICAgICAgICBwdWJsaWNJZDogdXNlci5wdWJsaWNfaWQsXG4gICAgICAgIGlzQWRtaW46IHVzZXIuaXNfYWRtaW4sXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlUGF0aDogdXNlci5wcm9maWxlX3BpY3R1cmVfcGF0aCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gbG9naW5Vc2VyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgbG9naW4nIH07XG4gIH1cbn1cblxuLyoqXG4gKiBTaWduIHVwIGEgbmV3IHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ251cFVzZXIoXG4gIGVtYWlsOiBzdHJpbmcsXG4gIHBhc3N3b3JkOiBzdHJpbmcsXG4gIGZ1bGxOYW1lPzogc3RyaW5nXG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgdXNlcj86IEF1dGhVc2VyOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsKTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBbiBhY2NvdW50IHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0cycgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcGFzc3dvcmRcbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEhhc2ggcGFzc3dvcmQgYW5kIGNyZWF0ZSB1c2VyXG4gICAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKTtcbiAgICBjb25zdCBwdWJsaWNJZCA9IGdlbmVyYXRlUHVibGljSWQoKTtcbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3JlYXRlVXNlcih7XG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkSGFzaCxcbiAgICAgIGZ1bGxOYW1lLFxuICAgICAgcHVibGljSWQsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHNlc3Npb24gYW5kIHNldCBjb29raWVcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjcmVhdGVVc2VyU2Vzc2lvbih1c2VyLmlkKTtcbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLFxuICAgICAgICBwdWJsaWNJZDogdXNlci5wdWJsaWNfaWQsXG4gICAgICAgIGlzQWRtaW46IHVzZXIuaXNfYWRtaW4sXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlUGF0aDogdXNlci5wcm9maWxlX3BpY3R1cmVfcGF0aCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gc2lnbnVwVXNlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHNpZ251cCcgfTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ291dCB0aGUgY3VycmVudCB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dvdXRVc2VyKCk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IGNvb2tpZVN0b3JlLmdldChTRVNTSU9OX0NPT0tJRV9OQU1FKT8udmFsdWU7XG4gICAgXG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgYXdhaXQgZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQpO1xuICAgIH1cbiAgICBcbiAgICBhd2FpdCBjbGVhclNlc3Npb25Db29raWUoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gbG9nb3V0VXNlciBlcnJvcjonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIC0gdGhyb3dzIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQXV0aCgpOiBQcm9taXNlPEF1dGhVc2VyPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHVzZXI7XG59XG5cbi8qKlxuICogUmVxdWlyZSBhZG1pbiAtIHRocm93cyBpZiBub3QgYWRtaW5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBZG1pbigpOiBQcm9taXNlPEF1dGhVc2VyPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgfVxuICBcbiAgaWYgKCF1c2VyLmlzQWRtaW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvcmJpZGRlbicpO1xuICB9XG4gIFxuICByZXR1cm4gdXNlcjtcbn1cbiJdLCJuYW1lcyI6WyJjb29raWVzIiwiYmNyeXB0IiwiY3J5cHRvIiwiZ2V0VXNlckJ5SWQiLCJnZXRVc2VyQnlFbWFpbCIsImdldFNlc3Npb25CeUlkIiwiY3JlYXRlU2Vzc2lvbiIsImRlbGV0ZVNlc3Npb24iLCJjcmVhdGVVc2VyIiwiU0VTU0lPTl9DT09LSUVfTkFNRSIsIlNFU1NJT05fRVhQSVJZX0RBWVMiLCJTQUxUX1JPVU5EUyIsImdldEN1cnJlbnRVc2VyIiwiY29va2llU3RvcmUiLCJzZXNzaW9uSWQiLCJnZXQiLCJ2YWx1ZSIsInNlc3Npb24iLCJEYXRlIiwiZXhwaXJlc19hdCIsInVzZXIiLCJ1c2VyX2lkIiwiaWQiLCJlbWFpbCIsImZ1bGxOYW1lIiwiZnVsbF9uYW1lIiwicHVibGljSWQiLCJwdWJsaWNfaWQiLCJpc0FkbWluIiwiaXNfYWRtaW4iLCJwcm9maWxlUGljdHVyZVBhdGgiLCJwcm9maWxlX3BpY3R1cmVfcGF0aCIsImVycm9yIiwiY29uc29sZSIsInZhbGlkYXRlU2Vzc2lvbiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlU2Vzc2lvbklkIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImdlbmVyYXRlUHVibGljSWQiLCJjcmVhdGVVc2VyU2Vzc2lvbiIsInVzZXJJZCIsImV4cGlyZXNBdCIsInNldERhdGUiLCJnZXREYXRlIiwidG9JU09TdHJpbmciLCJzZXRTZXNzaW9uQ29va2llIiwic2V0IiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJwcm9jZXNzIiwic2FtZVNpdGUiLCJleHBpcmVzIiwicGF0aCIsImNsZWFyU2Vzc2lvbkNvb2tpZSIsImRlbGV0ZSIsImxvZ2luVXNlciIsInN1Y2Nlc3MiLCJwYXNzd29yZFZhbGlkIiwicGFzc3dvcmRfaGFzaCIsInNpZ251cFVzZXIiLCJleGlzdGluZ1VzZXIiLCJsZW5ndGgiLCJwYXNzd29yZEhhc2giLCJsb2dvdXRVc2VyIiwicmVxdWlyZUF1dGgiLCJFcnJvciIsInJlcXVpcmVBZG1pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/client.ts":
/*!************************************!*\
  !*** ./src/lib/supabase/client.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBrowserClient: () => (/* binding */ createBrowserClient),\n/* harmony export */   createServerClient: () => (/* binding */ createServerClient),\n/* harmony export */   getSupabaseAdmin: () => (/* binding */ getSupabaseAdmin),\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   isAdminConfigured: () => (/* binding */ isAdminConfigured),\n/* harmony export */   isSupabaseConfigured: () => (/* binding */ isSupabaseConfigured)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/**\n * Supabase Client - Server-side\n * \n * This module provides Supabase client instances for server-side use.\n * Use the appropriate client based on your needs:\n * - createServerClient: Uses service role key, bypasses RLS (for API routes)\n * - createBrowserClient: Uses anon key, respects RLS (for client-side)\n */ \n\n\n// Environment variables\nconst supabaseUrl = \"https://mugsmupamjdtawpaawbh.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11Z3NtdXBhbWpkdGF3cGFhd2JoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0OTkzODMsImV4cCI6MjA4NDA3NTM4M30.4nKEmb84DbrjnR-Uml9MLWbyGZpTFSEIvqPbEYeV-P8\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n/**\n * Check if Supabase is properly configured\n */ function isSupabaseConfigured() {\n    return !!(supabaseUrl && supabaseAnonKey);\n}\n/**\n * Check if admin client is available\n */ function isAdminConfigured() {\n    return !!(supabaseUrl && supabaseServiceKey);\n}\n/**\n * Admin Supabase client - bypasses RLS\n * Use this ONLY for admin operations that need to see/modify all data\n * NEVER expose this client to the browser\n */ let adminClient = null;\nfunction getSupabaseAdmin() {\n    if (!adminClient && supabaseUrl && supabaseServiceKey) {\n        adminClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n    }\n    if (!adminClient) {\n        throw new Error(\"Supabase admin client not configured. Check environment variables.\");\n    }\n    return adminClient;\n}\n/**\n * Create a Supabase client for server components\n * This uses cookies for session management\n */ async function createServerClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error(\"Supabase configuration missing\");\n    }\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl, supabaseAnonKey, {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // Ignore errors in server components\n                }\n            }\n        }\n    });\n}\n/**\n * Create a Supabase client for browser/client components\n */ function createBrowserClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error(\"Supabase configuration missing\");\n    }\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createBrowserClient)(supabaseUrl, supabaseAnonKey);\n}\n/**\n * Standard Supabase client - respects RLS (for server-side without cookies)\n */ function getSupabaseClient() {\n    if (!supabaseUrl || !supabaseAnonKey) {\n        return null;\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseAnonKey, {\n        auth: {\n            autoRefreshToken: true,\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlL2NsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7OztDQU9DLEdBRW9FO0FBQ3NEO0FBQ3BGO0FBRXZDLHdCQUF3QjtBQUN4QixNQUFNTSxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFDakUsTUFBTUsscUJBQXFCTCxRQUFRQyxHQUFHLENBQUNLLHlCQUF5QjtBQUVoRTs7Q0FFQyxHQUNNLFNBQVNDO0lBQ2QsT0FBTyxDQUFDLENBQUVSLENBQUFBLGVBQWVJLGVBQWM7QUFDekM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNLO0lBQ2QsT0FBTyxDQUFDLENBQUVULENBQUFBLGVBQWVNLGtCQUFpQjtBQUM1QztBQUVBOzs7O0NBSUMsR0FDRCxJQUFJSSxjQUFxQztBQUVsQyxTQUFTQztJQUNkLElBQUksQ0FBQ0QsZUFBZVYsZUFBZU0sb0JBQW9CO1FBQ3JESSxjQUFjaEIsbUVBQVlBLENBQUNNLGFBQWFNLG9CQUFvQjtZQUMxRE0sTUFBTTtnQkFDSkMsa0JBQWtCO2dCQUNsQkMsZ0JBQWdCO1lBQ2xCO1FBQ0Y7SUFDRjtJQUVBLElBQUksQ0FBQ0osYUFBYTtRQUNoQixNQUFNLElBQUlLLE1BQU07SUFDbEI7SUFFQSxPQUFPTDtBQUNUO0FBRUE7OztDQUdDLEdBQ00sZUFBZWY7SUFDcEIsSUFBSSxDQUFDSyxlQUFlLENBQUNJLGlCQUFpQjtRQUNwQyxNQUFNLElBQUlXLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxjQUFjLE1BQU1qQixxREFBT0E7SUFFakMsT0FBT0gsaUVBQXFCQSxDQUFDSSxhQUFhSSxpQkFBaUI7UUFDekRMLFNBQVM7WUFDUGtCO2dCQUNFLE9BQU9ELFlBQVlDLE1BQU07WUFDM0I7WUFDQUMsUUFBT0MsWUFBa0Y7Z0JBQ3ZGLElBQUk7b0JBQ0ZBLGFBQWFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUUsR0FDNUNQLFlBQVlRLEdBQUcsQ0FBQ0gsTUFBTUMsT0FBT0M7Z0JBRWpDLEVBQUUsT0FBTTtnQkFDTixxQ0FBcUM7Z0JBQ3ZDO1lBQ0Y7UUFDRjtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVMxQjtJQUNkLElBQUksQ0FBQ0csZUFBZSxDQUFDSSxpQkFBaUI7UUFDcEMsTUFBTSxJQUFJVyxNQUFNO0lBQ2xCO0lBRUEsT0FBT2pCLGtFQUFzQkEsQ0FBQ0UsYUFBYUk7QUFDN0M7QUFFQTs7Q0FFQyxHQUNNLFNBQVNxQjtJQUNkLElBQUksQ0FBQ3pCLGVBQWUsQ0FBQ0ksaUJBQWlCO1FBQ3BDLE9BQU87SUFDVDtJQUVBLE9BQU9WLG1FQUFZQSxDQUFDTSxhQUFhSSxpQkFBaUI7UUFDaERRLE1BQU07WUFDSkMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvLi9zcmMvbGliL3N1cGFiYXNlL2NsaWVudC50cz8wZjk3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgQ2xpZW50IC0gU2VydmVyLXNpZGVcbiAqIFxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgU3VwYWJhc2UgY2xpZW50IGluc3RhbmNlcyBmb3Igc2VydmVyLXNpZGUgdXNlLlxuICogVXNlIHRoZSBhcHByb3ByaWF0ZSBjbGllbnQgYmFzZWQgb24geW91ciBuZWVkczpcbiAqIC0gY3JlYXRlU2VydmVyQ2xpZW50OiBVc2VzIHNlcnZpY2Ugcm9sZSBrZXksIGJ5cGFzc2VzIFJMUyAoZm9yIEFQSSByb3V0ZXMpXG4gKiAtIGNyZWF0ZUJyb3dzZXJDbGllbnQ6IFVzZXMgYW5vbiBrZXksIHJlc3BlY3RzIFJMUyAoZm9yIGNsaWVudC1zaWRlKVxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCwgU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IGFzIGNyZWF0ZVNTUlNlcnZlckNsaWVudCwgY3JlYXRlQnJvd3NlckNsaWVudCBhcyBjcmVhdGVTU1JCcm93c2VyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3Nzcic7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcblxuLy8gRW52aXJvbm1lbnQgdmFyaWFibGVzXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcblxuLyoqXG4gKiBDaGVjayBpZiBTdXBhYmFzZSBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N1cGFiYXNlQ29uZmlndXJlZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhKHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlQW5vbktleSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYWRtaW4gY2xpZW50IGlzIGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbkNvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIShzdXBhYmFzZVVybCAmJiBzdXBhYmFzZVNlcnZpY2VLZXkpO1xufVxuXG4vKipcbiAqIEFkbWluIFN1cGFiYXNlIGNsaWVudCAtIGJ5cGFzc2VzIFJMU1xuICogVXNlIHRoaXMgT05MWSBmb3IgYWRtaW4gb3BlcmF0aW9ucyB0aGF0IG5lZWQgdG8gc2VlL21vZGlmeSBhbGwgZGF0YVxuICogTkVWRVIgZXhwb3NlIHRoaXMgY2xpZW50IHRvIHRoZSBicm93c2VyXG4gKi9cbmxldCBhZG1pbkNsaWVudDogU3VwYWJhc2VDbGllbnQgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQWRtaW4oKTogU3VwYWJhc2VDbGllbnQge1xuICBpZiAoIWFkbWluQ2xpZW50ICYmIHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlU2VydmljZUtleSkge1xuICAgIGFkbWluQ2xpZW50ID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmICghYWRtaW5DbGllbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGFkbWluIGNsaWVudCBub3QgY29uZmlndXJlZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xuICB9XG4gIFxuICByZXR1cm4gYWRtaW5DbGllbnQ7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgU3VwYWJhc2UgY2xpZW50IGZvciBzZXJ2ZXIgY29tcG9uZW50c1xuICogVGhpcyB1c2VzIGNvb2tpZXMgZm9yIHNlc3Npb24gbWFuYWdlbWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2VydmVyQ2xpZW50KCkge1xuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGNvbmZpZ3VyYXRpb24gbWlzc2luZycpO1xuICB9XG5cbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG5cbiAgcmV0dXJuIGNyZWF0ZVNTUlNlcnZlckNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gICAgY29va2llczoge1xuICAgICAgZ2V0QWxsKCkge1xuICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0QWxsKCk7XG4gICAgICB9LFxuICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldDogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB9W10pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PlxuICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvcnMgaW4gc2VydmVyIGNvbXBvbmVudHNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgZm9yIGJyb3dzZXIvY2xpZW50IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJDbGllbnQoKSB7XG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgY29uZmlndXJhdGlvbiBtaXNzaW5nJyk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlU1NSQnJvd3NlckNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcbn1cblxuLyoqXG4gKiBTdGFuZGFyZCBTdXBhYmFzZSBjbGllbnQgLSByZXNwZWN0cyBSTFMgKGZvciBzZXJ2ZXItc2lkZSB3aXRob3V0IGNvb2tpZXMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBhYmFzZUNsaWVudCgpOiBTdXBhYmFzZUNsaWVudCB8IG51bGwge1xuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gICAgYXV0aDoge1xuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICB9LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjcmVhdGVTU1JTZXJ2ZXJDbGllbnQiLCJjcmVhdGVCcm93c2VyQ2xpZW50IiwiY3JlYXRlU1NSQnJvd3NlckNsaWVudCIsImNvb2tpZXMiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJpc1N1cGFiYXNlQ29uZmlndXJlZCIsImlzQWRtaW5Db25maWd1cmVkIiwiYWRtaW5DbGllbnQiLCJnZXRTdXBhYmFzZUFkbWluIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsIkVycm9yIiwiY29va2llU3RvcmUiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCIsImdldFN1cGFiYXNlQ2xpZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/client.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/db.ts":
/*!********************************!*\
  !*** ./src/lib/supabase/db.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acceptInvite: () => (/* binding */ acceptInvite),\n/* harmony export */   createAgreement: () => (/* binding */ createAgreement),\n/* harmony export */   createGroupTab: () => (/* binding */ createGroupTab),\n/* harmony export */   createInvite: () => (/* binding */ createInvite),\n/* harmony export */   createMessage: () => (/* binding */ createMessage),\n/* harmony export */   createParticipant: () => (/* binding */ createParticipant),\n/* harmony export */   createPayment: () => (/* binding */ createPayment),\n/* harmony export */   createPaymentReport: () => (/* binding */ createPaymentReport),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteExpiredSessions: () => (/* binding */ deleteExpiredSessions),\n/* harmony export */   deleteSession: () => (/* binding */ deleteSession),\n/* harmony export */   getAgreementById: () => (/* binding */ getAgreementById),\n/* harmony export */   getAgreementsByUserId: () => (/* binding */ getAgreementsByUserId),\n/* harmony export */   getGroupTabById: () => (/* binding */ getGroupTabById),\n/* harmony export */   getGroupTabByMagicToken: () => (/* binding */ getGroupTabByMagicToken),\n/* harmony export */   getGroupTabByOwnerToken: () => (/* binding */ getGroupTabByOwnerToken),\n/* harmony export */   getGroupTabsByUserId: () => (/* binding */ getGroupTabsByUserId),\n/* harmony export */   getInviteByToken: () => (/* binding */ getInviteByToken),\n/* harmony export */   getMessagesByUserId: () => (/* binding */ getMessagesByUserId),\n/* harmony export */   getParticipantByGuestToken: () => (/* binding */ getParticipantByGuestToken),\n/* harmony export */   getParticipantById: () => (/* binding */ getParticipantById),\n/* harmony export */   getParticipantsByTabId: () => (/* binding */ getParticipantsByTabId),\n/* harmony export */   getPaymentReportsByTabId: () => (/* binding */ getPaymentReportsByTabId),\n/* harmony export */   getPaymentsByAgreementId: () => (/* binding */ getPaymentsByAgreementId),\n/* harmony export */   getRemoteConfig: () => (/* binding */ getRemoteConfig),\n/* harmony export */   getRemoteConfigByKey: () => (/* binding */ getRemoteConfigByKey),\n/* harmony export */   getSessionById: () => (/* binding */ getSessionById),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserByPublicId: () => (/* binding */ getUserByPublicId),\n/* harmony export */   isSupabaseConfigured: () => (/* reexport safe */ _client__WEBPACK_IMPORTED_MODULE_0__.isSupabaseConfigured),\n/* harmony export */   markAllMessagesAsRead: () => (/* binding */ markAllMessagesAsRead),\n/* harmony export */   markMessageAsRead: () => (/* binding */ markMessageAsRead),\n/* harmony export */   updateAgreement: () => (/* binding */ updateAgreement),\n/* harmony export */   updateGroupTab: () => (/* binding */ updateGroupTab),\n/* harmony export */   updateParticipant: () => (/* binding */ updateParticipant),\n/* harmony export */   updatePaymentReport: () => (/* binding */ updatePaymentReport),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(rsc)/./src/lib/supabase/client.ts\");\n/**\n * Database Abstraction Layer for Supabase\n * \n * This module provides database access functions using Supabase Postgres.\n * All functions use the admin client to bypass RLS for server-side operations.\n */ \n// Re-export configuration check\n\n// =============================================================================\n// USER QUERIES\n// =============================================================================\nasync function getUserById(userId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", userId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getUserById error:\", error);\n    }\n    return data;\n}\nasync function getUserByEmail(email) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"email\", email.toLowerCase()).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getUserByEmail error:\", error);\n    }\n    return data;\n}\nasync function getUserByPublicId(publicId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"public_id\", publicId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getUserByPublicId error:\", error);\n    }\n    return data;\n}\nasync function createUser(user) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").insert({\n        email: user.email.toLowerCase(),\n        password_hash: user.passwordHash,\n        full_name: user.fullName || null,\n        public_id: user.publicId || null,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createUser error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateUser(userId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"users\").update({\n        ...updates,\n        updated_at: new Date().toISOString()\n    }).eq(\"id\", userId).select().single();\n    if (error) {\n        console.error(\"[DB] updateUser error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// SESSION QUERIES\n// =============================================================================\nasync function getSessionById(sessionId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"sessions\").select(\"*\").eq(\"id\", sessionId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getSessionById error:\", error);\n    }\n    return data;\n}\nasync function createSession(session) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"sessions\").insert({\n        id: session.id,\n        user_id: session.userId,\n        created_at: new Date().toISOString(),\n        expires_at: session.expiresAt\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createSession error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function deleteSession(sessionId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"sessions\").delete().eq(\"id\", sessionId);\n    if (error) {\n        console.error(\"[DB] deleteSession error:\", error);\n    }\n}\nasync function deleteExpiredSessions() {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"sessions\").delete().lt(\"expires_at\", new Date().toISOString());\n    if (error) {\n        console.error(\"[DB] deleteExpiredSessions error:\", error);\n    }\n}\n// =============================================================================\n// AGREEMENT QUERIES\n// =============================================================================\nasync function getAgreementById(agreementId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreements\").select(`\n      *,\n      lender:users!agreements_lender_user_id_fkey(id, full_name, email),\n      borrower:users!agreements_borrower_user_id_fkey(id, full_name, email)\n    `).eq(\"id\", agreementId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getAgreementById error:\", error);\n    }\n    return data;\n}\nasync function getAgreementsByUserId(userId, options = {}) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    let query = supabase.from(\"agreements\").select(`\n      *,\n      lender:users!agreements_lender_user_id_fkey(id, full_name, email),\n      borrower:users!agreements_borrower_user_id_fkey(id, full_name, email)\n    `).or(`lender_user_id.eq.${userId},borrower_user_id.eq.${userId}`);\n    if (options.status) {\n        query = query.eq(\"status\", options.status);\n    }\n    query = query.order(\"created_at\", {\n        ascending: false\n    });\n    if (options.limit) {\n        query = query.limit(options.limit);\n    }\n    const { data, error } = await query;\n    if (error) {\n        console.error(\"[DB] getAgreementsByUserId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createAgreement(agreement) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreements\").insert({\n        ...agreement,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createAgreement error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateAgreement(agreementId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreements\").update({\n        ...updates,\n        updated_at: new Date().toISOString()\n    }).eq(\"id\", agreementId).select().single();\n    if (error) {\n        console.error(\"[DB] updateAgreement error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// AGREEMENT INVITE QUERIES\n// =============================================================================\nasync function getInviteByToken(token) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreement_invites\").select(\"*, agreement:agreements(*)\").eq(\"token\", token).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getInviteByToken error:\", error);\n    }\n    return data;\n}\nasync function createInvite(invite) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreement_invites\").insert({\n        agreement_id: invite.agreementId,\n        email: invite.email.toLowerCase(),\n        token: invite.token,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createInvite error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function acceptInvite(token) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"agreement_invites\").update({\n        accepted_at: new Date().toISOString()\n    }).eq(\"token\", token).select().single();\n    if (error) {\n        console.error(\"[DB] acceptInvite error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// PAYMENT QUERIES\n// =============================================================================\nasync function getPaymentsByAgreementId(agreementId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"payments\").select(\"*, recorded_by:users!payments_recorded_by_user_id_fkey(id, full_name, email)\").eq(\"agreement_id\", agreementId).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) {\n        console.error(\"[DB] getPaymentsByAgreementId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createPayment(payment) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"payments\").insert({\n        ...payment,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createPayment error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// GROUP TAB QUERIES\n// =============================================================================\nasync function getGroupTabById(tabId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").select(\"*, creator:users!group_tabs_creator_user_id_fkey(id, full_name, email)\").eq(\"id\", tabId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getGroupTabById error:\", error);\n    }\n    return data;\n}\nasync function getGroupTabByMagicToken(magicToken) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").select(\"*, creator:users!group_tabs_creator_user_id_fkey(id, full_name, email)\").eq(\"magic_token\", magicToken).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getGroupTabByMagicToken error:\", error);\n    }\n    return data;\n}\nasync function getGroupTabByOwnerToken(ownerToken) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").select(\"*, creator:users!group_tabs_creator_user_id_fkey(id, full_name, email)\").eq(\"owner_token\", ownerToken).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getGroupTabByOwnerToken error:\", error);\n    }\n    return data;\n}\nasync function getGroupTabsByUserId(userId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    // Get tabs where user is creator\n    const { data: createdTabs, error: createdError } = await supabase.from(\"group_tabs\").select(\"*\").eq(\"creator_user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    // Get tabs where user is participant\n    const { data: participantData, error: participantError } = await supabase.from(\"group_tab_participants\").select(\"group_tab_id\").eq(\"user_id\", userId);\n    if (createdError || participantError) {\n        console.error(\"[DB] getGroupTabsByUserId error:\", createdError || participantError);\n        return [];\n    }\n    const participantTabIds = (participantData || []).map((p)=>p.group_tab_id);\n    if (participantTabIds.length > 0) {\n        const { data: participatedTabs } = await supabase.from(\"group_tabs\").select(\"*\").in(\"id\", participantTabIds).not(\"creator_user_id\", \"eq\", userId);\n        return [\n            ...createdTabs || [],\n            ...participatedTabs || []\n        ];\n    }\n    return createdTabs || [];\n}\nasync function createGroupTab(tab) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").insert({\n        ...tab,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createGroupTab error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateGroupTab(tabId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tabs\").update({\n        ...updates,\n        updated_at: new Date().toISOString()\n    }).eq(\"id\", tabId).select().single();\n    if (error) {\n        console.error(\"[DB] updateGroupTab error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// GROUP TAB PARTICIPANT QUERIES\n// =============================================================================\nasync function getParticipantsByTabId(tabId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").select(\"*, user:users(id, full_name, email)\").eq(\"group_tab_id\", tabId).order(\"joined_at\", {\n        ascending: true\n    });\n    if (error) {\n        console.error(\"[DB] getParticipantsByTabId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function getParticipantById(participantId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").select(\"*, user:users(id, full_name, email)\").eq(\"id\", participantId).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getParticipantById error:\", error);\n    }\n    return data;\n}\nasync function getParticipantByGuestToken(guestToken) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").select(\"*, group_tab:group_tabs(*)\").eq(\"guest_session_token\", guestToken).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getParticipantByGuestToken error:\", error);\n    }\n    return data;\n}\nasync function createParticipant(participant) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").insert({\n        ...participant,\n        joined_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createParticipant error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updateParticipant(participantId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_participants\").update(updates).eq(\"id\", participantId).select().single();\n    if (error) {\n        console.error(\"[DB] updateParticipant error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// GROUP TAB PAYMENT REPORTS\n// =============================================================================\nasync function getPaymentReportsByTabId(tabId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_payment_reports\").select(\"*, participant:group_tab_participants(id, guest_name, user:users(id, full_name))\").eq(\"group_tab_id\", tabId).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) {\n        console.error(\"[DB] getPaymentReportsByTabId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createPaymentReport(report) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_payment_reports\").insert({\n        ...report,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createPaymentReport error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function updatePaymentReport(reportId, updates) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"group_tab_payment_reports\").update(updates).eq(\"id\", reportId).select().single();\n    if (error) {\n        console.error(\"[DB] updatePaymentReport error:\", error);\n        throw error;\n    }\n    return data;\n}\n// =============================================================================\n// MESSAGES\n// =============================================================================\nasync function getMessagesByUserId(userId, options = {}) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    let query = supabase.from(\"messages\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n        ascending: false\n    });\n    if (options.unreadOnly) {\n        query = query.is(\"read_at\", null);\n    }\n    if (options.limit) {\n        query = query.limit(options.limit);\n    }\n    const { data, error } = await query;\n    if (error) {\n        console.error(\"[DB] getMessagesByUserId error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function createMessage(message) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"messages\").insert({\n        ...message,\n        created_at: new Date().toISOString()\n    }).select().single();\n    if (error) {\n        console.error(\"[DB] createMessage error:\", error);\n        throw error;\n    }\n    return data;\n}\nasync function markMessageAsRead(messageId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"messages\").update({\n        read_at: new Date().toISOString()\n    }).eq(\"id\", messageId);\n    if (error) {\n        console.error(\"[DB] markMessageAsRead error:\", error);\n    }\n}\nasync function markAllMessagesAsRead(userId) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { error } = await supabase.from(\"messages\").update({\n        read_at: new Date().toISOString()\n    }).eq(\"user_id\", userId).is(\"read_at\", null);\n    if (error) {\n        console.error(\"[DB] markAllMessagesAsRead error:\", error);\n    }\n}\n// =============================================================================\n// REMOTE CONFIG\n// =============================================================================\nasync function getRemoteConfig() {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"remote_config\").select(\"*\").order(\"key\");\n    if (error) {\n        console.error(\"[DB] getRemoteConfig error:\", error);\n        return [];\n    }\n    return data || [];\n}\nasync function getRemoteConfigByKey(key) {\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseAdmin)();\n    const { data, error } = await supabase.from(\"remote_config\").select(\"*\").eq(\"key\", key).single();\n    if (error && error.code !== \"PGRST116\") {\n        console.error(\"[DB] getRemoteConfigByKey error:\", error);\n    }\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxRQUFRTixLQUFLLENBQUMscUNBQXFDQTtJQUNyRDtBQUNGO0FBRUEsZ0ZBQWdGO0FBQ2hGLGdCQUFnQjtBQUNoQixnRkFBZ0Y7QUFFekUsZUFBZTJHO0lBQ3BCLE1BQU03RyxXQUFXSix5REFBZ0JBO0lBQ2pDLE1BQU0sRUFBRUssSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNRixTQUMzQkcsSUFBSSxDQUFDLGlCQUNMQyxNQUFNLENBQUMsS0FDUDRDLEtBQUssQ0FBQztJQUVULElBQUk5QyxPQUFPO1FBQ1RNLFFBQVFOLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU8sRUFBRTtJQUNYO0lBQ0EsT0FBT0QsUUFBUSxFQUFFO0FBQ25CO0FBRU8sZUFBZTZHLHFCQUFxQkMsR0FBVztJQUNwRCxNQUFNL0csV0FBV0oseURBQWdCQTtJQUNqQyxNQUFNLEVBQUVLLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUYsU0FDM0JHLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxPQUFPMEcsS0FDVnpHLE1BQU07SUFFVCxJQUFJSixTQUFTQSxNQUFNSyxJQUFJLEtBQUssWUFBWTtRQUN0Q0MsUUFBUU4sS0FBSyxDQUFDLG9DQUFvQ0E7SUFDcEQ7SUFDQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5ZnJpZW5kcy1tdnAvLi9zcmMvbGliL3N1cGFiYXNlL2RiLnRzP2MyNDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXRhYmFzZSBBYnN0cmFjdGlvbiBMYXllciBmb3IgU3VwYWJhc2VcbiAqIFxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgZGF0YWJhc2UgYWNjZXNzIGZ1bmN0aW9ucyB1c2luZyBTdXBhYmFzZSBQb3N0Z3Jlcy5cbiAqIEFsbCBmdW5jdGlvbnMgdXNlIHRoZSBhZG1pbiBjbGllbnQgdG8gYnlwYXNzIFJMUyBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucy5cbiAqL1xuXG5pbXBvcnQgeyBnZXRTdXBhYmFzZUFkbWluLCBpc1N1cGFiYXNlQ29uZmlndXJlZCB9IGZyb20gJy4vY2xpZW50JztcblxuLy8gUmUtZXhwb3J0IGNvbmZpZ3VyYXRpb24gY2hlY2tcbmV4cG9ydCB7IGlzU3VwYWJhc2VDb25maWd1cmVkIH07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUWVBFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmRfaGFzaDogc3RyaW5nO1xuICBmdWxsX25hbWU6IHN0cmluZyB8IG51bGw7XG4gIHB1YmxpY19pZDogc3RyaW5nIHwgbnVsbDtcbiAgcGhvbmVfbnVtYmVyOiBzdHJpbmcgfCBudWxsO1xuICBwcm9maWxlX3BpY3R1cmVfcGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgdGltZXpvbmU6IHN0cmluZyB8IG51bGw7XG4gIGlzX2FkbWluOiBib29sZWFuO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl9pZDogbnVtYmVyO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIGV4cGlyZXNfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZ3JlZW1lbnQge1xuICBpZDogbnVtYmVyO1xuICBsZW5kZXJfdXNlcl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgbGVuZGVyX25hbWU6IHN0cmluZztcbiAgYm9ycm93ZXJfdXNlcl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgYm9ycm93ZXJfZW1haWw6IHN0cmluZztcbiAgZnJpZW5kX2ZpcnN0X25hbWU6IHN0cmluZyB8IG51bGw7XG4gIGRpcmVjdGlvbjogJ2xlbmQnIHwgJ2JvcnJvdyc7XG4gIHJlcGF5bWVudF90eXBlOiAnb25lX3RpbWUnIHwgJ2luc3RhbGxtZW50cyc7XG4gIGFtb3VudF9jZW50czogbnVtYmVyO1xuICBpbnRlcmVzdF9yYXRlOiBudW1iZXIgfCBudWxsO1xuICBpbnN0YWxsbWVudF9jb3VudDogbnVtYmVyIHwgbnVsbDtcbiAgcGF5bWVudF9mcmVxdWVuY3k6IHN0cmluZyB8IG51bGw7XG4gIGR1ZV9kYXRlOiBzdHJpbmc7XG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ2FjdGl2ZScgfCAnc2V0dGxlZCcgfCAnY2FuY2VsbGVkJztcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG4gIGhhc19yZXBheW1lbnRfaXNzdWU6IGJvb2xlYW47XG4gIGNhbGNfdmVyc2lvbjogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIGxlbmRlcj86IFBpY2s8VXNlciwgJ2lkJyB8ICdmdWxsX25hbWUnIHwgJ2VtYWlsJz47XG4gIGJvcnJvd2VyPzogUGljazxVc2VyLCAnaWQnIHwgJ2Z1bGxfbmFtZScgfCAnZW1haWwnPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZ3JlZW1lbnRJbnZpdGUge1xuICBpZDogbnVtYmVyO1xuICBhZ3JlZW1lbnRfaWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgdG9rZW46IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBhY2NlcHRlZF9hdDogc3RyaW5nIHwgbnVsbDtcbiAgYWdyZWVtZW50PzogQWdyZWVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnQge1xuICBpZDogbnVtYmVyO1xuICBhZ3JlZW1lbnRfaWQ6IG51bWJlcjtcbiAgcmVjb3JkZWRfYnlfdXNlcl9pZDogbnVtYmVyO1xuICBhbW91bnRfY2VudHM6IG51bWJlcjtcbiAgbWV0aG9kOiBzdHJpbmcgfCBudWxsO1xuICBub3RlOiBzdHJpbmcgfCBudWxsO1xuICBzdGF0dXM6IHN0cmluZztcbiAgcHJvb2ZfZmlsZV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHJlY29yZGVkX2J5PzogUGljazxVc2VyLCAnaWQnIHwgJ2Z1bGxfbmFtZScgfCAnZW1haWwnPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcm91cFRhYiB7XG4gIGlkOiBudW1iZXI7XG4gIGNyZWF0b3JfdXNlcl9pZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuICB0YWJfdHlwZTogJ29uZV9iaWxsJyB8ICdtdWx0aV9iaWxsJztcbiAgdGVtcGxhdGU6IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1czogJ29wZW4nIHwgJ2Nsb3NlZCcgfCAnc2V0dGxlZCc7XG4gIHRvdGFsX2Ftb3VudF9jZW50czogbnVtYmVyIHwgbnVsbDtcbiAgc3BsaXRfbW9kZTogc3RyaW5nO1xuICBleHBlY3RlZF9wYXlfcmF0ZTogbnVtYmVyO1xuICBzZWF0X2NvdW50OiBudW1iZXIgfCBudWxsO1xuICBwZW9wbGVfY291bnQ6IG51bWJlcjtcbiAgcmVjZWlwdF9maWxlX3BhdGg6IHN0cmluZyB8IG51bGw7XG4gIHBhaWRfdXBfY2VudHM6IG51bWJlcjtcbiAgaG9zdF9vdmVycGFpZF9jZW50czogbnVtYmVyO1xuICB0b3RhbF9yYWlzZWRfY2VudHM6IG51bWJlcjtcbiAgcHJvb2ZfcmVxdWlyZWQ6IHN0cmluZztcbiAgbWFnaWNfdG9rZW46IHN0cmluZztcbiAgb3duZXJfdG9rZW46IHN0cmluZyB8IG51bGw7XG4gIGludml0ZV9jb2RlOiBzdHJpbmcgfCBudWxsO1xuICBtYW5hZ2VfY29kZTogc3RyaW5nIHwgbnVsbDtcbiAgZXZlbnRfZGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgLy8gR2lmdC1zcGVjaWZpYyBmaWVsZHNcbiAgZ2lmdF9tb2RlOiBzdHJpbmcgfCBudWxsO1xuICBncm91cF9naWZ0X21vZGU6IHN0cmluZyB8IG51bGw7XG4gIHJlY2lwaWVudF9uYW1lOiBzdHJpbmcgfCBudWxsO1xuICBhYm91dF90ZXh0OiBzdHJpbmcgfCBudWxsO1xuICBhYm91dF9pbWFnZV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICBhYm91dF9saW5rOiBzdHJpbmcgfCBudWxsO1xuICBpc19yYWlzaW5nX21vbmV5X29ubHk6IGJvb2xlYW47XG4gIGFtb3VudF90YXJnZXQ6IG51bWJlciB8IG51bGw7XG4gIGNvbnRyaWJ1dG9yX2NvdW50OiBudW1iZXIgfCBudWxsO1xuICByYWlzaW5nX2Zvcl90ZXh0OiBzdHJpbmcgfCBudWxsO1xuICByYWlzaW5nX2Zvcl9pbWFnZV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICByYWlzaW5nX2Zvcl9saW5rOiBzdHJpbmcgfCBudWxsO1xuICBpc19vcGVuX3BvdDogYm9vbGVhbjtcbiAgcGF5bWVudF9tZXRob2RzX2pzb246IHN0cmluZyB8IG51bGw7XG4gIG9yZ2FuaXplcl9jb250cmlidXRpb246IG51bWJlciB8IG51bGw7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xuICBjbG9zZWRfYXQ6IHN0cmluZyB8IG51bGw7XG4gIGxhc3RfcGF5bWVudF9hdD86IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0b3I/OiBQaWNrPFVzZXIsICdpZCcgfCAnZnVsbF9uYW1lJyB8ICdlbWFpbCc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwVGFiUGFydGljaXBhbnQge1xuICBpZDogbnVtYmVyO1xuICBncm91cF90YWJfaWQ6IG51bWJlcjtcbiAgdXNlcl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgZ3Vlc3RfbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgZ3Vlc3Rfc2Vzc2lvbl90b2tlbjogc3RyaW5nIHwgbnVsbDtcbiAgcm9sZTogc3RyaW5nO1xuICBpc19tZW1iZXI6IGJvb2xlYW47XG4gIGhpZGVfbmFtZTogYm9vbGVhbjtcbiAgc2VhdHNfY2xhaW1lZDogbnVtYmVyO1xuICB0aWVyX25hbWU6IHN0cmluZyB8IG51bGw7XG4gIHRpZXJfbXVsdGlwbGllcjogbnVtYmVyO1xuICB0aWVyX2lkOiBudW1iZXIgfCBudWxsO1xuICBwcmljZV9ncm91cF9pZDogbnVtYmVyIHwgbnVsbDtcbiAgY3VzdG9tX2Ftb3VudF9jZW50czogbnVtYmVyIHwgbnVsbDtcbiAgZmFpcl9zaGFyZV9jZW50czogbnVtYmVyIHwgbnVsbDtcbiAgcmVtYWluaW5nX2NlbnRzOiBudW1iZXIgfCBudWxsO1xuICB0b3RhbF9wYWlkX2NlbnRzOiBudW1iZXI7XG4gIGpvaW5lZF9hdDogc3RyaW5nO1xuICB1c2VyPzogUGljazxVc2VyLCAnaWQnIHwgJ2Z1bGxfbmFtZScgfCAnZW1haWwnPjtcbiAgZ3JvdXBfdGFiPzogR3JvdXBUYWI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXBUYWJQYXltZW50UmVwb3J0IHtcbiAgaWQ6IG51bWJlcjtcbiAgZ3JvdXBfdGFiX2lkOiBudW1iZXI7XG4gIHBhcnRpY2lwYW50X2lkOiBudW1iZXI7XG4gIGFtb3VudF9jZW50czogbnVtYmVyO1xuICBtZXRob2Q6IHN0cmluZyB8IG51bGw7XG4gIHByb29mX2ZpbGVfcGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgcmV2aWV3ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG4gIHBhcnRpY2lwYW50PzogR3JvdXBUYWJQYXJ0aWNpcGFudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IG51bWJlcjtcbiAgdXNlcl9pZDogbnVtYmVyO1xuICBhZ3JlZW1lbnRfaWQ6IG51bWJlciB8IG51bGw7XG4gIHRhYl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgc3ViamVjdDogc3RyaW5nO1xuICBib2R5OiBzdHJpbmc7XG4gIGV2ZW50X3R5cGU6IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgcmVhZF9hdDogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZW1vdGVDb25maWcge1xuICBrZXk6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgdHlwZTogJ2Jvb2xlYW4nIHwgJ3N0cmluZycgfCAnanNvbicgfCAnbnVtYmVyJztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVNFUiBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5SWQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCd1c2VycycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0VXNlckJ5SWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ2VtYWlsJywgZW1haWwudG9Mb3dlckNhc2UoKSlcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0VXNlckJ5RW1haWwgZXJyb3I6JywgZXJyb3IpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5UHVibGljSWQocHVibGljSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ3B1YmxpY19pZCcsIHB1YmxpY0lkKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRVc2VyQnlQdWJsaWNJZCBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXI6IHtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmRIYXNoOiBzdHJpbmc7XG4gIGZ1bGxOYW1lPzogc3RyaW5nO1xuICBwdWJsaWNJZD86IHN0cmluZztcbn0pOiBQcm9taXNlPFVzZXI+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuaW5zZXJ0KHtcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICBwYXNzd29yZF9oYXNoOiB1c2VyLnBhc3N3b3JkSGFzaCxcbiAgICAgIGZ1bGxfbmFtZTogdXNlci5mdWxsTmFtZSB8fCBudWxsLFxuICAgICAgcHVibGljX2lkOiB1c2VyLnB1YmxpY0lkIHx8IG51bGwsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZVVzZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlcih1c2VySWQ6IG51bWJlciwgdXBkYXRlczogUGFydGlhbDxPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZF9hdCc+Pik6IFByb21pc2U8VXNlcj4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgndXNlcnMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgLi4udXBkYXRlcyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5lcSgnaWQnLCB1c2VySWQpXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSB1cGRhdGVVc2VyIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNFU1NJT04gUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25CeUlkKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uIHwgbnVsbD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldFNlc3Npb25CeUlkIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24oc2Vzc2lvbjoge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IG51bWJlcjtcbiAgZXhwaXJlc0F0OiBzdHJpbmc7XG59KTogUHJvbWlzZTxTZXNzaW9uPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdzZXNzaW9ucycpXG4gICAgLmluc2VydCh7XG4gICAgICBpZDogc2Vzc2lvbi5pZCxcbiAgICAgIHVzZXJfaWQ6IHNlc3Npb24udXNlcklkLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZXhwaXJlc19hdDogc2Vzc2lvbi5leHBpcmVzQXQsXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZVNlc3Npb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBkZWxldGVTZXNzaW9uIGVycm9yOicsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRXhwaXJlZFNlc3Npb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5sdCgnZXhwaXJlc19hdCcsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGRlbGV0ZUV4cGlyZWRTZXNzaW9ucyBlcnJvcjonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFHUkVFTUVOVCBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWdyZWVtZW50QnlJZChhZ3JlZW1lbnRJZDogbnVtYmVyKTogUHJvbWlzZTxBZ3JlZW1lbnQgfCBudWxsPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdhZ3JlZW1lbnRzJylcbiAgICAuc2VsZWN0KGBcbiAgICAgICosXG4gICAgICBsZW5kZXI6dXNlcnMhYWdyZWVtZW50c19sZW5kZXJfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKSxcbiAgICAgIGJvcnJvd2VyOnVzZXJzIWFncmVlbWVudHNfYm9ycm93ZXJfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKVxuICAgIGApXG4gICAgLmVxKCdpZCcsIGFncmVlbWVudElkKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRBZ3JlZW1lbnRCeUlkIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFncmVlbWVudHNCeVVzZXJJZChcbiAgdXNlcklkOiBudW1iZXIsXG4gIG9wdGlvbnM6IHsgc3RhdHVzPzogc3RyaW5nOyBsaW1pdD86IG51bWJlciB9ID0ge31cbik6IFByb21pc2U8QWdyZWVtZW50W10+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FncmVlbWVudHMnKVxuICAgIC5zZWxlY3QoYFxuICAgICAgKixcbiAgICAgIGxlbmRlcjp1c2VycyFhZ3JlZW1lbnRzX2xlbmRlcl91c2VyX2lkX2ZrZXkoaWQsIGZ1bGxfbmFtZSwgZW1haWwpLFxuICAgICAgYm9ycm93ZXI6dXNlcnMhYWdyZWVtZW50c19ib3Jyb3dlcl91c2VyX2lkX2ZrZXkoaWQsIGZ1bGxfbmFtZSwgZW1haWwpXG4gICAgYClcbiAgICAub3IoYGxlbmRlcl91c2VyX2lkLmVxLiR7dXNlcklkfSxib3Jyb3dlcl91c2VyX2lkLmVxLiR7dXNlcklkfWApO1xuICBcbiAgaWYgKG9wdGlvbnMuc3RhdHVzKSB7XG4gICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgb3B0aW9ucy5zdGF0dXMpO1xuICB9XG4gIFxuICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICBcbiAgaWYgKG9wdGlvbnMubGltaXQpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KG9wdGlvbnMubGltaXQpO1xuICB9XG4gIFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0QWdyZWVtZW50c0J5VXNlcklkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIGRhdGEgfHwgW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBZ3JlZW1lbnQoYWdyZWVtZW50OiBPbWl0PEFncmVlbWVudCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0JyB8ICdsZW5kZXInIHwgJ2JvcnJvd2VyJz4pOiBQcm9taXNlPEFncmVlbWVudD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWdyZWVtZW50cycpXG4gICAgLmluc2VydCh7XG4gICAgICAuLi5hZ3JlZW1lbnQsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZUFncmVlbWVudCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBZ3JlZW1lbnQoXG4gIGFncmVlbWVudElkOiBudW1iZXIsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8T21pdDxBZ3JlZW1lbnQsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAnbGVuZGVyJyB8ICdib3Jyb3dlcic+PlxuKTogUHJvbWlzZTxBZ3JlZW1lbnQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FncmVlbWVudHMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgLi4udXBkYXRlcyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5lcSgnaWQnLCBhZ3JlZW1lbnRJZClcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIHVwZGF0ZUFncmVlbWVudCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBR1JFRU1FTlQgSU5WSVRFIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZpdGVCeVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEFncmVlbWVudEludml0ZSB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FncmVlbWVudF9pbnZpdGVzJylcbiAgICAuc2VsZWN0KCcqLCBhZ3JlZW1lbnQ6YWdyZWVtZW50cygqKScpXG4gICAgLmVxKCd0b2tlbicsIHRva2VuKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRJbnZpdGVCeVRva2VuIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUludml0ZShpbnZpdGU6IHtcbiAgYWdyZWVtZW50SWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgdG9rZW46IHN0cmluZztcbn0pOiBQcm9taXNlPEFncmVlbWVudEludml0ZT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWdyZWVtZW50X2ludml0ZXMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgYWdyZWVtZW50X2lkOiBpbnZpdGUuYWdyZWVtZW50SWQsXG4gICAgICBlbWFpbDogaW52aXRlLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICB0b2tlbjogaW52aXRlLnRva2VuLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBjcmVhdGVJbnZpdGUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWNjZXB0SW52aXRlKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEFncmVlbWVudEludml0ZT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWdyZWVtZW50X2ludml0ZXMnKVxuICAgIC51cGRhdGUoeyBhY2NlcHRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgLmVxKCd0b2tlbicsIHRva2VuKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gYWNjZXB0SW52aXRlIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBBWU1FTlQgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRzQnlBZ3JlZW1lbnRJZChhZ3JlZW1lbnRJZDogbnVtYmVyKTogUHJvbWlzZTxQYXltZW50W10+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3BheW1lbnRzJylcbiAgICAuc2VsZWN0KCcqLCByZWNvcmRlZF9ieTp1c2VycyFwYXltZW50c19yZWNvcmRlZF9ieV91c2VyX2lkX2ZrZXkoaWQsIGZ1bGxfbmFtZSwgZW1haWwpJylcbiAgICAuZXEoJ2FncmVlbWVudF9pZCcsIGFncmVlbWVudElkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0UGF5bWVudHNCeUFncmVlbWVudElkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIGRhdGEgfHwgW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQYXltZW50KHBheW1lbnQ6IE9taXQ8UGF5bWVudCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICdyZWNvcmRlZF9ieSc+KTogUHJvbWlzZTxQYXltZW50PiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwYXltZW50cycpXG4gICAgLmluc2VydCh7XG4gICAgICAuLi5wYXltZW50LFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBjcmVhdGVQYXltZW50IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdST1VQIFRBQiBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBUYWJCeUlkKHRhYklkOiBudW1iZXIpOiBQcm9taXNlPEdyb3VwVGFiIHwgbnVsbD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLnNlbGVjdCgnKiwgY3JlYXRvcjp1c2VycyFncm91cF90YWJzX2NyZWF0b3JfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKScpXG4gICAgLmVxKCdpZCcsIHRhYklkKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRHcm91cFRhYkJ5SWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBUYWJCeU1hZ2ljVG9rZW4obWFnaWNUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxHcm91cFRhYiB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYnMnKVxuICAgIC5zZWxlY3QoJyosIGNyZWF0b3I6dXNlcnMhZ3JvdXBfdGFic19jcmVhdG9yX3VzZXJfaWRfZmtleShpZCwgZnVsbF9uYW1lLCBlbWFpbCknKVxuICAgIC5lcSgnbWFnaWNfdG9rZW4nLCBtYWdpY1Rva2VuKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRHcm91cFRhYkJ5TWFnaWNUb2tlbiBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHcm91cFRhYkJ5T3duZXJUb2tlbihvd25lclRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEdyb3VwVGFiIHwgbnVsbD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLnNlbGVjdCgnKiwgY3JlYXRvcjp1c2VycyFncm91cF90YWJzX2NyZWF0b3JfdXNlcl9pZF9ma2V5KGlkLCBmdWxsX25hbWUsIGVtYWlsKScpXG4gICAgLmVxKCdvd25lcl90b2tlbicsIG93bmVyVG9rZW4pXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldEdyb3VwVGFiQnlPd25lclRva2VuIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEdyb3VwVGFic0J5VXNlcklkKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxHcm91cFRhYltdPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBcbiAgLy8gR2V0IHRhYnMgd2hlcmUgdXNlciBpcyBjcmVhdG9yXG4gIGNvbnN0IHsgZGF0YTogY3JlYXRlZFRhYnMsIGVycm9yOiBjcmVhdGVkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYnMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnY3JlYXRvcl91c2VyX2lkJywgdXNlcklkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgXG4gIC8vIEdldCB0YWJzIHdoZXJlIHVzZXIgaXMgcGFydGljaXBhbnRcbiAgY29uc3QgeyBkYXRhOiBwYXJ0aWNpcGFudERhdGEsIGVycm9yOiBwYXJ0aWNpcGFudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdncm91cF90YWJfcGFydGljaXBhbnRzJylcbiAgICAuc2VsZWN0KCdncm91cF90YWJfaWQnKVxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG4gIFxuICBpZiAoY3JlYXRlZEVycm9yIHx8IHBhcnRpY2lwYW50RXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldEdyb3VwVGFic0J5VXNlcklkIGVycm9yOicsIGNyZWF0ZWRFcnJvciB8fCBwYXJ0aWNpcGFudEVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIGNvbnN0IHBhcnRpY2lwYW50VGFiSWRzID0gKHBhcnRpY2lwYW50RGF0YSB8fCBbXSkubWFwKHAgPT4gcC5ncm91cF90YWJfaWQpO1xuICBcbiAgaWYgKHBhcnRpY2lwYW50VGFiSWRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB7IGRhdGE6IHBhcnRpY2lwYXRlZFRhYnMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5pbignaWQnLCBwYXJ0aWNpcGFudFRhYklkcylcbiAgICAgIC5ub3QoJ2NyZWF0b3JfdXNlcl9pZCcsICdlcScsIHVzZXJJZCk7XG4gICAgXG4gICAgcmV0dXJuIFsuLi4oY3JlYXRlZFRhYnMgfHwgW10pLCAuLi4ocGFydGljaXBhdGVkVGFicyB8fCBbXSldO1xuICB9XG4gIFxuICByZXR1cm4gY3JlYXRlZFRhYnMgfHwgW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVHcm91cFRhYih0YWI6IE9taXQ8R3JvdXBUYWIsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCcgfCAnY3JlYXRvcic+KTogUHJvbWlzZTxHcm91cFRhYj4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLmluc2VydCh7XG4gICAgICAuLi50YWIsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGNyZWF0ZUdyb3VwVGFiIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUdyb3VwVGFiKFxuICB0YWJJZDogbnVtYmVyLFxuICB1cGRhdGVzOiBQYXJ0aWFsPE9taXQ8R3JvdXBUYWIsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAnY3JlYXRvcic+PlxuKTogUHJvbWlzZTxHcm91cFRhYj4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFicycpXG4gICAgLnVwZGF0ZSh7XG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLmVxKCdpZCcsIHRhYklkKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gdXBkYXRlR3JvdXBUYWIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR1JPVVAgVEFCIFBBUlRJQ0lQQU5UIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXJ0aWNpcGFudHNCeVRhYklkKHRhYklkOiBudW1iZXIpOiBQcm9taXNlPEdyb3VwVGFiUGFydGljaXBhbnRbXT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFiX3BhcnRpY2lwYW50cycpXG4gICAgLnNlbGVjdCgnKiwgdXNlcjp1c2VycyhpZCwgZnVsbF9uYW1lLCBlbWFpbCknKVxuICAgIC5lcSgnZ3JvdXBfdGFiX2lkJywgdGFiSWQpXG4gICAgLm9yZGVyKCdqb2luZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0UGFydGljaXBhbnRzQnlUYWJJZCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFydGljaXBhbnRCeUlkKHBhcnRpY2lwYW50SWQ6IG51bWJlcik6IFByb21pc2U8R3JvdXBUYWJQYXJ0aWNpcGFudCB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXJ0aWNpcGFudHMnKVxuICAgIC5zZWxlY3QoJyosIHVzZXI6dXNlcnMoaWQsIGZ1bGxfbmFtZSwgZW1haWwpJylcbiAgICAuZXEoJ2lkJywgcGFydGljaXBhbnRJZClcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gZ2V0UGFydGljaXBhbnRCeUlkIGVycm9yOicsIGVycm9yKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhcnRpY2lwYW50QnlHdWVzdFRva2VuKGd1ZXN0VG9rZW46IHN0cmluZyk6IFByb21pc2U8R3JvdXBUYWJQYXJ0aWNpcGFudCB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXJ0aWNpcGFudHMnKVxuICAgIC5zZWxlY3QoJyosIGdyb3VwX3RhYjpncm91cF90YWJzKCopJylcbiAgICAuZXEoJ2d1ZXN0X3Nlc3Npb25fdG9rZW4nLCBndWVzdFRva2VuKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRQYXJ0aWNpcGFudEJ5R3Vlc3RUb2tlbiBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudDogT21pdDxHcm91cFRhYlBhcnRpY2lwYW50LCAnaWQnIHwgJ2pvaW5lZF9hdCcgfCAndXNlcicgfCAnZ3JvdXBfdGFiJz4pOiBQcm9taXNlPEdyb3VwVGFiUGFydGljaXBhbnQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXJ0aWNpcGFudHMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICBqb2luZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gY3JlYXRlUGFydGljaXBhbnQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGFydGljaXBhbnQoXG4gIHBhcnRpY2lwYW50SWQ6IG51bWJlcixcbiAgdXBkYXRlczogUGFydGlhbDxPbWl0PEdyb3VwVGFiUGFydGljaXBhbnQsICdpZCcgfCAnam9pbmVkX2F0JyB8ICd1c2VyJyB8ICdncm91cF90YWInPj5cbik6IFByb21pc2U8R3JvdXBUYWJQYXJ0aWNpcGFudD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFiX3BhcnRpY2lwYW50cycpXG4gICAgLnVwZGF0ZSh1cGRhdGVzKVxuICAgIC5lcSgnaWQnLCBwYXJ0aWNpcGFudElkKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gdXBkYXRlUGFydGljaXBhbnQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR1JPVVAgVEFCIFBBWU1FTlQgUkVQT1JUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRSZXBvcnRzQnlUYWJJZCh0YWJJZDogbnVtYmVyKTogUHJvbWlzZTxHcm91cFRhYlBheW1lbnRSZXBvcnRbXT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ3JvdXBfdGFiX3BheW1lbnRfcmVwb3J0cycpXG4gICAgLnNlbGVjdCgnKiwgcGFydGljaXBhbnQ6Z3JvdXBfdGFiX3BhcnRpY2lwYW50cyhpZCwgZ3Vlc3RfbmFtZSwgdXNlcjp1c2VycyhpZCwgZnVsbF9uYW1lKSknKVxuICAgIC5lcSgnZ3JvdXBfdGFiX2lkJywgdGFiSWQpXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRQYXltZW50UmVwb3J0c0J5VGFiSWQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBheW1lbnRSZXBvcnQocmVwb3J0OiBPbWl0PEdyb3VwVGFiUGF5bWVudFJlcG9ydCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICdwYXJ0aWNpcGFudCc+KTogUHJvbWlzZTxHcm91cFRhYlBheW1lbnRSZXBvcnQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dyb3VwX3RhYl9wYXltZW50X3JlcG9ydHMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgLi4ucmVwb3J0LFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBjcmVhdGVQYXltZW50UmVwb3J0IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBheW1lbnRSZXBvcnQoXG4gIHJlcG9ydElkOiBudW1iZXIsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8T21pdDxHcm91cFRhYlBheW1lbnRSZXBvcnQsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAncGFydGljaXBhbnQnPj5cbik6IFByb21pc2U8R3JvdXBUYWJQYXltZW50UmVwb3J0PiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdncm91cF90YWJfcGF5bWVudF9yZXBvcnRzJylcbiAgICAudXBkYXRlKHVwZGF0ZXMpXG4gICAgLmVxKCdpZCcsIHJlcG9ydElkKVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gdXBkYXRlUGF5bWVudFJlcG9ydCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNRVNTQUdFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1lc3NhZ2VzQnlVc2VySWQoXG4gIHVzZXJJZDogbnVtYmVyLFxuICBvcHRpb25zOiB7IHVucmVhZE9ubHk/OiBib29sZWFuOyBsaW1pdD86IG51bWJlciB9ID0ge31cbik6IFByb21pc2U8TWVzc2FnZVtdPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VBZG1pbigpO1xuICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxuICAgIC5mcm9tKCdtZXNzYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgXG4gIGlmIChvcHRpb25zLnVucmVhZE9ubHkpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5LmlzKCdyZWFkX2F0JywgbnVsbCk7XG4gIH1cbiAgXG4gIGlmIChvcHRpb25zLmxpbWl0KSB7XG4gICAgcXVlcnkgPSBxdWVyeS5saW1pdChvcHRpb25zLmxpbWl0KTtcbiAgfVxuICBcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldE1lc3NhZ2VzQnlVc2VySWQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZTogT21pdDxNZXNzYWdlLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPik6IFByb21pc2U8TWVzc2FnZT4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgLi4ubWVzc2FnZSxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuICAgIC5zZWxlY3QoKVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gY3JlYXRlTWVzc2FnZSBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrTWVzc2FnZUFzUmVhZChtZXNzYWdlSWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQWRtaW4oKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxuICAgIC51cGRhdGUoeyByZWFkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSlcbiAgICAuZXEoJ2lkJywgbWVzc2FnZUlkKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0gbWFya01lc3NhZ2VBc1JlYWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrQWxsTWVzc2FnZXNBc1JlYWQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ21lc3NhZ2VzJylcbiAgICAudXBkYXRlKHsgcmVhZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgIC5pcygncmVhZF9hdCcsIG51bGwpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBtYXJrQWxsTWVzc2FnZXNBc1JlYWQgZXJyb3I6JywgZXJyb3IpO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBSRU1PVEUgQ09ORklHXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtb3RlQ29uZmlnKCk6IFByb21pc2U8UmVtb3RlQ29uZmlnW10+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3JlbW90ZV9jb25maWcnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5vcmRlcigna2V5Jyk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdIGdldFJlbW90ZUNvbmZpZyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtb3RlQ29uZmlnQnlLZXkoa2V5OiBzdHJpbmcpOiBQcm9taXNlPFJlbW90ZUNvbmZpZyB8IG51bGw+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3JlbW90ZV9jb25maWcnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgna2V5Jywga2V5KVxuICAgIC5zaW5nbGUoKTtcbiAgXG4gIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RCXSBnZXRSZW1vdGVDb25maWdCeUtleSBlcnJvcjonLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG4iXSwibmFtZXMiOlsiZ2V0U3VwYWJhc2VBZG1pbiIsImlzU3VwYWJhc2VDb25maWd1cmVkIiwiZ2V0VXNlckJ5SWQiLCJ1c2VySWQiLCJzdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImNvZGUiLCJjb25zb2xlIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwiZ2V0VXNlckJ5UHVibGljSWQiLCJwdWJsaWNJZCIsImNyZWF0ZVVzZXIiLCJ1c2VyIiwiaW5zZXJ0IiwicGFzc3dvcmRfaGFzaCIsInBhc3N3b3JkSGFzaCIsImZ1bGxfbmFtZSIsImZ1bGxOYW1lIiwicHVibGljX2lkIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJ1cGRhdGVVc2VyIiwidXBkYXRlcyIsInVwZGF0ZSIsImdldFNlc3Npb25CeUlkIiwic2Vzc2lvbklkIiwiY3JlYXRlU2Vzc2lvbiIsInNlc3Npb24iLCJpZCIsInVzZXJfaWQiLCJleHBpcmVzX2F0IiwiZXhwaXJlc0F0IiwiZGVsZXRlU2Vzc2lvbiIsImRlbGV0ZSIsImRlbGV0ZUV4cGlyZWRTZXNzaW9ucyIsImx0IiwiZ2V0QWdyZWVtZW50QnlJZCIsImFncmVlbWVudElkIiwiZ2V0QWdyZWVtZW50c0J5VXNlcklkIiwib3B0aW9ucyIsInF1ZXJ5Iiwib3IiLCJzdGF0dXMiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwiY3JlYXRlQWdyZWVtZW50IiwiYWdyZWVtZW50IiwidXBkYXRlQWdyZWVtZW50IiwiZ2V0SW52aXRlQnlUb2tlbiIsInRva2VuIiwiY3JlYXRlSW52aXRlIiwiaW52aXRlIiwiYWdyZWVtZW50X2lkIiwiYWNjZXB0SW52aXRlIiwiYWNjZXB0ZWRfYXQiLCJnZXRQYXltZW50c0J5QWdyZWVtZW50SWQiLCJjcmVhdGVQYXltZW50IiwicGF5bWVudCIsImdldEdyb3VwVGFiQnlJZCIsInRhYklkIiwiZ2V0R3JvdXBUYWJCeU1hZ2ljVG9rZW4iLCJtYWdpY1Rva2VuIiwiZ2V0R3JvdXBUYWJCeU93bmVyVG9rZW4iLCJvd25lclRva2VuIiwiZ2V0R3JvdXBUYWJzQnlVc2VySWQiLCJjcmVhdGVkVGFicyIsImNyZWF0ZWRFcnJvciIsInBhcnRpY2lwYW50RGF0YSIsInBhcnRpY2lwYW50RXJyb3IiLCJwYXJ0aWNpcGFudFRhYklkcyIsIm1hcCIsInAiLCJncm91cF90YWJfaWQiLCJsZW5ndGgiLCJwYXJ0aWNpcGF0ZWRUYWJzIiwiaW4iLCJub3QiLCJjcmVhdGVHcm91cFRhYiIsInRhYiIsInVwZGF0ZUdyb3VwVGFiIiwiZ2V0UGFydGljaXBhbnRzQnlUYWJJZCIsImdldFBhcnRpY2lwYW50QnlJZCIsInBhcnRpY2lwYW50SWQiLCJnZXRQYXJ0aWNpcGFudEJ5R3Vlc3RUb2tlbiIsImd1ZXN0VG9rZW4iLCJjcmVhdGVQYXJ0aWNpcGFudCIsInBhcnRpY2lwYW50Iiwiam9pbmVkX2F0IiwidXBkYXRlUGFydGljaXBhbnQiLCJnZXRQYXltZW50UmVwb3J0c0J5VGFiSWQiLCJjcmVhdGVQYXltZW50UmVwb3J0IiwicmVwb3J0IiwidXBkYXRlUGF5bWVudFJlcG9ydCIsInJlcG9ydElkIiwiZ2V0TWVzc2FnZXNCeVVzZXJJZCIsInVucmVhZE9ubHkiLCJpcyIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwibWFya01lc3NhZ2VBc1JlYWQiLCJtZXNzYWdlSWQiLCJyZWFkX2F0IiwibWFya0FsbE1lc3NhZ2VzQXNSZWFkIiwiZ2V0UmVtb3RlQ29uZmlnIiwiZ2V0UmVtb3RlQ29uZmlnQnlLZXkiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Froute&page=%2Fapi%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Froute.ts&appDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulsomers%2FDev%2Fpayfriends-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();