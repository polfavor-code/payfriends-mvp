(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{8824:function(e,t,s){Promise.resolve().then(s.bind(s,3378))},3145:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(8461),n=s.n(a)},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(2972),n=s.n(a)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},8461:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return l}});let a=s(7043),n=s(5346),r=s(5878),i=a._(s(5084));function l(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=r.Image},3378:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),n=s(2265),r=s(9376),i=s(7648),l=s(3145),c=s(7254);function o(){let e=(0,r.useParams)(),t=(0,r.useRouter)(),s=e.id,[o,x]=(0,n.useState)(null),[m,u]=(0,n.useState)([]),[p,h]=(0,n.useState)(!0),[f,b]=(0,n.useState)(""),[j,g]=(0,n.useState)(!1),[v,N]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),k=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/grouptabs/".concat(s)),t=await e.json();if(!e.ok){b(t.error||"Failed to load GroupTab"),h(!1);return}x(t.tab),u(t.participants||[]),h(!1)}catch(e){b("Failed to load GroupTab"),h(!1)}},[s]);(0,n.useEffect)(()=>{k()},[k]);let _=()=>o?o.invite_code?"".concat(window.location.origin,"/tab/").concat(o.invite_code):"".concat(window.location.origin,"/grouptabs/guest?token=").concat(o.magic_token):"",D=async()=>{let e=_();await navigator.clipboard.writeText(e),y(!0),setTimeout(()=>y(!1),2e3)},C=async()=>{if("share"in navigator)try{await navigator.share({title:(null==o?void 0:o.name)||"GroupTab",text:"Join my GroupTab: ".concat(null==o?void 0:o.name),url:_()})}catch(e){console.log("Share cancelled",e)}else D()};if(p)return(0,a.jsx)("div",{className:"max-w-[960px] mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-[3px] border-white/10 border-t-pf-accent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-pf-muted",children:"Loading GroupTab..."})]})});if(f||!o)return(0,a.jsx)("div",{className:"max-w-[960px] mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"❌"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-pf-muted mb-6",children:f||"GroupTab not found"}),(0,a.jsx)(i.default,{href:"/grouptabs",className:"btn-primary",children:"Back to GroupTabs"})]})});let P="gift_pot_target"===o.gift_mode||"gift_pot_open"===o.gift_mode||o.is_open_pot,S=o.total_amount_cents||0,T=o.paid_up_cents||0,F=o.amount_target||S,E=F-T,z=F>0?Math.min(100,Math.round(T/F*100)):0,M=S&&o.people_count?Math.round(S/o.people_count):0,B="closed"===o.status||F>0&&T>=F,O=o.payment_methods_json?JSON.parse(o.payment_methods_json):[],I=e=>{switch(e){case"bank":return"\uD83C\uDFE6";case"paypal":default:return"\uD83D\uDCB3";case"tikkie":return"\uD83D\uDCF1";case"cash":return"\uD83D\uDCB5"}},L=e=>{switch(e){case"bank":return"Bank Transfer";case"paypal":return"PayPal";case"tikkie":return"Tikkie";case"cash":return"Cash";default:return e}};return(0,a.jsxs)("div",{className:"max-w-[960px] mx-auto px-6 -mt-5 pb-32",children:[(0,a.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-2xl p-6 md:p-8 relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)(i.default,{href:"/grouptabs",className:"text-xl text-pf-text",children:"←"}),(0,a.jsx)("button",{onClick:()=>g(!0),className:"w-10 h-10 rounded-full border border-[#30363d] flex items-center justify-center text-pf-muted hover:border-pf-accent hover:text-pf-accent hover:bg-pf-accent/10 hover:scale-[1.08] transition-all",children:(0,a.jsx)("svg",{className:"w-[18px] h-[18px]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]}),(0,a.jsxs)("div",{className:"flex gap-5 items-center mb-4",children:[(0,a.jsx)("div",{className:"text-7xl flex-shrink-0",children:o.about_image_path?(0,a.jsx)(l.default,{src:o.about_image_path,alt:"",width:110,height:110,className:"w-[110px] h-[110px] rounded-xl object-cover"}):"gift"===o.template?P?"\uD83D\uDCB0":"\uD83C\uDF81":"restaurant"===o.template?"\uD83C\uDF7D️":"trip"===o.template?"✈️":"\uD83E\uDDFE"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-[26px] font-black text-white mb-1 leading-tight",children:o.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-pf-muted",children:[(0,a.jsxs)("span",{children:[o.people_count," people"]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsxs)("span",{className:"capitalize",children:[o.split_mode," split"]})]}),o.recipient_name&&(0,a.jsxs)("div",{className:"text-sm text-pf-muted mt-1",children:["For: ",(0,a.jsx)("span",{className:"text-pf-accent",children:o.recipient_name})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2.5 mb-6 flex-wrap",children:[(0,a.jsxs)("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2.5 bg-white/5 border border-white/10 rounded-[10px] text-pf-text text-sm font-medium hover:bg-white/10 hover:border-white/20 transition-all whitespace-nowrap",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE4"})," Invite"]}),(0,a.jsxs)("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-white/5 border border-white/10 rounded-[10px] text-pf-text text-sm font-medium hover:bg-white/10 hover:border-white/20 transition-all whitespace-nowrap",children:[(0,a.jsx)("span",{children:"\uD83D\uDCB3"})," Payment Info"]}),(0,a.jsxs)("button",{onClick:()=>t.push("/grouptabs/".concat(s,"/edit")),className:"flex items-center gap-2 px-4 py-2.5 bg-white/5 border border-white/10 rounded-[10px] text-pf-text text-sm font-medium hover:bg-white/10 hover:border-white/20 transition-all whitespace-nowrap",children:[(0,a.jsx)("span",{children:"✏️"})," Edit"]})]}),o.about_text&&(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-[20px] p-4 mb-6",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-pf-muted uppercase tracking-wider mb-2",children:"About"}),(0,a.jsx)("p",{className:"text-[15px] text-white font-bold",children:o.about_text}),o.about_link&&(0,a.jsx)("a",{href:o.about_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 mt-3 px-4 py-2 bg-pf-accent/10 border border-pf-accent/30 rounded-lg text-pf-accent text-sm font-medium hover:bg-pf-accent/20 transition-colors",children:"\uD83D\uDD17 View Product"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-7 mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[9px] font-semibold text-pf-muted uppercase tracking-wider mb-0.5",children:P?"Raised":"Paid"}),(0,a.jsx)("div",{className:"text-[28px] font-bold text-pf-accent",children:(0,c.Sn)(T)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-[9px] font-semibold text-pf-muted uppercase tracking-wider mb-0.5",children:P?o.is_open_pot?"Open Pot":"Target":"Total"}),(0,a.jsx)("div",{className:"text-[28px] font-bold text-pf-text",children:o.is_open_pot?"∞":(0,c.Sn)(F)})]})]}),!o.is_open_pot&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs text-pf-muted mb-1",children:[(0,a.jsxs)("span",{children:[z,"% ",P?"raised":"paid"]}),!P&&E>0&&(0,a.jsxs)("span",{children:[(0,c.Sn)(E)," remaining"]})]}),(0,a.jsx)("div",{className:"h-2 bg-white/[0.06] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(B?"bg-[#818cf8]":"bg-pf-accent"),style:{width:"".concat(z,"%")}})})]}),(0,a.jsx)("div",{className:"pt-4 mt-4 border-t border-white/[0.06] text-center text-sm",children:B?(0,a.jsx)("span",{className:"text-[#818cf8] font-medium",children:"✓ Settled"}):(0,a.jsxs)("span",{className:"text-pf-muted",children:[m.length," of ",o.people_count," joined",M>0&&" \xb7 ".concat((0,c.Sn)(M)," per person")]})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-pf-text",children:"Participants"}),(0,a.jsxs)("span",{className:"text-sm text-pf-muted",children:[m.length,"/",o.people_count]})]}),0===m.length?(0,a.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-2xl p-8 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-3 opacity-40",children:"\uD83D\uDC65"}),(0,a.jsx)("p",{className:"text-pf-muted mb-4",children:"No one has joined yet"}),(0,a.jsx)("button",{onClick:C,className:"inline-flex items-center gap-2 px-6 py-3 bg-pf-accent text-pf-bg rounded-xl font-semibold hover:-translate-y-0.5 hover:shadow-[0_4px_16px_rgba(61,220,151,0.3)] transition-all",children:"\uD83D\uDCE4 Share Invite Link"})]}):(0,a.jsx)("div",{className:"space-y-3",children:m.map(e=>{var t,s;let n=e.fair_share_cents||M,r=n>0?Math.min(100,Math.round(e.total_paid_cents/n*100)):0,i=e.total_paid_cents>=n;return(0,a.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-2xl p-4 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ".concat(i?"bg-pf-accent/20 text-pf-accent":"bg-white/10 text-pf-text"),children:(e.guest_name||(null===(t=e.user)||void 0===t?void 0:t.full_name)||"?")[0].toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-semibold text-pf-text truncate",children:e.guest_name||(null===(s=e.user)||void 0===s?void 0:s.full_name)||"Unknown"}),"host"===e.role&&(0,a.jsx)("span",{className:"text-[10px] font-semibold text-pf-bg bg-pf-accent px-2 py-0.5 rounded-full",children:"HOST"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-1.5 bg-white/[0.06] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full ".concat(i?"bg-pf-accent":"bg-[#f59e0b]"),style:{width:"".concat(r,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-pf-muted whitespace-nowrap",children:i?"✓":"".concat((0,c.Sn)(e.total_paid_cents)," / ").concat((0,c.Sn)(n))})]})]})]},e.id)})})]}),O.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-pf-text mb-4",children:"Payment Methods"}),(0,a.jsx)("div",{className:"space-y-3",children:O.map((e,t)=>(0,a.jsx)(d,{method:e},t))})]}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-[#161b22]/95 backdrop-blur-lg border-t border-[#30363d] px-4 py-3 z-50",children:(0,a.jsxs)("div",{className:"max-w-[960px] mx-auto flex items-center justify-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>g(!0),className:"w-12 h-12 rounded-full border border-[#30363d] flex items-center justify-center text-pf-muted hover:border-pf-accent hover:text-pf-accent hover:bg-pf-accent/10 transition-all",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),(0,a.jsx)("button",{onClick:()=>N(!0),className:"flex-1 max-w-[200px] py-3 bg-[#f59e0b] text-pf-bg rounded-xl font-bold text-sm hover:bg-[#fbbf24] transition-colors",children:"Report Payment"}),(0,a.jsx)("button",{className:"flex-1 max-w-[200px] py-3 bg-pf-accent text-pf-bg rounded-xl font-bold text-sm hover:bg-[#4ade80] transition-colors",children:"Mark as Paid"})]})}),j&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/90 z-[1000] flex items-center justify-center p-4",onClick:()=>g(!1),children:(0,a.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-2xl p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Share Tab"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"text-2xl text-pf-muted hover:text-pf-text",children:"\xd7"})]}),(0,a.jsx)("p",{className:"text-sm text-pf-muted mb-4",children:"Share this link with friends to let them join the tab"}),(0,a.jsx)("div",{className:"bg-black/30 border border-[#30363d] rounded-xl p-3 mb-4 break-all text-sm text-pf-text",children:_()}),(0,a.jsx)("button",{onClick:D,className:"w-full py-3.5 bg-pf-accent text-pf-bg rounded-xl font-bold hover:bg-[#4ade80] transition-colors",children:w?"✓ Copied!":"Copy Link"}),"share"in navigator&&(0,a.jsx)("button",{onClick:C,className:"w-full py-3.5 mt-3 bg-white/5 border border-white/10 text-pf-text rounded-xl font-semibold hover:bg-white/10 transition-colors",children:"Share via..."})]})}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/90 z-[1000] flex items-end sm:items-center justify-center",onClick:()=>N(!1),children:(0,a.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-t-2xl sm:rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Payment Methods"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"text-2xl text-pf-muted hover:text-pf-text",children:"\xd7"})]}),0===O.length?(0,a.jsx)("p",{className:"text-center text-pf-muted py-8",children:"No payment methods configured"}):(0,a.jsx)("div",{className:"space-y-4",children:O.map((e,t)=>(0,a.jsxs)("div",{className:"bg-black/20 border border-[#30363d] rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:I(e.type)}),(0,a.jsx)("span",{className:"font-semibold",children:L(e.type)})]}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(e.details).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-pf-muted capitalize",children:t.replace(/([A-Z])/g," $1")}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-pf-text",children:s}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(s),className:"px-2 py-1 text-xs border border-[#30363d] rounded text-pf-muted hover:border-pf-accent hover:text-pf-accent transition-colors",children:"Copy"})]})]},t)})})]},t))})]})})]})}function d(e){let{method:t}=e,[s,r]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-xl overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>r(!s),className:"w-full flex items-center justify-between p-4 hover:bg-white/[0.02] transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"bank":return"\uD83C\uDFE6";case"paypal":default:return"\uD83D\uDCB3";case"tikkie":return"\uD83D\uDCF1";case"cash":return"\uD83D\uDCB5"}})(t.type)}),(0,a.jsx)("span",{className:"font-semibold text-pf-text",children:(e=>{switch(e){case"bank":return"Bank Transfer";case"paypal":return"PayPal";case"tikkie":return"Tikkie";case"cash":return"Cash";default:return e}})(t.type)})]}),(0,a.jsx)("span",{className:"text-xs text-pf-muted transition-transform ".concat(s?"rotate-180":""),children:"▼"})]}),s&&(0,a.jsx)("div",{className:"border-t border-white/5 px-4 pb-4",children:Object.entries(t.details).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-white/5 last:border-0",children:[(0,a.jsx)("span",{className:"text-xs text-pf-muted capitalize",children:t.replace(/([A-Z])/g," $1")}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-pf-text font-medium",children:s}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(s),className:"px-2.5 py-1.5 text-xs border border-[#30363d] rounded-md text-pf-muted hover:border-pf-accent hover:text-pf-accent transition-colors",children:"Copy"})]})]},t)})})]})}},7254:function(e,t,s){"use strict";s.d(t,{Sn:function(){return r},p6:function(){return i},tV:function(){return n}});let a="nl-NL";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round((null!=e?e:0)/100))}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format((null!=e?e:0)/100)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(s)}}},function(e){e.O(0,[972,878,971,117,744],function(){return e(e.s=8824)}),_N_E=e.O()}]);