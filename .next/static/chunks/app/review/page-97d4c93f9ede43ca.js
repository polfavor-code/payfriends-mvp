(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{3466:function(e,t,n){Promise.resolve().then(n.bind(n,940))},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(2972),r=n.n(a)},9376:function(e,t,n){"use strict";var a=n(5475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},940:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var a=n(7437),r=n(2265),s=n(9376),i=n(7648),l=n(2834),c=n(7254);function o(){var e;let t=(0,s.useSearchParams)(),n=(0,s.useRouter)(),o=t.get("token"),[u,m]=(0,r.useState)(null),[x,f]=(0,r.useState)(!0),[h,p]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!o){p("No invite token provided"),f(!1);return}j()},[o]);let j=async()=>{try{let e=await fetch("/api/agreements/invite?token=".concat(o)),t=await e.json();if(!e.ok){p(t.error||"Invalid or expired invite"),f(!1);return}m(t.invite),f(!1)}catch(e){p("Failed to load invite details"),f(!1)}},b=async()=>{y(!0);try{let e=await fetch("/api/agreements/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})});if(!e.ok){let t=await e.json();p(t.error||"Failed to accept invite"),y(!1);return}n.push("/dashboard?accepted=true")}catch(e){p("Failed to accept invite"),y(!1)}};if(x)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-pf-muted",children:"Loading invite details..."})]})});if(h||!(null==u?void 0:u.agreement))return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"card p-8 max-w-md text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"❌"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Invalid Invite"}),(0,a.jsx)("p",{className:"text-pf-muted mb-6",children:h||"This invite link is invalid or has expired."}),(0,a.jsx)(i.default,{href:"/login",className:"btn-primary",children:"Go to Login"})]})}),(0,a.jsx)(l.Footer,{})]});let{agreement:N}=u;return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsxs)("main",{className:"flex-1 container-pf max-w-2xl",children:[(0,a.jsx)("header",{className:"text-center mb-8",children:(0,a.jsx)(i.default,{href:"/",className:"text-2xl font-bold text-pf-accent no-underline",children:"PayFriends"})}),(0,a.jsxs)("div",{className:"card p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Loan Agreement Review"}),(0,a.jsxs)("p",{className:"text-pf-muted mb-8",children:[N.lenderName," has invited you to review this loan agreement"]}),(0,a.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,a.jsx)(d,{label:"From",value:N.lenderName}),(0,a.jsx)(d,{label:"To",value:u.email}),(0,a.jsx)(d,{label:"Amount",value:(0,c.Sn)(N.amountCents)}),null!==N.interestRate&&N.interestRate>0&&(0,a.jsx)(d,{label:"Interest Rate",value:"".concat(N.interestRate,"% per year")}),(0,a.jsx)(d,{label:"Repayment Type",value:"one_time"===N.repaymentType?"One-time payment":"Installments"}),"installments"===N.repaymentType&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{label:"Number of Installments",value:"".concat(N.installmentCount||"—")}),(0,a.jsx)(d,{label:"Payment Frequency",value:(e=N.paymentFrequency)?({weekly:"Weekly",biweekly:"Every 2 weeks",monthly:"Monthly",quarterly:"Every 3 months",yearly:"Yearly"})[e]||e:"—"})]}),(0,a.jsx)(d,{label:"Due Date",value:(0,c.p6)(N.dueDate)}),N.description&&(0,a.jsx)(d,{label:"Description",value:N.description})]}),u.accepted?(0,a.jsx)("div",{className:"bg-green-900/20 border border-green-900/50 rounded-pf p-4 mb-8",children:(0,a.jsx)("p",{className:"text-green-400 font-medium",children:"✓ This agreement has been accepted"})}):"pending"!==N.status?(0,a.jsx)("div",{className:"bg-pf-warning-bg border border-pf-warning-border rounded-pf p-4 mb-8",children:(0,a.jsx)("p",{className:"text-pf-warning-ink font-medium",children:"This agreement is no longer pending"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-pf-muted",children:"By accepting, you agree to repay the loan according to the terms above. You can track payments in your PayFriends dashboard."}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:b,disabled:v,className:"btn-primary flex-1",children:v?"Accepting...":"Accept Agreement"}),(0,a.jsx)(i.default,{href:"/login",className:"btn-secondary flex-1 text-center",children:"Login First"})]})]})]})]}),(0,a.jsx)(l.Footer,{})]})}function d(e){let{label:t,value:n}=e;return(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b border-pf-card-border",children:[(0,a.jsx)("span",{className:"text-pf-muted",children:t}),(0,a.jsx)("span",{className:"font-medium",children:n})]})}},2834:function(e,t,n){"use strict";n.d(t,{Footer:function(){return s}});var a=n(7437),r=n(7648);function s(){let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"mt-auto py-6 text-center text-pf-muted text-sm border-t border-pf-card-border",children:(0,a.jsxs)("div",{className:"container-pf",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-x-6 gap-y-2 mb-4",children:[(0,a.jsx)(r.default,{href:"/features",className:"hover:text-pf-text transition-colors",children:"Features"}),(0,a.jsx)(r.default,{href:"/faq",className:"hover:text-pf-text transition-colors",children:"FAQ"}),(0,a.jsx)(r.default,{href:"/legal/terms",className:"hover:text-pf-text transition-colors",children:"Terms"}),(0,a.jsx)(r.default,{href:"/legal/privacy",className:"hover:text-pf-text transition-colors",children:"Privacy"}),(0,a.jsx)(r.default,{href:"/legal/about",className:"hover:text-pf-text transition-colors",children:"About"})]}),(0,a.jsxs)("p",{className:"text-pf-muted/70",children:["\xa9 ",e," PayFriends. All rights reserved."]})]})})}},7254:function(e,t,n){"use strict";n.d(t,{Sn:function(){return s},p6:function(){return i},tV:function(){return r}});let a="nl-NL";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round((null!=e?e:0)/100))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format((null!=e?e:0)/100)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(n)}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=3466)}),_N_E=e.O()}]);