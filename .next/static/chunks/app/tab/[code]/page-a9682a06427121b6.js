(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{2313:function(e,t,a){Promise.resolve().then(a.bind(a,649))},649:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7437),n=a(29),r=a.n(n),l=a(2265),i=a(9376),c=a(3145),d=a(7254);function o(){let e=(0,i.useParams)().code,[t,a]=(0,l.useState)(null),[n,o]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0),[f,u]=(0,l.useState)(""),[b,h]=(0,l.useState)(!1),[j,g]=(0,l.useState)(""),[N,y]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[_,k]=(0,l.useState)(""),[D,C]=(0,l.useState)(null),[S,F]=(0,l.useState)(!1),[P,T]=(0,l.useState)(!1),[z,I]=(0,l.useState)(""),[O,E]=(0,l.useState)(!1),B=(0,l.useCallback)(async()=>{try{let s=await fetch("/api/grouptabs/invite/".concat(e)),n=await s.json();if(!s.ok){u(n.error||"Tab not found"),p(!1);return}a(n.tab),o(n.participants||[]);let r=localStorage.getItem("tab_session_".concat(e));if(r){var t;let e=null===(t=n.participants)||void 0===t?void 0:t.find(e=>e.guest_session_token===r);e&&(C(e),h(!0))}p(!1)}catch(e){u("Failed to load tab"),p(!1)}},[e]);(0,l.useEffect)(()=>{B()},[B]);let J=async()=>{if(!j.trim()){k("Please enter your name");return}w(!0),k("");try{let t=await fetch("/api/grouptabs/invite/".concat(e,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.trim(),isPrivate:N})}),a=await t.json();if(!t.ok){k(a.error||"Failed to join"),w(!1);return}a.sessionToken&&localStorage.setItem("tab_session_".concat(e),a.sessionToken),C(a.participant),h(!0),w(!1),B()}catch(e){k("Failed to join tab"),w(!1)}},M=async()=>{let t=Math.round(100*parseFloat(z));if(!isNaN(t)&&!(t<=0)){E(!0);try{let a=localStorage.getItem("tab_session_".concat(e));(await fetch("/api/grouptabs/invite/".concat(e,"/report"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amountCents:t,sessionToken:a})})).ok&&(T(!1),I(""),B())}catch(e){}E(!1)}};if(m)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-[#1a2233] to-[#0a0c10] flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-[3px] border-white/10 border-t-pf-accent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-pf-muted",children:"Loading..."})]})});if(f||!t)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-[#1a2233] to-[#0a0c10] flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDD17"}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Tab Not Found"}),(0,s.jsx)("p",{className:"text-pf-muted",children:f||"This invite link may have expired or been removed."})]})});let U="gift_pot_target"===t.gift_mode||"gift_pot_open"===t.gift_mode||t.is_open_pot,H=t.total_amount_cents||0,R=t.paid_up_cents||0,Y=t.amount_target||H,A=Y>0?Math.min(100,Math.round(R/Y*100)):0,L=H&&t.people_count?Math.round(H/t.people_count):0,V=t.payment_methods_json?JSON.parse(t.payment_methods_json):[],Z=()=>"gift"===t.template?U?"\uD83D\uDCB0":"\uD83C\uDF81":"restaurant"===t.template?"\uD83C\uDF7D️":"\uD83E\uDDFE";return b?(0,s.jsxs)("div",{className:"min-h-screen bg-[#0e1116] pb-32",children:[(0,s.jsx)("div",{className:"bg-[#161b22] border-b border-[#30363d] p-6",children:(0,s.jsxs)("div",{className:"max-w-[600px] mx-auto",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center mb-4",children:[(0,s.jsx)("div",{className:"text-5xl flex-shrink-0",children:t.about_image_path?(0,s.jsx)(c.default,{src:t.about_image_path,alt:"",width:72,height:72,className:"w-[72px] h-[72px] rounded-xl object-cover"}):Z()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h1",{className:"text-xl font-black text-white mb-0.5 truncate",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-pf-muted",children:["By ",t.creator_name||"someone"," \xb7 ",n.length,"/",t.people_count," joined"]}),t.recipient_name&&(0,s.jsxs)("p",{className:"text-sm text-pf-muted mt-0.5",children:["For: ",(0,s.jsx)("span",{className:"text-pf-accent",children:t.recipient_name})]})]})]}),t.about_text&&(0,s.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-3 mb-4",children:[(0,s.jsx)("p",{className:"text-sm text-white",children:t.about_text}),t.about_link&&(0,s.jsx)("a",{href:t.about_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-sm text-pf-accent hover:underline",children:"\uD83D\uDD17 View Product"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[10px] font-semibold text-pf-muted uppercase mb-0.5",children:U?"Raised":"Paid"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-pf-accent",children:(0,d.Sn)(R)})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-[10px] font-semibold text-pf-muted uppercase mb-0.5",children:U?"Target":"Total"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,d.Sn)(Y)})]})]}),(0,s.jsx)("div",{className:"h-2 bg-white/[0.06] rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-pf-accent rounded-full transition-all duration-500",style:{width:"".concat(A,"%")}})}),(0,s.jsxs)("div",{className:"text-center text-xs text-pf-muted mt-2",children:[A,"% complete"]})]})}),D&&(0,s.jsx)("div",{className:"max-w-[600px] mx-auto px-4 mt-6",children:(0,s.jsx)("div",{className:"bg-pf-accent/10 border border-pf-accent/30 rounded-2xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-pf-accent/20 flex items-center justify-center text-lg font-bold text-pf-accent",children:(D.guest_name||"You")[0].toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-white",children:D.guest_name||"You"}),(0,s.jsx)("p",{className:"text-xs text-pf-muted",children:D.total_paid_cents>0?"".concat((0,d.Sn)(D.total_paid_cents)," contributed"):"Not paid yet"})]})]}),D.total_paid_cents>=(D.fair_share_cents||L)?(0,s.jsx)("span",{className:"px-3 py-1.5 bg-pf-accent text-pf-bg rounded-full text-xs font-bold",children:"✓ Paid"}):(0,s.jsx)("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-pf-accent text-pf-bg rounded-xl text-sm font-bold hover:bg-[#4ade80] transition-colors",children:"I've Paid"})]})})}),(0,s.jsxs)("div",{className:"max-w-[600px] mx-auto px-4 mt-6",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-pf-muted uppercase tracking-wider mb-3",children:"Participants"}),(0,s.jsx)("div",{className:"space-y-2",children:n.map(e=>{var t,a;let n=e.total_paid_cents>=(e.fair_share_cents||L);return(0,s.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-xl p-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold ".concat(n?"bg-pf-accent/20 text-pf-accent":"bg-white/10 text-pf-text"),children:(e.guest_name||(null===(t=e.user)||void 0===t?void 0:t.full_name)||"?")[0].toUpperCase()}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)("p",{className:"font-medium text-sm truncate",children:[e.guest_name||(null===(a=e.user)||void 0===a?void 0:a.full_name)||"Anonymous","host"===e.role&&(0,s.jsx)("span",{className:"text-[10px] text-pf-accent ml-1.5",children:"HOST"})]})}),n?(0,s.jsx)("span",{className:"text-pf-accent text-xs font-medium",children:"✓ Paid"}):(0,s.jsx)("span",{className:"text-pf-muted text-xs",children:"Pending"})]},e.id)})})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-[#161b22]/95 backdrop-blur-lg border-t border-[#30363d] px-4 py-4 z-50",children:(0,s.jsxs)("div",{className:"max-w-[600px] mx-auto flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>F(!0),className:"flex-1 py-3.5 bg-white/5 border border-white/10 text-white rounded-xl font-semibold hover:bg-white/10 transition-colors",children:"\uD83D\uDCB3 How to Pay"}),!D||D.total_paid_cents<(D.fair_share_cents||L)?(0,s.jsx)("button",{onClick:()=>T(!0),className:"flex-1 py-3.5 bg-pf-accent text-pf-bg rounded-xl font-bold hover:bg-[#4ade80] transition-colors",children:"I've Paid"}):null]})}),S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/90 z-[1000] flex items-end sm:items-center justify-center",onClick:()=>F(!1),children:(0,s.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-t-2xl sm:rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-bold",children:"How to Pay"}),(0,s.jsx)("button",{onClick:()=>F(!1),className:"text-2xl text-pf-muted hover:text-pf-text",children:"\xd7"})]}),L>0&&(0,s.jsxs)("p",{className:"text-sm text-pf-muted mb-4",children:["Pay ",(0,s.jsx)("span",{className:"text-pf-accent font-semibold",children:(0,d.Sn)(L)})," to ",t.creator_name||"the organizer"]}),0===V.length?(0,s.jsxs)("div",{className:"text-center py-8 text-pf-muted",children:[(0,s.jsx)("span",{className:"text-4xl block mb-3",children:"\uD83D\uDCB3"}),(0,s.jsx)("p",{children:"Payment details not added yet."}),(0,s.jsx)("p",{className:"text-sm",children:"Contact the organizer for payment instructions."})]}):(0,s.jsx)("div",{className:"space-y-3",children:V.map((e,t)=>(0,s.jsx)(x,{method:e},t))})]})}),P&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/90 z-[1000] flex items-end sm:items-center justify-center",onClick:()=>T(!1),children:(0,s.jsxs)("div",{className:"bg-[#161b22] border border-[#30363d] rounded-t-2xl sm:rounded-2xl p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold",children:"Report Payment"}),(0,s.jsx)("button",{onClick:()=>T(!1),className:"text-2xl text-pf-muted hover:text-pf-text",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-xs text-pf-muted uppercase tracking-wider mb-2",children:"Amount Paid"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-white/5 border border-[#30363d] rounded-xl px-4 py-3",children:[(0,s.jsx)("span",{className:"text-pf-muted",children:"€"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:z,onChange:e=>I(e.target.value),placeholder:"0.00",className:"flex-1 bg-transparent text-white text-lg outline-none"})]}),L>0&&(0,s.jsxs)("button",{onClick:()=>I((L/100).toFixed(2)),className:"mt-2 px-3 py-1.5 bg-pf-accent/10 border border-pf-accent rounded-full text-pf-accent text-xs font-semibold hover:bg-pf-accent/20 transition-colors",children:["Use fair share: ",(0,d.Sn)(L)]})]}),(0,s.jsx)("button",{onClick:M,disabled:O||!z,className:"w-full py-4 bg-pf-accent text-pf-bg rounded-xl font-bold text-base hover:bg-[#4ade80] transition-colors disabled:opacity-50",children:O?"Submitting...":"Submit Payment"}),(0,s.jsx)("p",{className:"text-xs text-pf-muted text-center mt-3",children:"The organizer will confirm your payment"})]})})]}):(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 min-h-screen bg-gradient-to-b from-[#1a2233] to-[#0a0c10] flex items-center justify-center px-4 py-6",children:[(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 w-full max-w-[400px] animate-[joinFadeIn_0.6s_ease-out]",children:[(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 flex items-center gap-4 mb-12",children:[(0,s.jsx)("div",{className:"jsx-ac4fd4b620d40a30 w-14 h-14 rounded-[18px] bg-gradient-to-br from-pf-accent/20 to-pf-accent/5 border border-white/10 flex items-center justify-center text-xl shadow-lg",children:t.about_image_path?(0,s.jsx)(c.default,{src:t.about_image_path,alt:"",width:56,height:56,className:"w-full h-full object-cover rounded-[18px]"}):Z()}),(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30",children:[(0,s.jsx)("h2",{className:"jsx-ac4fd4b620d40a30 text-[22px] font-bold text-white tracking-tight mb-1",children:t.name}),(0,s.jsxs)("p",{className:"jsx-ac4fd4b620d40a30 text-sm text-pf-muted",children:["Organized by ",(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30 text-pf-accent font-medium",children:t.creator_name||"someone"})]})]})]}),(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 mb-12",children:[(0,s.jsx)("label",{className:"jsx-ac4fd4b620d40a30 block text-xs font-semibold text-pf-muted uppercase tracking-wider mb-3",children:"Your Name"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>g(e.target.value),placeholder:"Enter your name",maxLength:50,autoFocus:!0,className:"jsx-ac4fd4b620d40a30 w-full bg-transparent border-b-2 border-white/15 focus:border-pf-accent py-3.5 text-lg text-white placeholder:text-white/25 outline-none transition-colors"}),(0,s.jsxs)("label",{className:"jsx-ac4fd4b620d40a30 flex items-start gap-2.5 mt-4 cursor-pointer select-none",children:[(0,s.jsx)("input",{type:"checkbox",checked:N,onChange:e=>y(e.target.checked),className:"jsx-ac4fd4b620d40a30 hidden"}),(0,s.jsx)("div",{className:"jsx-ac4fd4b620d40a30 "+"w-[18px] h-[18px] mt-0.5 rounded border-2 flex items-center justify-center transition-all ".concat(N?"bg-pf-accent border-pf-accent":"border-white/20"),children:N&&(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30 text-[11px] text-black font-bold",children:"✓"})}),(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30",children:[(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30 text-[13px] text-white/70 font-medium",children:"Hide my name from others"}),(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30 block text-[11px] text-white/35",children:"Only the organizer will see your name"})]})]})]}),L>0&&(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 mb-12",children:[(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 flex justify-between items-baseline mb-5",children:[(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30 text-[15px] font-semibold text-white",children:"Your share"}),(0,s.jsxs)("span",{className:"jsx-ac4fd4b620d40a30 text-sm text-pf-muted",children:[t.split_mode," split"]})]}),(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 bg-white/[0.025] border border-white/[0.06] rounded-[20px] p-[18px] flex items-center gap-4",children:[(0,s.jsx)("div",{className:"jsx-ac4fd4b620d40a30 w-[52px] h-[52px] bg-black/30 rounded-[14px] flex items-center justify-center text-[28px]",children:"\uD83D\uDCB5"}),(0,s.jsxs)("div",{className:"jsx-ac4fd4b620d40a30 flex-1",children:[(0,s.jsx)("h3",{className:"jsx-ac4fd4b620d40a30 text-base font-semibold text-white mb-1",children:(0,d.Sn)(L)}),(0,s.jsxs)("p",{className:"jsx-ac4fd4b620d40a30 text-[13px] text-pf-muted",children:[t.people_count," people \xb7 ",(0,d.Sn)(H)," total"]})]})]})]}),_&&(0,s.jsx)("div",{className:"jsx-ac4fd4b620d40a30 text-red-400 text-sm text-center mb-4 px-3 py-2 bg-red-500/10 rounded-xl",children:_}),(0,s.jsxs)("button",{onClick:J,disabled:v||!j.trim(),className:"jsx-ac4fd4b620d40a30 w-full bg-white text-[#0e1116] py-5 px-8 rounded-full text-base font-bold shadow-[0_4px_24px_rgba(255,255,255,0.1)] flex justify-between items-center hover:bg-[#f5f5f5] hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30",children:v?"Joining...":"Join Tab"}),(0,s.jsx)("span",{className:"jsx-ac4fd4b620d40a30 text-xl",children:"→"})]})]}),(0,s.jsx)(r(),{id:"ac4fd4b620d40a30",children:"@-webkit-keyframes joinFadeIn{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes joinFadeIn{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes joinFadeIn{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes joinFadeIn{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})}function x(e){let{method:t}=e,[a,n]=(0,l.useState)(!0);return(0,s.jsxs)("div",{className:"bg-black/20 border border-[#30363d] rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>n(!a),className:"w-full flex items-center justify-between p-4 hover:bg-white/[0.02] transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:{bank:"\uD83C\uDFE6",paypal:"\uD83D\uDCB3",tikkie:"\uD83D\uDCF1",cash:"\uD83D\uDCB5"}[t.type]||"\uD83D\uDCB3"}),(0,s.jsx)("span",{className:"font-semibold text-pf-text",children:{bank:"Bank Transfer",paypal:"PayPal",tikkie:"Tikkie",cash:"Cash"}[t.type]||t.type})]}),(0,s.jsx)("span",{className:"text-xs text-pf-muted transition-transform ".concat(a?"rotate-180":""),children:"▼"})]}),a&&(0,s.jsxs)("div",{className:"border-t border-white/5 px-4 pb-4",children:[Object.entries(t.details).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center py-2.5 border-b border-white/5 last:border-0",children:[(0,s.jsx)("span",{className:"text-xs text-pf-muted capitalize",children:t.replace(/([A-Z])/g," $1")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-pf-text",children:a}),(0,s.jsx)("button",{onClick:()=>navigator.clipboard.writeText(a),className:"px-2 py-1 text-xs border border-[#30363d] rounded text-pf-muted hover:border-pf-accent hover:text-pf-accent transition-colors",children:"Copy"})]})]},t)}),"tikkie"===t.type&&t.details.link&&(0,s.jsx)("a",{href:t.details.link,target:"_blank",rel:"noopener noreferrer",className:"block mt-3 text-center py-3 bg-pf-accent text-pf-bg rounded-lg font-semibold hover:bg-[#4ade80] transition-colors",children:"Open Tikkie →"})]})]})}},7254:function(e,t,a){"use strict";a.d(t,{Sn:function(){return r},p6:function(){return l},tV:function(){return n}});let s="nl-NL";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round((null!=e?e:0)/100))}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return new Intl.NumberFormat(t,{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format((null!=e?e:0)/100)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,a="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(a)}}},function(e){e.O(0,[878,109,971,117,744],function(){return e(e.s=2313)}),_N_E=e.O()}]);