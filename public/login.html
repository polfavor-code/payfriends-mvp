<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PayFriends — Login</title>
  <style>
    :root{
      --bg:#0e1116; --card:#151a21; --text:#e6eef6; --muted:#a7b0bd; --accent:#3ddc97;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Arial,sans-serif; background:var(--bg); color:var(--text);}
    .container{max-width:500px;margin:0 auto;padding:64px 16px;}
    .header{margin-bottom:32px; text-align:center}

    /* Two-column layout for desktop */
    @media (min-width: 900px) {
      body{display:flex;align-items:center;justify-content:center;min-height:100vh;}
      .page-wrapper{display:flex;flex-direction:column;max-width:1200px;width:100%;gap:32px;padding:32px;}
      .right-column{max-width:500px;margin:0 auto;}
      .container{max-width:none;padding:0;margin:0;}
    }

    /* ===== Auth Hero (Logo + Text) ===== */
    .auth-hero {
      padding: clamp(20px, 4vw, 36px) 0 8px;
    }

    .auth-hero__inner {
      display: grid;
      grid-template-columns: auto 1fr;
      align-items: center;
      gap: clamp(16px, 3vw, 32px);
    .left-logo-section{margin-bottom:32px}
    .left-logo-section img{height:56px;width:auto;margin-bottom:12px}
    .left-tagline{font-size:28px;font-weight:700;margin:16px 0 24px 0;line-height:1.2}
    .left-features{list-style:none;padding:0;margin:0;font-size:14px;color:var(--muted)}
    .left-features li{margin:12px 0;line-height:1.5}

    /* Mobile: show left content above form */
    .mobile-left-content{display:block;margin-bottom:32px;text-align:center}
    .mobile-left-content .left-logo-section img{height:48px}
    .mobile-left-content .left-tagline{font-size:20px;margin:12px 0 16px 0}
    .mobile-left-content .left-features{font-size:13px}
    .mobile-left-content .left-features li{margin:8px 0}
    /* Horizontal layout: logo beside text block */
    .left-hero-section{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:48px;margin-bottom:32px}
    .left-hero-section img{width:144px;height:144px;flex-shrink:0;user-select:none;-webkit-user-drag:none;pointer-events:none}
    @media (min-width: 1200px) {
      .left-hero-section img{width:160px;height:160px}
    }

    .auth-hero__logo {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .auth-hero__logo-img {
      width: clamp(140px, 16vw, 220px);
      height: auto;
      /* soften edges without blur */
      border-radius: 12px;
      /* no drop shadow to keep it clean; add if desired */
    }

    .auth-hero__textcol {
      max-width: clamp(520px, 52vw, 760px);
    }

    .auth-hero__title {
      margin: 0 0 clamp(8px, 1.2vw, 12px);
      font-weight: 700;
      line-height: 1.1;
      /* Large headline to match your screenshot proportion */
      font-size: clamp(32px, 4.2vw, 56px);
      color: #e6e6e6; /* bright on dark background */
    }

    .auth-hero__intro {
      margin: 0 0 clamp(12px, 1.6vw, 16px);
      font-size: clamp(15px, 1.2vw, 18px);
      line-height: 1.6;
      color: #a7adb3; /* muted foreground tone used elsewhere */
      max-width: 48ch; /* keeps paragraph readable width */
    }

    .auth-hero__bullets {
      margin: 0;
      padding-left: 1.1em;
      list-style: disc;
      color: #a7adb3;
      /* Slightly smaller so bullets fit comfortably below the intro text */
      font-size: clamp(13.5px, 1vw, 15.5px);
      line-height: 1.5;
    }

    .auth-hero__bullets li + li {
      margin-top: 6px;
    }

    /* Responsive: stack on small screens */
    @media (max-width: 900px) {
      .auth-hero__inner {
        grid-template-columns: 1fr;
        align-items: start;
      }

      .auth-hero__logo {
        justify-content: start;
      }

      .auth-hero__logo-img {
        width: clamp(120px, 26vw, 180px);
      }

      .auth-hero__textcol {
        max-width: 100%;
      }
    }
    h1{margin:0 0 8px 0;font-size:32px}
    .tagline{color:var(--muted)}
    .card{background:var(--card);border:1px solid rgba(255,255,255,0.06);border-radius:16px;padding:24px;margin:24px 0}
    .row{margin:16px 0}
    .row label{display:block; margin-bottom:6px; color:var(--muted); font-size:14px}
    .row input{width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.08); background:#10151d; color:var(--text); font-size:15px}
    .row input:focus{outline:none; border-color:var(--accent); background:#10151d}
    .row input:hover{background:#10151d}
    .row input:-webkit-autofill,
    .row input:-webkit-autofill:hover,
    .row input:-webkit-autofill:focus,
    .row input:-webkit-autofill:active{
      -webkit-background-clip:text;
      -webkit-text-fill-color:var(--text);
      transition:background-color 5000s ease-in-out 0s;
      box-shadow:inset 0 0 20px 20px #10151d;
    }
    button{width:100%; padding:12px;border-radius:10px;border:0;background:var(--accent);color:#0d130f;font-weight:700; cursor:pointer; font-size:15px; margin-top:8px}
    button:hover{filter:brightness(1.06)}
    .status{color:var(--muted); margin-top:12px; min-height:1.2em; font-size:14px;}
    .error{color:#ff6b6b}
    .tabs{display:flex; gap:8px; margin-bottom:20px; border-bottom:1px solid rgba(255,255,255,0.08); padding-bottom:0}
    .tab{padding:12px 16px; cursor:pointer; color:var(--muted); border-bottom:2px solid transparent; margin-bottom:-1px}
    .tab.active{color:var(--accent); border-bottom-color:var(--accent)}
    .tab:hover{color:var(--text)}
    .form-section{display:none}
    .form-section.active{display:block}
    .footer{margin-top:32px; text-align:center; color:var(--muted); font-size:12px;}
  </style>
</head>
<body>
  <div class="page-wrapper">
    <!-- Auth Hero Header (Logo + Text) -->
    <section class="auth-hero">
      <div class="auth-hero__inner">
        <!-- LEFT: Big logo -->
        <div class="auth-hero__logo">
          <img
            src="/images/payfriends-logov2.svg"
            alt="PayFriends logo"
            class="auth-hero__logo-img"
            decoding="async"
            fetchpriority="high"
          />
        </div>

        <!-- RIGHT: Text column -->
        <div class="auth-hero__textcol">
          <h1 class="auth-hero__title">Pay friends, stay friends</h1>

          <p class="auth-hero__intro">
            PayFriends is a kind, smart fintech app — built to keep friends on good terms.
    <!-- Left column for desktop -->
    <div class="left-column">
      <div class="left-logo-section">
        <img src="/images/payfriends-logov2.png" alt="PayFriends logo" />
        <h2 class="left-tagline">Pay friends, stay friends</h2>
      </div>
      <ul class="left-features">
        <li>• Fair, trust-based loans between friends</li>
        <li>• Automatic reminders and smart interest recalculation</li>
        <li>• App handles chasing and negotiations — you stay friends</li>
      </ul>
      <section class="left-hero-section">
        <!-- LEFT: logo -->
        <img src="/logo-payfriends.svg" alt="PayFriends logo" />

        <!-- RIGHT: text block -->
        <div class="left-text-block">
          <h1 class="left-tagline">Pay friends, stay friends</h1>

          <p class="left-description">
            PayFriends is a kind, smart fintech app, built to keep friends on good terms.
            It motivates early repayments, adjusts interest fairly, and finds solutions when paying gets hard.
            We handle the math and reminders — you keep the friendship.
          </p>

          <ul class="auth-hero__bullets">
            <li>Fair, trust-based loans between friends</li>
            <li>Automatic reminders and smart interest recalculation</li>
            <li>App handles chasing and negotiations — you stay friends</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Right column / main content -->
    <main class="container right-column">
    <!-- Mobile: show left content above form -->
    <div class="mobile-left-content">
      <div class="left-logo-section">
        <img src="/images/payfriends-logov2.png" alt="PayFriends logo" />
        <h2 class="left-tagline">Pay friends, stay friends</h2>
      </div>
      <img src="/logo-payfriends.svg" alt="PayFriends logo" />
      <h1 class="left-tagline">Pay friends, stay friends</h1>

      <p class="left-description">
        PayFriends is a kind, smart fintech app, built to keep friends on good terms.
        It motivates early repayments, adjusts interest fairly, and finds solutions when paying gets hard.
        We handle the math and reminders, you keep the friendship.
      </p>

      <ul class="left-features">
        <li>• Fair, trust-based loans between friends</li>
        <li>• Automatic reminders and smart interest recalculation</li>
        <li>• App handles chasing and negotiations — you stay friends</li>
      </ul>
    </div>

    <header class="header" style="display:none">
      <img src="/images/payfriends-logov2.png" alt="PayFriends logo" style="height:56px; width:auto; margin-bottom:16px" />
      <h1>PayFriends</h1>
      <p class="tagline">Create simple agreements between friends.</p>
    </header>

    <div class="tabs">
      <div class="tab active" onclick="showTab('login')">Login</div>
      <div class="tab" onclick="showTab('signup')">Sign Up</div>
    </div>

    <section class="card form-section active" id="login-section">
      <h2>Login</h2>
      <form id="login-form">
        <div class="row">
          <label>Email</label>
          <input id="login-email" type="email" placeholder="your@email.com" required />
        </div>
        <div class="row">
          <label>Password</label>
          <input id="login-password" type="password" placeholder="••••••••" required />
        </div>
        <button type="submit">Login</button>
        <p id="login-status" class="status"></p>
      </form>
    </section>

    <section class="card form-section" id="signup-section">
      <h2>Sign Up</h2>
      <form id="signup-form">
        <div class="row">
          <label>Full legal name (as on passport)</label>
          <input id="signup-fullname" type="text" placeholder="Jane Smith" required />
        </div>
        <div class="row">
          <label>Email</label>
          <input id="signup-email" type="email" placeholder="your@email.com" required />
        </div>
        <div class="row">
          <label>Password</label>
          <input id="signup-password" type="password" placeholder="••••••••" required />
        </div>
        <p style="color:var(--muted); font-size:13px; margin:0 0 8px 0">Minimum 6 characters</p>
        <button type="submit">Create Account</button>
        <p id="signup-status" class="status"></p>
      </form>
    </section>
  </main>
  </div>

  <script>
    function showTab(tab) {
      // Update tabs
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      event.target.classList.add('active');

      // Update sections
      document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
      document.getElementById(tab + '-section').classList.add('active');
    }

    // Login form
    document.getElementById('login-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;
      const status = document.getElementById('login-status');

      status.textContent = 'Logging in...';
      status.className = 'status';

      try {
        const res = await fetch('/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        const data = await res.json();

        if (!res.ok) {
          throw new Error(data.error || 'Login failed');
        }

        status.textContent = 'Success! Redirecting...';
        setTimeout(() => {
          window.location.href = '/app';
        }, 500);
      } catch (err) {
        status.textContent = err.message;
        status.className = 'status error';
      }
    });

    // Signup form
    document.getElementById('signup-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const fullName = document.getElementById('signup-fullname').value.trim();
      const email = document.getElementById('signup-email').value.trim();
      const password = document.getElementById('signup-password').value;
      const status = document.getElementById('signup-status');

      if (!fullName) {
        status.textContent = 'Full name is required';
        status.className = 'status error';
        return;
      }

      // Validate full name has at least 2 words
      const nameParts = fullName.split(/\s+/);
      if (nameParts.length < 2) {
        status.textContent = 'Please enter your full name (first and last name), exactly as on your passport.';
        status.className = 'status error';
        return;
      }

      status.textContent = 'Creating account...';
      status.className = 'status';

      try {
        const res = await fetch('/auth/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password, fullName })
        });
        const data = await res.json();

        if (!res.ok) {
          throw new Error(data.error || 'Signup failed');
        }

        status.textContent = 'Account created! Redirecting...';
        setTimeout(() => {
          window.location.href = '/app';
        }, 500);
      } catch (err) {
        status.textContent = err.message;
        status.className = 'status error';
      }
    });
  </script>
</body>
</html>
