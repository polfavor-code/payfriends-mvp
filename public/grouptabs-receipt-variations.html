<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PayFriends Design Lab v3: Receipt Variations</title>
  
  <!-- Shared Styles -->
  <link rel="stylesheet" href="/css/shared-controls.css">
  <link rel="stylesheet" href="/css/app.css">
  <link rel="stylesheet" href="/css/chat-theme.css">
  <link rel="stylesheet" href="/css/grouptabs.css">
  
  <style>
    :root {
      --proposal-bg: #0e1116;
      --proposal-card-bg: #161b24;
      --proposal-border: rgba(255, 255, 255, 0.1);
    }
    
    body {
      background: var(--proposal-bg);
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    
    /* --- Top Navigation --- */
    .lab-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(14, 17, 22, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--proposal-border);
      z-index: 1000;
      padding: 12px 24px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .lab-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .lab-title {
      font-weight: 700;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .lab-controls {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    
    .lab-select {
      background: var(--proposal-card-bg);
      border: 1px solid var(--proposal-border);
      color: #fff;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 14px;
    }
    
    .version-switcher {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    
    .version-btn {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--proposal-border);
      border-radius: 20px;
      color: var(--muted);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s;
    }
    
    .version-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }
    
    .version-btn.active {
      background: var(--accent);
      color: #0e1116;
      border-color: var(--accent);
    }
    
    /* --- Main Content Area --- */
    .lab-content {
      margin-top: 120px;
      padding: 24px;
      display: flex;
      justify-content: center;
    }
    
    .proposal-container {
      width: 100%;
      max-width: 480px; /* Mobile-first constraint */
      min-height: 800px;
      display: none; /* Hidden by default */
    }
    
    .proposal-container.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* --- Common Utility Classes for Mockups --- */
    .mock-screen {
      background: #000;
      border-radius: 32px;
      overflow: hidden;
      border: 8px solid #333;
      position: relative;
      min-height: 800px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    }
    
    .status-bar {
      height: 44px;
      padding: 0 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      font-weight: 600;
      color: #fff;
    }

  </style>
</head>
<body>

  <!-- Navigation -->
  <nav class="lab-nav">
    <div class="lab-header">
      <div class="lab-title">üßæ Receipt Lab</div>
      <div class="lab-controls">
        <select class="lab-select" id="mode-select" onchange="updateView()">
          <option value="equal">Mode: Equal Split</option>
          <option value="price_groups">Mode: Price Groups</option>
          <option value="magic_intro">Mode: Magic Link Intro</option>
        </select>
        <select class="lab-select" id="role-select" onchange="updateView()">
          <option value="organizer">Role: Organizer</option>
          <option value="guest">Role: Guest (Participant)</option>
        </select>
      </div>
    </div>
    <div class="version-switcher">
      <button class="version-btn active" onclick="switchVersion(1)">1. Classic Thermal</button>
      <button class="version-btn" onclick="switchVersion(2)">2. Funky Mixed (NEW)</button>
      <button class="version-btn" onclick="switchVersion(3)">3. Guest Check</button>
      <button class="version-btn" onclick="switchVersion(4)">4. Digital Pass</button>
      <button class="version-btn" onclick="switchVersion(5)">5. Diner Slip</button>
      <button class="version-btn" onclick="switchVersion(6)">6. High-End Bill</button>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="lab-content">
    
    <!-- Variation 1: Classic Thermal -->
    <div id="v1" class="proposal-container active">
      <style>
        /* Shared V4 Styles from previous file */
        #v1 .mock-screen {
          background: #2c2c2c;
          display: flex;
          justify-content: center;
          padding-top: 40px;
          overflow-y: auto;
        }

        #v1 .receipt-paper {
          background: #fff;
          width: 100%;
          max-width: 340px;
          min-height: 600px;
          margin-bottom: 40px;
          padding: 24px;
          font-family: 'Courier New', Courier, monospace;
          color: #000;
          box-shadow: 0 10px 20px rgba(0,0,0,0.3);
          position: relative;
          --mask: conic-gradient(from -45deg at bottom,#0000,#000 1deg 90deg,#0000 91deg) 50% / 20px 100%;
          -webkit-mask: var(--mask);
          mask: var(--mask);
          -webkit-mask-repeat: repeat-x;
          mask-repeat: repeat-x;
          padding-bottom: 40px;
        }

        #v1 .r-header { text-align: center; margin-bottom: 24px; }
        #v1 .r-logo {
          font-weight: 900;
          font-size: 24px;
          letter-spacing: -1px;
          margin-bottom: 8px;
          display: inline-block;
          border: 2px solid #000;
          padding: 4px 8px;
        }
        #v1 .r-line { border-bottom: 1px dashed #000; margin: 16px 0; }
        #v1 .r-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }
        #v1 .r-btn {
          background: #000; color: #fff; width: 100%; padding: 12px;
          font-family: 'Courier New', Courier, monospace; font-weight: 700;
          border: none; margin-top: 24px; cursor: pointer; text-transform: uppercase;
        }
        #v1 .r-input {
          border: none; border-bottom: 2px solid #000;
          font-family: 'Courier New', monospace; font-size: 18px;
          width: 100%; padding: 8px 0; margin-bottom: 16px; background: transparent;
        }
      </style>
      
      <div class="mock-screen">
        <div class="receipt-paper">
          <div class="r-header">
            <div class="r-logo">PayFriends</div>
            <div style="font-size: 12px;">CLASSIC RECEIPT</div>
          </div>
          
          <!-- Copy of V4 Content Here -->
          <div data-scenario="main">
             <div class="r-line"></div>
             <div class="r-row">
                <span>TOTAL BILL</span>
                <span>EUR 142.50</span>
             </div>
             <div class="r-line"></div>
             <p style="text-align:center; font-size:12px;">[Baseline Design]</p>
             <button class="r-btn">Action</button>
          </div>
          
           <div data-scenario="magic_intro">
             <div style="text-align: center; margin-bottom: 32px;">
               <h2 style="font-size: 20px; margin: 0;">GUEST CHECK</h2>
            </div>
            <input type="text" class="r-input" placeholder="NAME">
            <button class="r-btn">PRINT TICKET</button>
           </div>

        </div>
      </div>
    </div>

    <!-- Variation 2: Funky Mixed -->
    <div id="v2" class="proposal-container">
      <style>
        #v2 .mock-screen {
          background: #1a1d24;
          display: flex;
          justify-content: center;
          padding-top: 40px;
          overflow-y: auto;
          perspective: 1000px;
        }
        
        #v2 .funky-paper {
          background: #fff;
          width: 100%;
          max-width: 340px;
          min-height: 640px;
          padding: 24px;
          color: #000;
          font-family: 'Courier New', monospace;
          position: relative;
          transform: rotate(-2deg);
          box-shadow: 20px 20px 0 rgba(0,0,0,0.5);
          border: 4px solid #000;
        }
        
        #v2 .tape {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%) rotate(2deg);
            width: 120px;
            height: 30px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.4);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
        }
        
        #v2 .funky-header {
            font-family: -apple-system, sans-serif;
            font-weight: 900;
            font-size: 32px;
            text-transform: uppercase;
            line-height: 0.9;
            margin-bottom: 24px;
            transform: rotate(2deg);
            text-align: center;
            color: #6366f1;
            text-shadow: 2px 2px 0 #000;
        }
        
        #v2 .funky-row {
            background: #f3f4f6;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            border: 2px solid #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
        }
        
        #v2 .funky-btn {
            background: #fbbf24;
            color: #000;
            border: 4px solid #000;
            padding: 16px;
            font-weight: 900;
            font-size: 20px;
            width: 100%;
            margin-top: 32px;
            box-shadow: 8px 8px 0 #000;
            cursor: pointer;
            transform: rotate(1deg);
            transition: transform 0.1s;
        }
        
        #v2 .funky-btn:active {
            transform: translate(4px, 4px);
            box-shadow: 0 0 0 #000;
        }
        
        #v2 .stamp-mark {
            position: absolute;
            right: 20px;
            top: 140px;
            transform: rotate(-15deg);
            border: 4px solid #22c55e;
            color: #22c55e;
            padding: 8px 12px;
            font-size: 24px;
            font-weight: 900;
            border-radius: 8px;
            opacity: 0.8;
            mix-blend-mode: multiply;
        }

        #v2 .funky-avatar {
            width: 40px; 
            height: 40px; 
            border: 3px solid #000; 
            border-radius: 50%;
            background: #fff;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700;
        }
      </style>
      
      <div class="mock-screen">
        <div class="funky-paper">
            <div class="tape"></div>
            <div class="funky-header">DINNER<br>BILL üçù</div>
            
            <div data-scenario="main">
                <div style="text-align:center; font-size:12px; font-weight:700; margin-bottom:16px;">MARIO'S ‚Ä¢ TABLE 5</div>
                
                <div class="funky-row" style="background:#000; color:#fff;">
                    <span>TOTAL</span>
                    <span style="font-size:24px;">‚Ç¨142.50</span>
                </div>
                
                <div style="margin: 24px 0; border-top: 2px dashed #000;"></div>
                
                <!-- List -->
                <div class="funky-row" style="background:#fff;">
                    <div style="display:flex; align-items:center; gap:12px;">
                        <div class="funky-avatar">ME</div>
                        <span>You</span>
                    </div>
                    <span>‚Ç¨35.60</span>
                </div>
                
                <div class="stamp-mark">PAID</div>
                
                <button class="funky-btn">PAY UP!</button>
            </div>
            
            <div data-scenario="magic_intro">
                <h2 style="font-weight:900; font-size:24px; margin-bottom:8px;">WHO ARE YOU?</h2>
                <p style="font-size:14px; font-weight:700; color:#666; margin-bottom:24px;">ENTER YOUR NAME TO JOIN THE BILL</p>
                
                <input type="text" style="width:100%; border:4px solid #000; padding:16px; font-weight:700; font-size:20px; margin-bottom:16px; box-sizing:border-box;" placeholder="NAME...">
                
                <div data-mode-show="price_groups">
                    <div class="funky-row">
                        <span>üç∑ ALCOHOL</span>
                        <span>[SELECT]</span>
                    </div>
                </div>
                
                <button class="funky-btn">LET'S GO</button>
            </div>
        </div>
      </div>
    </div>
    
    <!-- Variation 3: Guest Check -->
    <div id="v3" class="proposal-container">
      <style>
        #v3 .mock-screen {
          background: #1e293b;
          display: flex;
          justify-content: center;
          padding-top: 40px;
          overflow-y: auto;
        }
        
        #v3 .guest-check {
            background: #eefdf5;
            background-image: 
                linear-gradient(#bbf7d0 1px, transparent 1px),
                linear-gradient(90deg, #bbf7d0 1px, transparent 1px);
            background-size: 100% 32px, 32px 100%;
            width: 100%;
            max-width: 340px;
            min-height: 600px;
            padding: 0;
            color: #166534;
            font-family: 'Times New Roman', serif;
            box-shadow: 0 10px 15px rgba(0,0,0,0.3);
            position: relative;
            border-top: 12px solid #15803d;
        }
        
        #v3 .gc-header {
            display: flex;
            border-bottom: 2px solid #15803d;
            text-align: center;
            font-weight: bold;
            font-size: 12px;
            background: #dcfce7;
        }
        
        #v3 .gc-box {
            flex: 1;
            padding: 8px 4px;
            border-right: 1px solid #86efac;
        }
        #v3 .gc-box:last-child { border-right: none; }
        
        #v3 .gc-title {
            text-align: center;
            font-size: 24px;
            font-weight: 900;
            padding: 24px 0;
            letter-spacing: 2px;
            border-bottom: 4px double #15803d;
        }
        
        #v3 .gc-body {
            padding: 0 24px;
            min-height: 300px;
        }
        
        #v3 .gc-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #bbf7d0;
            font-size: 18px;
            font-family: 'Courier New', monospace;
            font-weight: 700;
        }
        
        #v3 .handwritten {
            font-family: 'Brush Script MT', cursive;
            font-size: 28px;
            color: #000;
            transform: rotate(-2deg);
        }
        
        #v3 .gc-total {
            margin-top: auto;
            background: #dcfce7;
            padding: 16px 24px;
            border-top: 2px solid #15803d;
            display: flex;
            justify-content: space-between;
            font-weight: 900;
            font-size: 20px;
        }
        
        #v3 .gc-btn {
            background: #15803d;
            color: #fff;
            width: 100%;
            padding: 16px;
            font-family: 'Times New Roman', serif;
            font-weight: bold;
            font-size: 18px;
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #v3 .gc-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid #15803d;
            width: 100%;
            font-family: 'Brush Script MT', cursive;
            font-size: 32px;
            color: #000;
            margin: 24px 0;
            text-align: center;
        }
      </style>
      
      <div class="mock-screen">
        <div class="guest-check">
            <div class="gc-header">
                <div class="gc-box">APPT</div>
                <div class="gc-box">SOUP/SAL</div>
                <div class="gc-box">ENTREE</div>
                <div class="gc-box">VEG/POT</div>
                <div class="gc-box">DESSERT</div>
                <div class="gc-box">BEV</div>
            </div>
            
            <div class="gc-title">GUEST CHECK</div>
            
            <div class="gc-body" data-scenario="main">
                <div class="gc-row">
                    <span>1 Guest</span>
                    <span class="handwritten">Paul</span>
                </div>
                <div class="gc-row">
                    <span>Share</span>
                    <span class="handwritten">‚Ç¨35.60</span>
                </div>
                <div class="gc-row" style="color:#999; border:none;">
                    <span style="font-size:14px;">TAX INCL</span>
                </div>
                
                <div style="margin-top: 40px; text-align: center;">
                    <div class="handwritten" style="color:#15803d; font-size:36px; transform:rotate(-10deg);">Paid!</div>
                </div>
            </div>
            
            <div class="gc-body" data-scenario="magic_intro">
                 <div style="text-align: center; padding-top: 40px;">
                    <p style="margin:0; font-weight:bold;">PLEASE PRINT CLEARLY</p>
                    <input type="text" class="gc-input" placeholder="Your Name">
                    
                    <div data-mode-show="price_groups">
                        <label style="font-weight:bold; font-size:12px; display:block;">CHECK ONE:</label>
                        <div style="display:flex; justify-content:center; gap:16px; margin-top:12px;">
                             <div style="border:2px solid #15803d; padding:8px;">[x] Alc</div>
                             <div style="border:1px solid #166534; padding:8px;">[ ] No Alc</div>
                        </div>
                    </div>
                 </div>
            </div>
            
            <div class="gc-total">
                <span>TOTAL</span>
                <span>‚Ç¨142.50</span>
            </div>
            <button class="gc-btn">REPORT PAYMENT</button>
        </div>
      </div>
    </div>
    
    <!-- Variation 4: Digital Pass -->
    <div id="v4" class="proposal-container">
      <div class="mock-screen"></div>
    </div>
    
    <!-- Variation 5: Diner Slip -->
    <div id="v5" class="proposal-container">
      <div class="mock-screen"></div>
    </div>
    
    <!-- Variation 6: High-End Bill -->
    <div id="v6" class="proposal-container">
      <div class="mock-screen"></div>
    </div>

  </div>

  <script>
    // State Management
    let currentVersion = 1;
    let currentMode = 'equal'; 
    let currentRole = 'organizer';

    function switchVersion(v) {
      currentVersion = v;
      document.querySelectorAll('.version-btn').forEach((btn, idx) => {
        btn.classList.toggle('active', idx + 1 === v);
      });
      document.querySelectorAll('.proposal-container').forEach((el, idx) => {
        el.classList.toggle('active', idx + 1 === v);
      });
      renderCurrentView();
    }

    function updateView() {
      currentMode = document.getElementById('mode-select').value;
      currentRole = document.getElementById('role-select').value;
      renderCurrentView();
    }

    function renderCurrentView() {
      const container = document.querySelector(`#v${currentVersion} .mock-screen`);
      if(container) {
         container.setAttribute('data-mode', currentMode);
         container.setAttribute('data-role', currentRole);
      }
      
      // Toggle Scenarios for new structure
      const isMagic = currentMode === 'magic_intro';
      if(container) {
          const magicView = container.querySelector('[data-scenario="magic_intro"]');
          const mainView = container.querySelector('[data-scenario="main"]');
          if(magicView) magicView.style.display = isMagic ? 'block' : 'none';
          if(mainView) mainView.style.display = isMagic ? 'none' : 'block';
          
          container.querySelectorAll('[data-mode-show]').forEach(el => {
             el.style.display = el.getAttribute('data-mode-show') === currentMode ? 'block' : 'none';
          });
      }
    }

    // Initial Render
    updateView();
    
    // Copy V4 content to V1 as baseline if needed, but hardcoded above for speed.
  </script>
</body>
</html>
