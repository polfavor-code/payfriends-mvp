(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809,864],{9799:function(e,t,n){Promise.resolve().then(n.t.bind(n,2972,23)),Promise.resolve().then(n.bind(n,7864))},7864:function(e,t,n){"use strict";n.d(t,{AdminNotesSection:function(){return o}});var a=n(7437),r=n(2265),s=n(9376),i=n(3448);function o(e){let{entityType:t,entityId:n,existingNotes:o}=e,d=(0,s.useRouter)(),[c,l]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),f=async e=>{if(e.preventDefault(),c.trim()){u(!0),p(null);try{let e=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entityType:t,entityId:n,note:c.trim()})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to add note")}l(""),d.refresh()}catch(e){p(e.message)}finally{u(!1)}}};return(0,a.jsxs)("div",{className:"admin-card p-4",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-400 uppercase mb-3",children:"Internal Admin Notes"}),(0,a.jsxs)("form",{onSubmit:f,className:"mb-4",children:[(0,a.jsx)("textarea",{value:c,onChange:e=>l(e.target.value),placeholder:"Add a note... (append-only)",className:"admin-input mb-2",rows:3}),h&&(0,a.jsx)("div",{className:"text-red-400 text-sm mb-2",children:h}),(0,a.jsx)("button",{type:"submit",disabled:m||!c.trim(),className:"admin-btn admin-btn-primary",children:m?"Adding...":"Add Note"})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===o.length?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No notes yet."}):o.map(e=>(0,a.jsxs)("div",{className:"bg-gray-800/50 rounded p-3",children:[(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.note}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[e.admin_id," \xb7 ",(0,i.o0)(e.created_at)]})]},e.id))})]})}},3448:function(e,t,n){"use strict";n.d(t,{cn:function(){return s},o0:function(){return i}});var a=n(1994),r=n(3335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,a.W)(t))}function i(e){return e?new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”"}}},function(e){e.O(0,[972,265,971,117,744],function(){return e(e.s=9799)}),_N_E=e.O()}]);