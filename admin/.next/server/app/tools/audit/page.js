(()=>{var e={};e.id=672,e.ids=[672],e.modules={5890:e=>{"use strict";e.exports=require("better-sqlite3")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},1442:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(313),s(9454),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),d=s(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let c=["",{children:["tools",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,313)),"/Users/paulsomers/Dev/payfriends-mvp/admin/src/app/tools/audit/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9454)),"/Users/paulsomers/Dev/payfriends-mvp/admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/paulsomers/Dev/payfriends-mvp/admin/src/app/tools/audit/page.tsx"],x="/tools/audit/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/tools/audit/page",pathname:"/tools/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4471:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},7371:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(1812),a=s.n(r)},1812:(e,t,s)=>{"use strict";let{createProxy:r}=s(8570);e.exports=r("/Users/paulsomers/Dev/payfriends-mvp/admin/node_modules/next/dist/client/link.js")},313:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,dynamic:()=>d});var r=s(9510),a=s(7371),n=s(5748),i=s(644);let d="force-dynamic";async function l(){let e=(0,n.Op)(200,0);return(0,r.jsxs)("div",{className:"max-w-5xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Admin Audit Log"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Read-only"})]}),r.jsx("div",{className:"admin-card overflow-hidden",children:(0,r.jsxs)("table",{className:"admin-table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Timestamp"}),r.jsx("th",{children:"Admin"}),r.jsx("th",{children:"Action"}),r.jsx("th",{children:"Target"}),r.jsx("th",{children:"Metadata"})]})}),r.jsx("tbody",{children:0===e.length?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No audit log entries yet."})}):e.map(e=>{var t;let s=JSON.parse(e.metadata||"{}"),n=function(e,t){switch(e){case"user":return`/users/${t}`;case"loan":return`/loans/${t}`;case"grouptab":return`/grouptabs/${t}`;case"payment_report":return"/payments";default:return null}}(e.target_type,e.target_id);return(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"text-sm text-gray-400 whitespace-nowrap",children:(0,i.o0)(e.created_at)}),r.jsx("td",{className:"text-sm font-mono",children:e.admin_id}),r.jsx("td",{children:r.jsx("span",{className:`badge ${(t=e.action).includes("delete")||t.includes("disable")?"badge-disabled":t.includes("enable")?"badge-active":t.includes("note")||t.includes("review")?"badge-pending":"bg-gray-700 text-gray-300"}`,children:e.action})}),(0,r.jsxs)("td",{children:[r.jsx("div",{className:"text-xs text-gray-400",children:e.target_type}),n?r.jsx(a.default,{href:n,className:"text-sm text-blue-400 font-mono",children:e.target_id}):r.jsx("span",{className:"text-sm font-mono",children:e.target_id})]}),r.jsx("td",{className:"text-xs text-gray-500 max-w-xs truncate",children:Object.keys(s).length>0?(0,r.jsxs)("code",{className:"bg-gray-800 px-1 rounded",children:[JSON.stringify(s).substring(0,50),JSON.stringify(s).length>50?"...":""]}):"—"})]},e.id)})})]})}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Showing ",e.length," log entries"]}),(0,r.jsxs)("div",{className:"mt-6 admin-card p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase mb-2",children:"Tracked Actions"}),(0,r.jsxs)("ul",{className:"text-xs text-gray-500 space-y-1",children:[r.jsx("li",{children:"• soft_disable_user - User disabled by admin"}),r.jsx("li",{children:"• enable_user - User re-enabled by admin"}),r.jsx("li",{children:"• delete_user - User deleted (hard delete)"}),r.jsx("li",{children:"• anonymize_user - User data anonymized"}),r.jsx("li",{children:"• add_note - Admin note added"}),r.jsx("li",{children:"• mark_reviewed - Payment report marked as reviewed"}),r.jsx("li",{children:"• update_config - Remote config updated"})]})]})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,898,86,485],()=>s(1442));module.exports=r})();